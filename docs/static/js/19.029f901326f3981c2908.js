webpackJsonp([19],{"6jNh":function(t,e){},YjlR:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=o("4YfN"),n=o.n(c),r=o("+ryu"),i=o("V7Bk"),a=o("M6Nr"),l=o("ufMx"),s=o("gyMJ"),u=o("9rMa"),d=o("jt1B"),h={components:{pagination:r.a,collectBtn:i.a,collectContent:a.a,dialogExport:l.a},data:function(){var t=this;return{total:0,title:"我的报告",btn:[{name:"导出",iconName:"icon-zhizuo",className:"report_blue",fn:function(){t.exportReportList()}},{name:"删除",iconName:"icon-unie639",className:"report_blue",fn:function(){t.reportFolderDeleteAjax()}},{name:"制作报告",iconName:"icon-zhizuo",className:"report_blue",fn:function(){t.goProduceReport()}}],options:[],currentFolder:0,collectList:[],collectCheckList:[]}},computed:n()({},Object(u.c)(["dataLimit","dataPage","currPageSearch"])),watch:{currentFolder:{handler:function(t,e){console.log("监听目录id",t),this.reportFolderListAjax(this.currPageSearch)}},currPageSearch:{handler:function(t,e){console.log("监听用于我的报告，我的收藏的本页搜索",t),this.reportFolderListAjax(t)},deep:!0},dataLimit:{handler:function(t,e){console.log("监听每页的条数",t),0!=this.currentFolder&&this.reportFolderListAjax(this.currPageSearch)},deep:!0},dataPage:{handler:function(t,e){console.log("监听当前的页码",t),0!=this.currentFolder&&this.reportFolderListAjax(this.currPageSearch)},deep:!0}},methods:{exportReportList:function(){var t=this;this.collectCheckList.forEach(function(e){t.collectList.forEach(function(o){o.id==e&&""!=o.reportUrl&&t.$exportPng(o.reportUrl,o.reportName)})})},confirmExport:function(t){},goProduceReport:function(){var t=this,e=[];this.collectCheckList.forEach(function(o){t.collectList.forEach(function(t){t.id==o&&e.push({folderId:t.folderId,reportId:t.reportId,reportName:t.reportName})})}),this.$store.commit("changeReportList",e),this.$router.push({name:"produceReport",params:{id:"2"}})},folderListAjax:function(){var t=this;Object(s.g)().then(function(e){console.log("报告列表页——根据用户token查询我的报告分类列表",e),200==e.code&&e.data&&e.data.length>0&&(t.options=e.data,t.currentFolder=e.data[0].id)}).catch(function(t){console.log(t)})},reportFolderListAjax:function(t){var e=this;Object(s.C)({page:this.dataPage,size:this.dataLimit,folderId:this.currentFolder,reportName:t}).then(function(t){console.log("当前文件夹下面具体的表",t),200==t.code&&(e.collectCheckList=[],e.collectList=t.data.list,e.total=t.data.total)}).catch(function(t){console.log(t)})},reportFolderDeleteAjax:function(){var t=this;this.$confirm("确定要删除这些报告吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.collectCheckList.join(",");Object(s.B)({ids:e}).then(function(e){console.log("删除文件夹中的报告",e),200==e.code&&(t.reportFolderListAjax(t.currPageSearch),Object(d.a)({message:"删除成功",type:"success"}))}).catch(function(t){console.log(t)})}).catch(function(){Object(d.a)({message:"已取消删除"})})}},created:function(){this.folderListAjax()},mounted:function(){this.$root.search=""}},p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"collect"},[o("div",{staticClass:"search-result"},[o("div",{staticClass:"content"},[o("div",{staticClass:"clearfix main_sum"},[o("div",{staticClass:"main_echarts"},[o("collect-btn",{attrs:{btnCollectList:t.collectList,btnCollectCheckList:t.collectCheckList,title:t.title,type:"myReport",btn:t.btn,options:t.options},on:{"update:btnCollectList":function(e){t.collectList=e},"update:btnCollectCheckList":function(e){t.collectCheckList=e}}}),t._v(" "),o("collect-content",{attrs:{contentCollectList:t.collectList,contentCollectCheckList:t.collectCheckList,type:"myReport"},on:{"update:contentCollectCheckList":function(e){t.collectCheckList=e}}}),t._v(" "),o("div",{staticClass:"clearfix"},[o("pagination",{attrs:{total:t.total}})],1)],1)])])])])},staticRenderFns:[]};var f=o("vSla")(h,p,!1,function(t){o("6jNh")},"data-v-2809b7a7",null);e.default=f.exports}});