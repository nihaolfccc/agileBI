webpackJsonp([18],{Ojt4:function(t,e){},bHyn:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=o("4YfN"),n=o.n(c),r=o("+ryu"),a=o("V7Bk"),i=o("M6Nr"),l=o("gyMJ"),s=o("9rMa"),d=o("jt1B"),u={components:{pagination:r.a,collectBtn:a.a,collectContent:i.a},data:function(){var t=this;return{total:0,title:"我的收藏",btn:[{name:"导出",iconName:"icon-zhizuo",className:"report_blue",fn:function(){t.$root.exportEcharts()}},{name:"删除",iconName:"icon-unie639",className:"report_blue",fn:function(){t.reportFolderDeleteAjax()}},{name:"制作报告",iconName:"icon-zhizuo",className:"report_blue",fn:function(){t.goProduceReport()}}],collectList:[],collectCheckList:[],options:[],currentFolder:0}},computed:n()({},Object(s.c)(["dataLimit","dataPage","currPageSearch"])),watch:{currentFolder:{handler:function(t,e){console.log("监听目录id",t),this.reportListAjax(this.currPageSearch)}},currPageSearch:{handler:function(t,e){console.log("监听用于我的报告，我的收藏的本页搜索",t),this.reportListAjax(t)},deep:!0},dataLimit:{handler:function(t,e){console.log("监听每页的条数",t),0!=this.currentFolder&&this.reportListAjax(this.currPageSearch)},deep:!0},dataPage:{handler:function(t,e){console.log("监听当前的页码",t),0!=this.currentFolder&&this.reportListAjax(this.currPageSearch)},deep:!0}},methods:{goProduceReport:function(){var t=this,e=[];this.collectCheckList.forEach(function(o){t.collectList.forEach(function(t){t.id==o&&e.push({folderId:t.folderId,reportId:t.id,reportName:t.reportName})})}),this.$store.commit("changeReportList",e),this.$router.push({name:"produceReport",params:{id:"1"}})},folderListAjax:function(){var t=this;Object(l.Q)().then(function(e){if(console.log("我的收藏目录列表",e),200==e.code){var o=e.data;o.constructor==Array&&o.length>0&&(t.options=o,t.currentFolder=e.data[0].id)}}).catch(function(t){console.log(t)})},reportListAjax:function(t){var e=this;Object(l.L)({page:this.dataPage,size:this.dataLimit,folderId:this.currentFolder,reportName:t}).then(function(t){if(console.log("当前文件夹下面具体的表",t),200==t.code){var o=[];t.data.list.forEach(function(t,e){var c={folderId:t.folderId,folderName:t.folderName,id:t.id,reportId:t.reportId,reportName:t.reportName,reportUrl:t.storeUrl};o.push(c)}),e.collectCheckList=[],e.collectList=o,e.total=t.data.total}}).catch(function(t){console.log(t)})},reportFolderDeleteAjax:function(){var t=this;this.$confirm("确定要删除这些报告吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.collectCheckList.join(",");Object(l.K)({ids:e}).then(function(e){console.log("删除文件夹中的收藏",e),200==e.code&&(t.reportListAjax(t.currPageSearch),Object(d.a)({message:"删除成功",type:"success"}))}).catch(function(t){console.log(t)})}).catch(function(){Object(d.a)({message:"已取消删除"})})}},created:function(){this.folderListAjax()},mounted:function(){this.$root.search=""}},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"collect"},[o("div",{staticClass:"search-result"},[o("div",{staticClass:"content"},[o("div",{staticClass:"clearfix main_sum"},[o("div",{staticClass:"main_echarts"},[o("collect-btn",{attrs:{btnCollectList:t.collectList,btnCollectCheckList:t.collectCheckList,title:t.title,type:"collect",btn:t.btn,options:t.options},on:{"update:btnCollectList":function(e){t.collectList=e},"update:btnCollectCheckList":function(e){t.collectCheckList=e}}}),t._v(" "),o("collect-content",{attrs:{contentCollectList:t.collectList,contentCollectCheckList:t.collectCheckList,type:"collect"},on:{"update:contentCollectCheckList":function(e){t.collectCheckList=e}}}),t._v(" "),o("div",{staticClass:"clearfix"},[o("pagination",{attrs:{total:t.total}})],1)],1)])])])])},staticRenderFns:[]};var f=o("vSla")(u,h,!1,function(t){o("Ojt4")},"data-v-3eebb0d0",null);e.default=f.exports}});